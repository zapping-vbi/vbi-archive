dnl Process this file with autoconf to produce a configure script.
dnl $Id: configure.in,v 1.8 2001-11-22 17:51:07 mschimek Exp $

AC_INIT(configure.in)
AM_INIT_AUTOMAKE(rte, 0.4cvs)
AM_CONFIG_HEADER(config.h)

AC_PROG_CC

dnl for automake 1.5
AS=$CC
AC_SUBST(AS)
AC_SUBST(ASFLAGS)

dnl Stupid rpm in SuSE
CFLAGS="-g -O2 -Wall -fomit-frame-pointer"

AM_PROG_LIBTOOL

test -e site_def.h || cat <<EOF >site_def.h
/* Site specific definitions */

#ifndef SITE_DEF_H
#define SITE_DEF_H
#if 1 /* EXISTS */
#endif /* EXISTS */
#endif /* SITE_DEF_H */
EOF

AC_CHECK_HEADER(linux/soundcard.h,AC_DEFINE(OSS, 1,
					    [Define if you have linux/soundcard.h]))

AC_MSG_CHECKING(for EsounD)
ESD_VERSION=`esd-config --version`
if test $? -eq 0; then
	AC_MSG_RESULT($ESD_VERSION)
	ESD_LIBS=`esd-config --libs`
	ESD_CFLAGS=`esd-config --cflags`
	AC_SUBST(ESD_CFLAGS)
	AC_SUBST(ESD_LIBS)
	AC_DEFINE(USE_ESD, 1, [Define if you have ESD.])
else
	AC_MSG_RESULT([no, ESD won't be used])
fi

dnl Check whether program_invocation_name exists, GNU extension
AC_CHECK_FUNCS(program_invocation_name)

AC_OUTPUT([
Makefile
dnl ffmpeg/Makefile
dnl ffmpeg/libav/Makefile
dnl ffmpeg/libavcodec/Makefile
dnl ffmpeg/libavcodec/i386/Makefile
dnl ffmpeg/libavcodec/mpglib/Makefile
dnl ffmpeg/libavcodec/libac3/Makefile
rte.spec
])

dnl Finish the config
cd mp1e
./configure
echo "Type 'make' to compile rte. You can run './configure' under "
echo "the 'mp1e' dir to pass any special options to the mp1e "
echo "backend."

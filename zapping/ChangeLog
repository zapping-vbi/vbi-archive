2005-02-05    <mschimek@users.sf.net>

	* autogen.sh: Prepared for autoconf/make version test.
	* po/POTFILES.in: Missing deinterlace plugin files.
	* plugins/deinterlace/DI_TomsMoComp/DI_TomsMoComp.c,
	  plugins/deinterlace/DI_MoComp2/DI_MoComp2.c,
	  plugins/deinterlace/DI_Misc/DI_Weave.c,
	  plugins/deinterlace/DI_Misc/DI_VideoWeave.c,
	  plugins/deinterlace/DI_Misc/DI_VideoBob.c,
	  plugins/deinterlace/DI_Misc/DI_TwoFrame.c,
	  plugins/deinterlace/DI_Misc/DI_ScalerBob.c,
	  plugins/deinterlace/DI_Misc/DI_OldGame.c,
	  plugins/deinterlace/DI_Misc/DI_OddOnly.c,
	  plugins/deinterlace/DI_Misc/DI_Greedy2Frame.c,
	  plugins/deinterlace/DI_Misc/DI_Greedy.c,
	  plugins/deinterlace/DI_Misc/DI_EvenOnly.c,
	  plugins/deinterlace/DI_Misc/DI_Bob.c,
	  plugins/deinterlace/DI_Misc/DI_BlendedClip.c,
	  plugins/deinterlace/DI_Misc/DI_Adaptive.c,
	  plugins/deinterlace/DI_GreedyH/DI_GreedyH.c: Completed l18n. 
	* plugins/deinterlace/DI_TomsMoComp/TomsMoCompAll.inc: UseStrangeBob
	  disabled, functions use pavgb without capability check and look
	  buggy.
	* plugins/deinterlace/DI_GreedyH/DScalerCalls.c (InitDScaler):
	  GreedyUseVertFilter is undefined.
	* plugins/deinterlace/preferences.c (on_method_changed,
	  attach_method_combo): Fixed method enumeration.
	* plugins/deinterlace/main.c (properties_add): Restored help link.
	(plugin_init): OldGame temporarily disabled, needs CombFactor.
	* help/C/settings.xml: Added deinterlace plugin documentation.

2005-01-30    <mschimek@users.sf.net>

	* src/video_gdkrgb.c (image_put),
	  src/tvengbktr.c (set_overlay_window),
	  zapping_setup_fb/v4l25.c (setup_v4l25),
	  zapping_setup_fb/v4l.c (setup_v4l): Used bytes_per_line
	  instead of bytes_per_line[0].
	* zapping_setup_fb/zapping_setup_fb.c (main): printf type mismatch.
	* src/capture.c (request_capture_format): Possibly uninitialized
	  return value.
	* src/x11stuff.c (xv_adaptor_dump),
	  libvbi/teletext.c (top_navigation_bar_style_1),
	  libvbi/event.c (_vbi3_event_handler_list_remove):
	  Uninitialized variable.
	* plugins/deinterlace/DI_MoComp2/DI_MoComp2.c,
	  plugins/deinterlace/windows.h: Don't define size_t or we
	  run into conflicts with system headers.
	* libtv/image_format.c (tv_copy_image): NULL check correction.
	* src/zvbi.c: Open and close ttx_pipe as needed.
	(decoder_giofunc): Blocked on capture error. Now aborts when
	  error/eof propagates through ttx_pipe.
	* src/tvengxv.c, src/tvengemu.c, src/tvengbktr.c,
	  src/tveng25.c: Replaced t_error_msg() by tv_error_msg().
	* src/tveng1.c: Rewrote buffering routines to stack up empty
	  buffers and prepared for out of order buffer queuing.
	  Replaced t_error_msg() by tv_error_msg().
	* src/tveng.h (t_error_msg): Removed the ugly thing.
	(t_error): Replaced t_error_msg() by tv_error_msg().
	* src/tveng.c: Replaced t_error_msg() by tv_error_msg().
	(validate_overlay_buffer): Compared bytes_per_line instead of
	  bytes_per_line[0], always failing, disabling overlay.
	* plugins/teletext/view.c: s/0/VBI3_END.
	* plugins/teletext/search.c (idle): Missing sentinel in
	  vbi3_search_next call.
	* src/zconf.c (zconf_init), src/v4linterface.c (z_switch_channel),
	  src/plugins.c, src/osd.c (py_osd_render), src/cmd.c (switch_mode),
	  plugins/screenshot/screenshot.c (screenshot_save,
	  screenshot_timeout): Used message as printf-like template.
	  Replaced by %s string.
	* libvbi/teletext_decoder.c (mip_page_stat): Parameter sign fix.
	(vbi3_teletext_decoder_reset): Missing NULL check.
	* libvbi/search.c (vbi3_search_utf8_new): Abort on NULL pattern.
	* libvbi/misc.c (_vbi3_asprintf): Sign fix.
	* libvbi/link.c (vbi3_link_copy): NULL check correction.
	* libvbi/hamm.c (_vbi3_hamm8_inv): s/0xff/-1 to get rid of warning.
	* libvbi/export.c (vbi3_export_option_menu_get,
	  vbi3_export_option_menu_set, vbi3_export_option_get,
	  vbi3_export_option_set): Abort on NULL keyword.
	* libvbi/exp-gfx.c (vbi3_page_draw_caption_region_va_list,
	  vbi3_page_draw_teletext_region_va_list): Missing NULL checks.
	* libvbi/event.c (_vbi3_event_name): Missing default case.
	* libvbi/conv.c (vbi3_iconv_ucs2_close): Invalid pointer check.
	(vbi3_iconv_ucs2_open, vbi3_iconv_ucs2, vbi3_iconv_unicode,
	 strdup_iconv, _vbi3_strdup_locale_ucs2,
	 _vbi3_strdup_locale_teletext): Missing NULL checks.
	* libvbi/cache.c (vbi3_cache_remove_event_handler,
	  vbi3_cache_add_event_handler): assert !NULL.
	* libvbi/macros.h (VBI3_END): Added to take advantage of gcc 4
	  sentinel attribute in variadic format_options, export_options.
	* libtv/screen.h, libtv/pixel_format.h, libtv/macros.h,
	  libtv/image_format.h, libtv/clip_vector.h, libtv/callback.h,
	  libvbi/top_title.h, libvbi/teletext_decoder.h, libvbi/search.h,
	  libvbi/sampling_par.h, libvbi/pdc.h, libvbi/page.h,
	  libvbi/packet-830.h, libvbi/network.h, libvbi/macros.h,
	  libvbi/link.h, libvbi/lang.h, libvbi/image_format.h,
	  libvbi/hamm.h, libvbi/export.h, libvbi/exp-txt.h,
	  libvbi/exp-gfx.h, libvbi/conv.h, libvbi/cache.h, libvbi/bcd.h:
	  Updated function attributes.

2005-01-27    <mschimek@users.sf.net>

	* plugins/deinterlace/Makefile.am,
	  plugins/deinterlace/DI_GreedyH/Makefile.am,
	  plugins/deinterlace/DI_Misc/Makefile.am,
	  plugins/deinterlace/DI_MoComp2/Makefile.am,
	  plugins/deinterlace/DI_TomsMoComp/Makefile.am:
	  Added files missing in distribution.
	* src/zvbi.c: Define vbi_dvb_demux only if we have old libzvbi.
	* src/tvengbktr.c: Updated.
	* src/tveng25.c: Choose fprint_ioctl function at runtime.
	(dequeue_buffer, flush_buffers): EINTR check is redundant.
	* src/tveng1.c (p_tveng1_dequeue): Must bypass device_ioctl()
	  to get EINTR for timeout. Didn't fix the videostd bug though.
	* libvbi/Makefile.am (wstfont2.xbm): Don't rebuild fontgen if
	  wstfont2.xbm is up to date.
	* libvbi/search.c (vbi3_search_next_va_list, vbi3_search_next):
	  Const parameter fix in replacement funcs.
	* libvbi/fontgen.c (pbm_read): s/ssize_t/size_t fread return type.
	* libvbi/teletext_decoder.c (vbi3_teletext_decoder_get_network): Fixed.

2005-01-26    <mschimek@users.sf.net>

	* Makefile.am (SUBDIRS): Added test.
	* libvbi/teletext.c (vbi3_page_get_teletext_link): Fixed index check.
	* libvbi/teletext_decoder.c (decode_packet_0): Discard regular pages
	  with non-bcd subno, these are probably defective.
	(decode_packet_0): Parallel transmission fix fixed.
	* plugins/teletext/view.c
	(teletext_view_vbi3_link_from_pointer_position): Fully
	  initialize link, just in case.
	(home_action): Expect vbi3_page_get_home_link failure.

	* plugins/teletext/main.c (ttxview_popup_menu_new):
	  vbi3_link_destroy() crashed on
	  teletext_view_vbi3_link_from_pointer_position() failure.

2005-01-22    <mschimek@users.sf.net>

	* libvbi/hamm.h (vbi3_unham8): Must return signed int.

2005-01-20    <mschimek@users.sf.net>

	* src/tveng25.c: Removed bayer hack, bayer is now a first class format.
	* src/capture.c (rebuild_buffer): Fixed to handle cases where
	  available capture formats do not intersect with requested formats.
	* src/capture.c (change_capture_format): Always restart capturing,
	  for now.
	* src/tveng1.c (set_capture_format): Try common capture sizes on
	  failure, helps pwc driver.

2005-01-19    <mschimek@users.sf.net>

	* plugins/deinterlace/DI_TomsMoComp/TomsMoComp.h,
	  plugins/deinterlace/DI_MoComp2/MoComp2.h: Don't include malloc.h,
	  makes problems with gcc 4.0 and is obsolete and unneeded anyway.
	* plugins/mpeg/mpeg.c (pref_rebuild_configs): 
	  Nested func declaration fix for gcc 4.0.
	* plugins/deinterlace/windows.h: Added _m_int().
	* plugins/deinterlace/DI_GreedyH/DI_GreedyHMPulldown.c
	(PullDown_VSharp2, PullDown_VSoft2),
	  plugins/deinterlace/DI_GreedyH/DI_GreedyHF.asm: 
	  QWORD PTR fix, bug #1102718.
	* src/csconvert.c, libtv/pixel_format.c	(tv_pixfmt_name,
	  pixel_formats), libtv/image_format.c (tv_clear_image),
	  libtv/pixel_format.h: Added SBBGR, Bayer conversion to get rid of
	  tveng25 hack.

2005-01-18    <mschimek@users.sf.net>

	* src/tveng1.c (p_tveng1_dequeue): Timeout fix.
	* plugins/deinterlace/DI_TomsMoComp/Makefile.am (INCLUDES): 
	* plugins/deinterlace/DI_MoComp2/Makefile.am (INCLUDES): 
	* plugins/deinterlace/DI_Misc/Makefile.am (INCLUDES): 
	* plugins/deinterlace/DI_GreedyH/Makefile.am (INCLUDES):
	  VPATH fix.
	* src, plugins/teletext, plugins/mpeg/mpeg.h, libvbi,
	  libtv/misc.h, common/intl-priv.h, common/fifo.c: Include config.h
	  correction.
	* libvbi/teletext_decoder.c, libvbi/teletext.c, libvbi/search.c,
	  libvbi/packet-830.c, libvbi/misc.h (vbi3_printable), libvbi/hamm.h, 
	  libvbi/hamm.c, libvbi/fontgen.c (xbm_write):
	  hamm.c synchronized with libzvbi 0.2.12.
	* libvbi/Makefile.am (EXTRA_DIST): s/fontgen/fontgen.c - what did I
	  smoke?? 
	  (CLEANFILES): Added fontgen.
	* libvbi/Makefile.am, libtv/sse/Makefile.am, libtv/mmx/Makefile.am,
	  libtv/avec/Makefile.am (INCLUDES): Need top_srcdir for config.h.
	* libtv/screen.c (dga_query): Succeed without xf86dga, bug #1064597.

2005-01-15    <mschimek@users.sf.net>

	* plugins/screenshot/screenshot.c (ov511_grab_button_timeout,
	  screenshot_apply): Nested func declaration fix for gcc 4.0,
	  Debian bug #288749.
	* libvbi/exp-gfx.c (export_png): Nested func fix for gcc 4.0,
	  Debian bug #288749.

2005-01-10    <mschimek@users.sf.net>

	* plugins/screenshot/screenshot.glade2: Added full size grab option.
	* plugins/screenshot/screenshot.c (screenshot_setup,
	  screenshot_apply): Added full size grab option. 
	  (screenshot_grab): Optionally switch to full image size before
	  capturing an image.
	* zapping.schemas: Added plugins/screenshot/full_size.

2005-01-08    <mschimek@users.sf.net>

	* src/capture.h, src/capture.c: Rewrote the capture format
	  negotiation routines. Now clients can pass a set of suitable pixel
	  formats. That makes on the fly changes a lot easier, badly needed
	  by the deinterlace plugin, and allows more efficient buffer
	  management.
	(rebuild_buffer): Optimized to avoid reallocation of buffers with
	  usable size and pixfmt after release_capture_format().
	(capture_source_dispatch): Replaced hardcoded field balance by
	  gconf value, auto applies. Made the function video standard
	  agnostic.
	* src/video_gdkrgb.c, src/video_mem.c, src/video_x11.c,
	  src/video_xv.c, src/zimage.c, src/zimage.h: Replaced
	  suggest_format interface by supported pixel formats report.
	* src/zgconf.c, src/zgconf.h: Added z_gconf_float_spinslider_new()
	  for deinterlace/field_balance.
	* src/zimage.c:
	(video_uninit): release_capture_format().
	(video_init): request_capture_format() for display moved here from
	  video_suggest_format() which is gone now.
	* src/fullscreen.c, src/zmisc.c: video_init(), video_uninit(),
	  video_suggest_format() moved into capture_start(). 
	* plugins/screenshot/screenshot.c (screenshot_grab):
	  request_capture_format() changed, rewrote image format negotiation. 
	* plugins/mpeg/mpeg.c (do_start): request_capture_format() changed,
	  rewrote image format negotiation.
	* plugins/deinterlace/preferences.c: Added field balance slider,
	  but not used now. Fixed table padding.
	* plugins/deinterlace/main.c: Moved HEIGHT_DIV into site_def.h.
	  Added reverse_fields gconf option, auto applies. Removed
	  deinterlace_test(), no longer needed.
	(deinterlace): Video standard agnostic.
	(start_thread1): Video standard agnostic, enable capture mode if
	  necessary, request_capture_format() and add_display_filter() changed.
	* src/tveng1.c: Added support for PWC driver custom ioctls. For now
	  two extra controls 'fps' and 'snapshot'.
	(fprint_bttv_ioctl_arg): Was missing to print custom BTTV_VERSION.
	* common/Makefile.am: Added pwc-ioctl.h (PWC driver custom ioctls). 
	* common/pwc-ioctl.h: PWC driver custom ioctls, added from Linux
	  2.6.8.
	* zapping.schemas: Added deinterlace/reverse_fields and field_balance.
	* configure.in: site_def.h change.

2005-01-03    <mschimek@users.sf.net>

	* src/fullscreen.c (stop_fullscreen), src/zmisc.c (zmisc_stop),
	  src/capture.c (capture_stop): Don't stop when recording.
	* src/tveng.c:
	(tv_read_frame): Replaces tveng_read_frame().
	(tveng_get_timestamp): No longer needed, removed.
	* src/capture.c (buffer_done): Requeue capture buffers all fifo
	  consumers consumed.
	(fill_bundle_tveng): tveng_read_frame() changed.
	(capture_source_dispatch): Throttle display if the CPU is too slow
	  for the selected deinterlace method and would block the GUI from
	  displaying a "your cpu is too SLOW to play this" message.
	* plugins/deinterlace/DI_TomsMoComp/DI_TomsMoComp.c
	(TomsMoCompMethod), 
	  plugins/deinterlace/DI_MoComp2/DI_MoComp2.c (MoComp2Method),
	  plugins/deinterlace/DI_Misc/DI_VideoWeave.c (VideoWeaveMethod),
	  plugins/deinterlace/DI_Misc/DI_VideoBob.c (VideoBobMethod),
	  plugins/deinterlace/DI_Misc/DI_TwoFrame.c (TwoFrameMethod),
	  plugins/deinterlace/DI_Misc/DI_OldGame.c (OldGameMethod),
	  plugins/deinterlace/DI_Misc/DI_Greedy2Frame.c (Greedy2FrameMethod),
	  plugins/deinterlace/DI_Misc/DI_Greedy.c (GreedyMethod),
	  plugins/deinterlace/DI_GreedyH/DI_GreedyH.c (DI_GreedyHSettings),
	  plugins/deinterlace/windows.h: Localized.
	* zapping.schemas: Added deinterlace options.
	* src/zvbi.c (destroy_threads): Disabling vbi crashed b/c
	  g_io_add_watch() wasn't undone.
	* src/tveng25.c (tveng25_close_device): Destroy info->node.
	* common/structpr_gen.pl: fourcc fix. 
	* src/zmisc.h (SINGLE_BIT): Macro from src/tveng1.c and tveng25.c.
	* src/yuv2rgb.c: s/HAVE_GAS/HAVE_SSE fix.
	* src/v4linterface.c:
	(z_switch_video_input): Stop and restart capturing on a video input
	  change.
	(z_switch_standard): Stop and restart capturing on a video standard
	  change.
	* src/tvengxv.c (tvengxv_attach_device): Clear private data fix.
	* src/tveng_private.h (capture_device): Added streaming interface.
	* src/tveng25.c: Cleaned up a bit.
	(set_audio_mode): Proper V4L ioctl checks.
	(set_control): Try VIDIOC_S_CTRL_OLD and remember to reduce ioctl
	  calls.
	(set_video_standard, set_video_input): Does not automatically stop
	  and restart capturing anymore. Added check for capturing active.
	(set_tuner_frequency): Made capture restart on
	  frequency change optional.
	(queue_xbuffer, queue_xbuffers, p_tveng25_open_device_file,
	  restart, dequeue_buffer, flush_buffers): New streaming
	  capture routines to eliminate unnecessary copying when
	  deinterlacing, also replaces p_tveng25_qbuf/_dqbuf.
	(tveng25_start_capturing): Can no longer accept less buffers
	  granted than requested, would conflict with
	  src/capture.c/producer_buffer fifo when streaming. Needs better
	  fix one day. Munmap already mapped buffers on mmap failure.
	(tveng25_read_frame): Timeout code moved to dequeue_buffer().
	(get_capabilities): Extracted from p_tveng25_open_device_file().
	* src/tveng1.c: Cleaned up a bit.
	(set_video_standard, set_video_input): Does not automatically stop
	  and restart capturing anymore. Added check for capturing active.
	(get_supported_pixfmt_set): Added to get rid of slow and
	  error prone src/capture.c/scan_device().
	* src/tveng.c (tveng_attach_device): Made capture restart on
	  frequency change optional.
	(tv_set_capture_format): Does not automatically stop and restart
	  capturing anymore. Was always a bad idea, fatal when streaming.
	* src/tveng.h, src/tveng.c:
	(tv_dequeue_capture_buffer, tv_dequeue_capture_buffer_with_timeout, 
	 tv_flush_capture_buffers, tv_queue_capture_buffer): New streaming
	  capture interface to eliminate unnecessary copying when
	  deinterlacing.
	(tveng_copy_frame): Replaced by libtv/image_format.c/tv_copy_image().
	* src/cpu.c: Added runtime AltiVec detection. 
	* src/capture.c: Cleaned up struct producer_buffer. Added support
	  for streaming capture to avoid copying twice in the driver read
	  function and deinterlace plugin. Added GSource replacing
	  idle_handler() when the driver supports streaming, with a
	  deinterlace hook.   
	(capture_start, capture_stop): Use GSource if possible.
	(fill_bundle_tveng, rebuild_buffer, plugin_read): Moved duplicate
	  code here.
	(scan_device): No longer needed, now all interfaces have
	  supported_pixfmt_set.
	(add_display_filter, remove_display_filter): New deinterlace hook.
	(retrieve_frame): Copy buffers only if necessary.
	* po/POTFILES.in: Added deinterlace plugin files.
	* src/zimage.h, src/yuv2rgb.c, src/tveng.h, src/tveng.c, src/main.c,
	  src/csconvert.h, src/csconvert.c, src/capture.c,
	  plugins/screenshot/screenshot.h, plugins/screenshot/screenshot.c,
	  plugins/screenshot/deint.c, plugins/screenshot/b_ppm.c,
	  plugins/screenshot/b_jpeg.c, plugins/mpeg/mpeg.c: zimage changed,
	  tveng_image_data finally gone.
	* plugins/Makefile.am (deinterlace_plugin): Enabled deinterlace dir.
	* pixmaps/Makefile.am (PIXMAPS): Added interlace48.png. 
	* libtv/avec/Makefile.am (AM_CFLAGS): Add -maltivec since we have
	  runtime detection now.
	* libtv/sse/copy_block.c, libtv/mmx/copy_block.c,
	  libtv/image_format.h, libtv/image_format.c:
	  tv_copy_image takes source and dest format which is more logical
	  and permits cropping and padding.
	* zapping_setup_fb/zapping_setup_fb.c, zapping_setup_fb/v4l.c,
	  zapping_setup_fb/v4l25.c, src/video_xv.c, src/video_x11.c,
	  src/video_mem.c, src/video_gdkrgb.c, src/tvengemu.c,
	  src/tveng25.c, src/tveng1.c, src/capture.c, libtv/screen.c,
	  libtv/pixel_format.c, libtv/image_format.h, libtv/image_format.c:
	  More generic tv_image_format (u_|v_)offset -> offset[4],
	  (uv_)bytes_per_line -> bytes_per_line[4], pixfmt ->
	  tv_pixel_format*, added name field.
	* libtv/image_format.h, libtv/image_format.c:
	(tv_new_image): Added for screenshot plugin to create temp images.
	* common/fifo.h, common/fifo.c (zf_wait_empty_buffer_timeout):
	  Added to prevent blocking in src/capture.c/capture_source_dispatch().
	(zf_wait_full_buffer_timeout): Handle NULL timeout.
	(zf_wait_full_buffer): Replaced duplicate code by
	  zf_wait_full_buffer_timeout() call.
	* common/device.h (timeval_add): Added.
	(timeval_cmp): Added.
	* common/device.c (timeout_subtract_elapsed): Handle NULL timeout as
	  select(2) does.
	* common/structpr_gen.pl: Made ioctl arg function name variable.
	* common/Makefile.am (_videodev.h): Renamed fprint_ioctl_arg to
	  fprint_v4l_ioctl_arg to permit inclusion in tveng25.c.
	* configure.in (CHECK_SIMD): Result string fix. Enable -maltivec
	  since we have runtime detection now.
	  (AC_OUTPUT): Added deinterlace plugin. 
	* test/Makefile.am (TESTS): Added memcpy.
	* test/memcpy.c (test1): tv_memcpy unit test.
	* libtv/avec: New AltiVec routines using gcc vector extensions.

2004-12-09    <mschimek@users.sf.net>

	* src/bayer.c (LOOP): Off-by-one read fix.
	* libtv/misc.h: Added constant ffs macro for get pixel function.
	* configure.in: Check for x86_64 since not all SWAR is portable.
	(AC_OUTPUT): Added test/Makefile, libtv/mmx|sse|avec/Makefile.
	* test: Added for SWAR checks.
	* libtv/mmx: New MMX routines using gcc vector extensions.
	* libtv/sse: New SSE routines using gcc vector extensions.
	* libtv/image_format.c (clear_image): Added MMX and SSE optimized
	  routines.
	  (tv_memcpy): Added for deinterlacer, with MMX and SSE optimized
	  versions.
	* src/main.c, src/yuv2rgb.c: CPU detection API changed.
	* src/cpu.h, src/cpu.c (cpu_detection): Added AMD SSE2, Centaur
	  (now Cyrix) tests, new API.

2004-12-07    <mschimek@users.sf.net>

	* src/tveng25.c: Replaced tveng25_vbuf by tv_capture_buffer.
	(get_supported_pixfmt_set): Try ENUM_FMT first. Don't TRY_FMT
	  with buggy sn9c102.
	(p_tveng25_open_device_file): Don't open O_NONBLOCK with buggy
	  sn9c102. Factored out get_capabilities().
	(tveng25_start_capturing): Map only one buffer with buggy sn9c102.
	(tveng25_read_frame): Improved timeout. Proper handling of EINTR
	  and EAGAIN.
	(reset_crop_rect): Try VIDIOC_CROPCAP_OLD.
	(set_control): Try VIDIOC_S_CTRL_OLD.
	* src/tveng.h: Added tv_capture_buffer and TV_CAPS_QUEUE.
	* libtv/pixel_format.h: Extended tv_color_space.
	(tv_pixel_format): Replaced UV plane scales by shifts to eliminate
	  time consuming divisions.
	* libtv/pixel_format.h, libtv/pixel_format.c
	(tv_pixel_format_from_pixfmt, tv_pixfmt_bytes_per_pixel,
	 tv_pixel_format_to_pixfmt): Replaced
	  tv_pixel_format_from_pixfmt code by static table to speed up
	  format lookups.
	* zapping_setup_fb/v4l.c (setup_v4l), zapping_setup_fb/v4l25.c
	  (setup_v4l25), src/video_xv.c (image_new),
	  src/video_gdkrgb.c (image_new), src/video_mem.c (planar_image_new),
	  src/tveng.c (tveng_copy_frame, tv_clear_image): 
	  libtv/screen.c, libtv/image_format.c (tv_image_format_init, 
	  tv_image_format_is_valid): tv_pixel_format_from_pixfmt changed.
	* common/videodev25.h: Updated from Linux 2.6.9.
	* common/device.h, common/device.c:
	(timeval_subtract, timeout_subtract_elapsed): New helper functions
	  for proper select() timeout.

2004-12-01    <mschimek@users.sf.net>

	* src/tveng25.c: Added preliminary Bayer (SBGGR8) support with
	  conversion to BGRA32, BGR24 and BGR16.
	* src/tveng.c (tveng_attach_device, p_tv_set_capture_format):
	  Disable YUVHACK if the device supports only RGB.
	* common/videodev25.h: Added V4L2_PIX_FMT_SBGGR8.
	* src/bayer.c, src/bayer.h: New plain C Bayer (SBGGR) to RGB
	  conversion routines.
	* src/zmisc.c (zmisc_switch_mode): No py zapping.closed_caption
	  call without libzvbi, command not compiled.
	(zmisc_switch_mode): tveng_set_capture_size() redundant, removed.
	* src/zapping.c (instance_init): No zconf_add_hook closed_caption
	  without libzvbi.
	* plugins/teletext/view.c,
	* plugins/teletext/Makefile.am,
	* libvbi/misc.h, libvbi/event.h:
	(ZAPPING8): Let Makefile.am disable incomplete features.

2004-11-20    <mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c: Fixed capture_format_id unset value. 
	* plugins/mpeg/mpeg.c (video_callback), src/capture.h,
	  src/capture.c: Added copy parameter to retrieve_frame to
	  avoid unnecessary image copying (unfinished).
	* libtv/image_format.c, libtv/image_format.h,
	  src/tveng.c, src/tveng.h: Moved tv_clear_image from
	  tveng.c to image_format.c. Color parameter unnecessary, removed.
	* common/fifo.h, common/fifo.c (send_empty_unbuffered):
	  Added buffer_done callback for tveng buffer queues.
	* configure.in: Cleaned up. Improved SIMD checks.

2004-11-18    <mschimek@users.sf.net>

	* plugins/teletext/preferences.c, plugins/mpeg/options.c,
	  src/v4linterface.c, src/channel_editor.c: Spinslider changes.
	* src/zmisc.c, src/zmisc.h, src/zgconf.c, src/zgconf.h,
	  src/Makefile.am:
	  Moved zspinslider code from zmisc.(c|h) to new
	  zspinslider.(c|h) and GObject-ified.
	* libvbi/dlist.h (DLIST_CONSISTENCY),
	  libvbi/cache.c (CACHE_CONSISTENCY): Seems to be ok, now
	  disabled by default.

2004-11-17    <mschimek@users.sf.net>

	* src/zgconf.c, src/zgconf.h:
	(z_gconf_check_button_new): Incorporated auto-update function.
	(z_gconf_int_spinslider_new): Added.
	* src/zmisc.c, src/zmisc.h, src/zgconf.c, src/zgconf.h,
	  src/Makefile.am:
	  Moved GConf helpers from zmisc.(c|h) to new zgconf.(c|h)
	  and added a few missing set and auto-update functions.

2004-11-16    <mschimek@users.sf.net>

	* plugins/teletext/preferences.c (instance_finalize): Didn't
	  finalize parent class.
	* plugins/deinterlace/preferences.h,
	  plugins/deinterlace/preferences.c,
          plugins/deinterlace/main.c, plugins/deinterlace/main.h,
	  plugins/deinterlace/Makefile.am: Added plugin interface and GUI.
	* src/zmisc.h, src/zmisc.c (z_gconf_get_string): Added
	  z_gconf_get_string().
	* plugins/deinterlace: Corrected ref'ing of MMX globals in
	  inline asm, cannot use -fPIC GOT pointer ebx. Checked with
	  ditest that everything works.
	* plugins/deinterlace/ditest.c: Added.
	* plugins/deinterlace: Stole deinterlace plugins from DScaler,
	  commented out Windows dialog code, ported asm to gcc.

2004-11-12    <mschimek@users.sf.net>

	* libvbi/Makefile.am, plugins/teletext/Makefile.am:
	  Changed libvbi to LTLIBRARY for proper linking.

2004-11-11    <mschimek@users.sf.net>

	* Release 0.8

2004-11-10    <mschimek@users.sf.net>

	* libvbi/Makefile.am (EXTRA_DIST): fontgen.c, not fontgen.
	* libvbi/search.c (vbi3_search_next_va_list, vbi3_search_next):
	  Constness fix in no-search section.
	* libvbi/conv.c: Have to prepare for byte-reversed UCS-2
	  iconv on FreeBSD, sigh.
	* src/zmisc.c, src/zvbi.c: Without-zvbi fixes.

2004-11-09    <mschimek@users.sf.net>

	* README, TODO, NEWS, help/C/figures/zapzilla.png,
	  help/C/zapzilla.xml, help/C/settings.xml: Updated for 0.8.
	* plugins/teletext/window.c: Fixed button-press-event, must
	  watch view, not entire window.
	* src/zapping.c: Fixed button-press-event, must
	  watch zvideo, not the entire window.
	* plugins/teletext/view.c: FLOF/TOP navigation optional,
	  a GConf key without preferences.
	* zapping.schemas: Added plugins/teletext/view/navigation.
	* libvbi/teletext.c (keyword): Short-by-one URL strings fixed.
	* plugins/teletext/view.c (class_init),
	  plugins/teletext/window.c (instance_init): Prefixed custom
	  view signals, just in case.

2004-11-08    <mschimek@users.sf.net>

	* libvbi/teletext_decoder.c (reset): Send network event too.
	* src/zvbi.c (zvbi_channel_switched), plugins/teletext/main.c:
	  Notify decoders of channel changes, including name.
	* plugins/teletext/main.c, plugins/teletext/view.c: Moved
	  zvbi decoder routines from view.c to main.c where the
	  stuff belongs, and replaced sliced_list hack.
	* src/zvbi.c: Added DVB PES reader for tests.
	(on_vbi_device_changed): Added to semi-auto-apply device
	  change with prefs apply button.
	* src/zvbi.c, src/zvbi.h: New decoder add and remove funcs
	  to replace the sliced_list hack.
	* libvbi/exp-gfx.c (DRAW_CHAR): Double width bpl fix.
	* libvbi/teletext.c (level_one_row): Wide char fix.

2004-11-07    <mschimek@users.sf.net>

	* libvbi/teletext.c: Fixed TOP navigation.
	(vbi3_page_get_teletext_link): Fixed.
	* libvbi/teletext_decoder.c (top_page_stat): Must override
	  guessed normal page type.
	* plugins/teletext/main.c (py_ttx_open_new): Default to GConf
	  home_page instead of 100.
	* plugins/teletext/view.c (redraw_view): Make sure we have
	  a page image even before the window was realized, prevents
	  display of only header patch. While scanning show requested
	  not current pgno in toolbar.
	(expose_event): No resize_scaled_page_image() needed here.
	(monitor_pgno): Draw "loading" image if we have no page.	  
	(resize_scaled_page_image): Redraw "loading" image if we have
	  no page.
	(teletext_view_load_page, view_vbi3_event_handler,
	  teletext_view_switch_network): Reset view charset only on
	  network changes.

2004-11-03    <mschimek@users.sf.net>

	* libvbi/teletext_decoder.c (decode_packet_0): Parallel
	  transmission fix.
	* plugins/teletext/view.c (class_init): live_clock key name fixed.

2004-11-02    <mschimek@users.sf.net>

	* zapping.desktop.in: Added Terminal, StartupNotify, Categories
	  from patch by Pino Toscano.
	* configure.in: Libzvbi requirement changed to 0.2.9 for proxy
	  routines, and checked with pkg-config. Note 0.2.9 is the first
	  version installing a zvbi-0.2.pc file. Added glibc 2.1 /
	  libunicode check from libzvbi for libvbi/search.c.
	(AC_OUTPUT): Added libvbi/Makefile.
	* src/Makefile.am (INCLUDES): Added -D_GNU_SOURCE - we _want_
	  to use GNU extensions, but don't _depend_ on them.
	* common/Makefile.am (libcommon_a_SOURCES): Added intl-priv.h.
	* common/intl-priv.h: New common localization header.
	* Makefile.am (SUBDIRS): Added libvbi.
	* libvbi: Update from libzvbi CVS for the Teletext plugin. Will
	  be removed after the libzvbi-0.3 release. Renamed prefix
	  vbi_ to vbi3_ to avoid linker conflicts with libzvbi-0.2,
	  which is still used for I/O. Various fixes and improvements.
	* src/zvbi.c, src/zvbi.h:
	  Moved Teletext page rendering code, GConf level and interp type
	  code into plugins/teletext/view.c. Replaced VBI decoding thread
	  by GIOChannel, seems to work well enough and the ability to call
	  GUI routines directly from Teletext decoder greatly simplifies
	  things. Removed the ttx_client code. Added basic support for
	  Tom's zvbid in libvbi 0.2.9. Added a GSource to read from the
	  proxy. Proxy buffers for us, so we can eliminate the capture
	  thread too and need no GIOChannel.
	* src/zmisc.c, src/zmisc.h:
	  Added z_misc_error_quark, Z_MISC_ERROR, enum ZMiscError to throw
	  our own GErrors. Renamed z_overwrite_file to
	  z_overwrite_file_dialog for clarity, improved messages and changed
	  to HIG-2 style error dialogs.
	(start_teletext): resize/render_ttx_page obsolete, replaced by
	  view->client_redraw.
	(z_message_dialog_new, z_message_dialog_new_va_list):
	  Added to simplify building of HIG-2 style message dialogs.
	(z_show_non_modal_message_dialog): HIG-2 style equivalent of
	  our old ShowBox macro.
	(z_build_path): Replaced error_description arg by GError. Changed
	  error messages for nicer dialogs.
	(z_build_path_with_alert): New function like z_build_path, but
	  also shows a HIG-2 style alert message dialog on error.
	(z_gconf_check_button_new): New function to create a check button
	  linked to a boolean GConf key, for Teletext prefs.
	(z_show_empty_submenu): New helper function to show action group
	  submenus despite being empty, when we create them manually.
	  Used in zapping.c, Teletext plugin.
	(z_strappend): Clone of g_strconcat which reallocates.
	(z_help_display): Wrapper of gnome_help_display, switching
	  out of fullscreen if necessary and showing a HIG-2 style error
	  dialog on failure.
	(z_url_display): Wrapper of gnome_url_show, switching
	  out of fullscreen if necessary and showing a HIG-2 style error
	  dialog on failure.
	* src/zmisc.c, src/zapping.c, src/v4linterface.c, src/tvengxv.c,
          src/tvengemu.c, src/tvengbktr.c, src/tveng_private.h,
          src/tveng25.c, src/tveng1.c, src/tveng.h,
          src/tveng.c, src/properties-handler.c, src/overlay.c,
          src/main.c, src/fullscreen.c, src/cmd.c, src/channel_editor.c,
          src/capture.c, plugins/screenshot/screenshot.c,
          plugins/mpeg/mpeg.c:
          Made struct tveng_device_info opaque and added a various get/set
          functions. Removed clip vector from tv_window, added clip
          vector parameter to set overlay window function. Cleaned up
          chromakey interface.
	* My First Decent Monitor 1998-2004 RIP. :-(
        * zapping_setup_fb/v4l2.c (setup_v4l2),
          zapping_setup_fb/v4l.c (setup_v4l),
          src/tveng1.c (get_overlay_buffer),
          src/tveng25.c (image_format_from_format),
          src/tveng.c (tv_clear_image),
          libtv/image_format.h,
          libtv/image_format.c (tv_image_format_init):
          Added tv_color_space, image_format.color_space.
        * src/tvengxv.c, src/tvengemu.c, src/tvengbktr.c, src/tveng_private.h,
          src/tveng25.c, src/tveng1.c, src/tveng.h,
          src/tveng.c: Merged private device info struct into now
          opaque tveng_device_info. Grouped overlay and capture
          values and methods. Cleaned up internal capture format interface.
        * src/zmisc.c (start_teletext): Moved last remaining ttx_client
          calls to plugins/teletext/view.c.
        * src/tveng1.c (p_tveng1_open_device_file): Fixed BTTV_VERSION
          ioctl parameter.
        * src/tveng2.c, src/tveng2.h, src/tveng.c,
          zapping_setup_fb/v4l2.c (setup_v4l2): V4L2 0.20 no longer supported. 
        * src/zmisc.c, src/main.c, src/globals.c, src/globals.h,
          src/fullscreen.c, plugins/teletext/view.c,
          plugins/teletext/view.h: Replaced teletext_view_on_key_press
	  by "member function".
	* src/main.c: Call startup_subtitle, subtitle.c,
	  for py_closed_caption.
	* src/subtitle.c, src/subtitle.h: zvbi_caption_pgno
	  and py_closed_caption moved here from zvbi.c.
	* src/properties.c (generic_cancel): set_data before calling
	  the cancel function, which may destroy the page like
	  teletext prefs do.
	* src/plugin.c (plugin_load_plugins_in_di): Log g_dir_open GError.
	* src/i18n.c, src/i18n.h (iso639_to_language_name): Added
	  for TeletextWindow page encoding menu.
	* src/fullscreen.c (set_blank_timeout),
	  src/zmisc (zmisc_switch_mode): Default to no cursor blanking.
	* src/frequencies.c: Oops. Debugging fprintf was enabled.
	* src/channel_editor.c, src/cmd.c, src/properties.c,
	  src/zapping.c:
	  s/gnome_help_display/z_help_display for
	  fullscreen switch and proper error handling.
	* src/Makefile.am (INCLUDES): Added -D_GNU_SOURCE - we _want_
	  to use GNU extensions, but don't _depend_ on them. Added
	  ZVBI_CFLAGS which comes from pkgconfig.
	(zapping_LDADD): s/ZVBI_LIB/ZVBI_LIBS from pkgconfig, includes
	  libs libzvbi depends upon.
	* plugins/teletext/Makefile.am: Link plugin with local libvbi
	  0.3 instead of libzvbi 0.2, until libzvbi 0.3 is out.
	(libteletext_zapping_la_SOURCES): Removed color.c/h, added
	  preferences.c/h, page_num.h.
	* plugins/teletext/bookmark.c, plugins/teletext/bookmark.h:
	  Ported to libvbi 0.3. Replaced pgno, subno in bookmarks by
	  page_num, unfinished. Functions take network parameter.
	  Moved bookmark menu routines here.
	* plugins/teletext/color.c, plugins/teletext/color.h:
	  Files removed, color settings are now in preferences.
	* plugins/teletext/export.c:
	  L10n / encoding improved in libvbi 0.3, work-arounds
	  removed or replaced here. Constness fixes. Not working
	  electric filename code removed.
	(on_ok_clicked): New HIG-2 style overwrite confirmation, build
	  path error and write error message dialogs. Function simplified
	  with new zmisc routines.
	* plugins/teletext/export.c, plugins/teletext/export.h:
	  Ported to libvbi 0.3. Now uses refcounted vbi_page.
	* plugins/teletext/main.c, plugins/teletext/main.h:
	  Ported to libvbi 0.3. Cleaned up plugin interface. BCD hacks
	  removed. Color dialog removed. ZConf color options now in GConf,
	  view.c since color changed from decoder to page rendering param
	  in libvbi 0.3. Popup menu code moved to view.c. GConf charset,
	  level notification moved to view.c since these changed from
	  decoder to page formatting params. Bookmark menu code moved
	  to bookmark.c. Preferences code moved to new file preferences.c.
	  ZConf search options now in GConf, search.c. The module now
	  maintains a libvbi 0.3 Teletext decoder. Provides a static
	  anonymous vbi_network identifier for various functions.
	* plugins/teletext/page_num.h: New type to conveniently handle
	  page addresses consisting of network, pgno and subno.
	* plugins/teletext/preferences.c, plugins/teletext/preferences.h:
	  Preferences code moved here from main.c, wrapped in GObject.
	  Added page memory size and number of networks options, text
	  brightness and contrast moved here from color.c. Ported to
	  GConf with auto apply. Added apply function for cache
	  parameters. New HIG-2 style layout.
	* plugins/teletext/search.c, plugins/teletext/search.h:
	  Ported to libvbi 0.3. Now uses refcounted vbi_page. View page
	  hack replaced by teletext_view_show_page call. ZConf regexp
	  and casefold options now in GConf. UTF-8 conversion removed,
	  libvbi now supports UTF-8 directly.
	(on_help_clicked): s/gnome_help_display/z_help_display for
	  fullscreen switch and proper error handling.
	* plugins/teletext/toolbar.c, plugins/teletext/toolbar.h:
	  Ported to libvbi 0.3.
	(on_reveal_toggled): Fixed.
	* plugins/teletext/window.c, plugins/teletext/window.h:
	  Ported to libvbi 0.3. New TOP menu. Rebuilds automatically
	  on TOP changes and channel change. New Channel radio menu for
	  multi-channel cache, with received channel option. Rebuilds
	  automatically on cache or channel changes. New View/Encoding
	  radio menu to select character set for the current page, with
	  automatic option. Rebuilds automatically when page view changes.
	  No config code yet. Removed on_picture_size_key_press call,
	  doesn't belong here.
	* plugins/teletext/view.c, plugins/teletext/view.h:
	  Ported to libvbi 0.3. Replaced deprecated Gtk calls. Merged
	  zvbi.c drawing routines into TeletextView to simplify things.
	  Removed the ttx_client interface. Added preliminary sliced
	  VBI data interface. Cleaned up.
	  Patch code (blinking, rolling header, clock) is faster
	  and needs less memory by merging patches of consecutive
	  characters. Improved scaling.
	  TeletextView now supports a multi-network cache, interface
	  changed accordingly. Replaced pgno, subno in browser history
	  by page_num. Separated teletext_view_load_page into cleaner
	  load and show functions, the latter used by search.c.
	  Added two signals to update TeletextWindow on view changes.
	  Moved teletext level, default charset and interp type GConf
	  notify code here. Added code for new brightness and contrast
	  GConf options, formerly part of color dialog. Added code for
	  new rolling header and live clock GConf options without
	  preferences. All these options auto apply now.
	  Support overriding of transmitted charset, but no config code yet.
	  Removed support for TOP page 900 (also from libvbi 0.3), now
	  TeletextWindow implements a TOP menu.
	  Selection supports UTF-8, untested.
	  Replaced open_url, gnome_url_show by z_url_show for
	  fullscreen switch and proper error handling.
	  Fixed teletext_view_popup_menu_new.
	  Replaced remaining signals by overriding widget
	  class functions.
	* zapping.schemas: Added rolling_header, live_clock, cache_size,
	  cache_networks, brightness, contrast, search regexp, casefold,
	  all_channels.
	* POTFILES.in: Updated.

2004-10-28    <mschimek@users.sf.net>

	* Makefile.am (desktopdir): Changed zapping.desktop install dir
	  <datadir>/gnome/apps/Multimedia to <datadir>/applications.
	(uninstall-local): Uninstall zapping.schemas.

2004-10-22    <mschimek@users.sf.net>

	* src/zmisc.c (zmisc_switch_mode),
	  src/fullscreen.c (set_blank_timeout): Changed gconf_client_get
	  to z_gconf_get.
	* src/zmisc.c, src/zmisc.h: Added helper functions to get and set
	  gconf keys with error reporting and warning about unset keys,
	  also used internally.
	* src/zmisc.c, src/zmisc.h: New add_notify helpers with error
	  reporting and initial get, and helpers to automatically update
	  gconf-based variables in time critical path.
	* src/zmisc.c, src/zmisc.h (z_menu_shell_chop_off): Helper for
	  dynamic menu updates.
	* plugins/teletext/main.c (preferences_action): Don't localize
	  property names, the property routines won't find them.

2004-10-13    <mschimek@users.sf.net>

	* src/zmisc.c (z_gconf_combo_box_new, z_gconf_get_string_enum):
	  Handle NULL GError* from gconf_client_get_string().

2004-10-11    <mschimek@users.sf.net>

	* configure.in: Make sure we check for libzvbi with -liconv
	  if necessary, bug #1044403.

2004-10-11    <mschimek@users.sf.net>
	
	* Release 0.7.3.

2004-10-10    <mschimek@users.sf.net>

	* help/C/commands.xml: Updated switch_mode, toggle_mode.
	* src/cmd.c (py_switch_mode, py_toggle_mode): Extended to switch
	  display mode and capture mode at once.

2004-10-09    <mschimek@users.sf.net>

	* src/audio.c (set_mute): OSD related crash fix by Sjoerd Simons.
	* Makefile.am (install-data-local): VPATH fix.
	* src/zvbi.c, src/zmisc.c, src/subtitle.h, src/subtitle.c,
	  src/main.c, src/globals.c, src/fullscreen.c,
	  plugins/Makefile.am (teletext subdir), src/globals.h: 
	  Didn't compile without libzvbi.
	* src/cmd.c (py_toggle_mode): Toggled wrong pair of the 3x3 modes.
	* plugins/teletext/window.c (create_main_menu),
	  src/fullscreen.c (start_fullscreen),
	  src/zapping.c (instance_init): Menu accelerators didn't work.

2004-10-08    <mschimek@users.sf.net>

	* help/C/zapzilla.xml, help/C/zapping.xml, help/C/settings.xml,
	  help/C/commands.xml: Syntax fixes.
	* zapping.desktop.in, po: Merged comment into name, not like
	  everyone knows what zapping means. 
	* Makefile.am (install-data-local): s/gconftool/gconftool-2.
	* plugins/alirc/alirc.c (legacy_zoom): Better to use py_toggle_mode.
	* src/cmd.c (py_switch_mode), src/fullscreen.c (stop_fullscreen),
	  src/zmisc.c (to_old_tveng_capture_mode), src/zapping.h:
	  DISPLAY_MODE_NONE considered harmful, made WINDOW the
	  default and fallback.

2004-10-04    <mschimek@users.sf.net>

	* Release 0.7.2.

2004-10-03    <mschimek@users.sf.net>

	* po/POTFILES.in: Added src/subtitle.c.
	* plugins/teletext/view.c (teletext_view_popup_menu_new):
	  Fixed context > teletext > save as / colors.
	* src/capture.c (capture_thread): Abort retry on thread join.
	(capture_stop): Force thread join when capture thread hangs.
	* help/C/zapping.xml, help/C/settings.xml, help/C/commands.xml: 
	  Updated to reflect bktr support, new window, fullscreen and
	  background modes and the Teletext switch to a plugin.
	* zapping_setup_fb/Makefile.am: Installed zapping_fix_overlay
	  on BSD although not needed, fixed in toplevel Makefile.am
	  by excluding zapping_setup_fb subdir from compilation.
	* src/tvengbktr.c: Compile fixes.
	* src/tveng1.c, src/tveng2.c, src/tveng25.c, src/tveng.c,
	  src/tvengbktr.c, src/tvengxv.c: Always compare and set fds
	  to -1 instead of 0.
	* libtv/callback.c, libtv/callback.h, libtv/misc.c: Added, moving
	  tveng.c routines here.
	* src/tveng.h, src/tveng.c: Extended and moved callback routines
	  to libtv.
	* src/fullscreen.c (start_fullscreen), src/zmisc.c (start_teletext): 
	  In Teletext mode put video device into VBI-bypass mode (bktr bug).
	* src/cmd.c (py_quit): Must destroy zapping object before we quit,
	  to save config.
	* plugins/teletext/main.c: Added missing py_ttx_color().
	(cancel_preferences): Fixed params.
	* libtv/misc.h, libtv/misc.c: Moved strlcpy, strndup, asprintf
	  replacement functions here from tveng.c.
	* libtv/Makefile.am (libtv_a_SOURCES): Added callback.c/h, misc.c.
	* Makefile.am: Don't compile zapping_setup_fb subdir on BSD.

2004-09-26    <mschimek@users.sf.net>

	* po: Updated from Gnome compendium.
	* src/zvideo.c (size_allocate): Option to disable size magic for
	  fullscreen.
	* src/zmisc.c: Rewrote mode switch functions to support fullscreen
	  capture mode and teletext.
	* src/fullscreen.c: Rewrote to support capture mode and
	  teletext. Keys and mouse button functions as in main window.
	* src/cmd.c (py_switch_mode, py_toggle_mode): Rewrote to switch
	  between window/full and capture/overlay/teletext separately.
	* src/capture.h, src/capture.c: Determine capture size from
	  arbitrary window instead of zapping->video, for fullscreen. 
	* src/zapping.c, plugins/teletext/window.c, src/zvideo.c,
	  plugins/teletext/view.c: Replaced signals by overriding widget
	  class functions.
	* src/x11stuff.h, src/x11stuff.c: Added keep-window-below function
	  for background display mode.
	* src/zapping.c: Added window and background action and menu
	  entries complementing fullscreen.
	* pixmaps/Makefile.am (PIXMAPS): Added teletext48.png for Teletext
	  plugin prefs.
	* pixmaps/teletext48.png: Larger version of teletext.png for
	  preferences.
	* glade/zapping.glade2: Removed Teletext preferences, now
	  implemented in Teletext plugin.
	* src/fullscreen.c (start_fullscreen),
	  src/zmisc.c (zmisc_switch_mode), zapping.schemas: Made blank
	  cursor timeout variable.
	* src/zapping.c: Added scroll_event mouse wheel support, untested. 

2004-09-22    <mschimek@users.sf.net>

	* src/zvbi.c: Switched to GConf for Teletext region, level and
	  interpolation. Eliminated some duplicate code. No more rendering of
	  flash-off image if the page has no flashing chars to speed things
	  up. 
	(find_subtitle_page): Moved to subtitle.c.
	* src/zmisc.c, src/zmisc.h (z_overwrite_file): New helper function
	  asking user whether to overwrite existing file.
	(z_toggle_action_connect_gconf_key): New helper function connecting
	  GtkToggleAction with GConf bool key, improved.
	(z_gconf_combo_box_new): New helper function creating GtkComboBox
	  menu with GConf string key connection.
	(z_gconf_get_string_enum): New helper function looking up GConf
	  string in menu table.
	(z_action_set_sensitive, z_action_set_visible): Replacement for 2.6
	  GtkAction functions.
	* src/zapping.c: Include fixes. s/show/view_menu and toolbar for
	  clarity, s/Show //Menu and Toolbar in menu name which is Gnome
	  standard. Public create_popup for Teletext in main window context
	  menu. Enable proper i18n. Public video widget box for Teletext.
	* src/video_xv.c (image_put), src/video_x11.c (image_put),
	  src/video_gdkrgb.c (image_put): With gtk 2.4 for some reasons
	  images do not display continuously. XFlush seems to fix this.
	* src/ttxview.c, src/ttxview.h: Removed. Teletext code moved to
	  plugin, split into several files and GObject-ified. Switched to
	  GtkAction, GConf, made a few improvements. Subtitle menu code
	  moved to src/subtitle.c/h, is not Teletext specific.
	* src/properties.h, src/properties.c (standard_properties_add):
	  Extended to create prefs page on the fly for Teletext plugin.
	* src/properties-handler.c (vbi_general_setup, vbi_general_apply):
	  Moved Teletext preferences to plugin, switched to gconf.
	* src/zvbi.c, src/zmisc.c, src/properties-handler.c, src/main.c:
	  Changes after moving teletext code from ttxview.c to plugin.  
	* src/properties-handler.c (style_menu_item_activated,
	  global_menu_item_activated, create_toolbar_style_menu): Use
	  default gconf_client. 
	* src/plugins.c, src/plugins.h: Simplify plugin symbol access.
	* src/zmisc.c, src/properties.c, src/plugin_properties.c,
	  src/main.c: Replaced 2.6 GtkAction calls.
	* src/globals.c, src/globals.h: Added preliminary teletext plugin
	  interface.
	* src/Makefile.am (zapping_SOURCES): Added subtitle.c/h, removed
	  ttxview.c/h. 
	* po/POTFILES.in: Added teletext plugin files.
	* plugins/Makefile.am: Added teletext.
	* configure.in: Require gtk >= 2.4. Added plugins/teletext/Makefile.
	* zapping.schemas: Added.
	* Makefile.am: Added rules to install zapping.schemas.
	* configure.in (AM_GCONF_SOURCE_2): Added to install schemas. 

2004-09-20    <mschimek@users.sf.net>

	* src/zvbi.c (vbi_gui_sensitive): Use GtkActionGroup visibility
	  change instead of hiding widgets manually.
	* src/zapping.h, src/zapping.c, src/v4linterface.c (update_bundle):
	  Rebuild channel menu code moved to src/zapping.c.
	* src/zapping.c, src/main.c: Initial hiding of menu and toolbar
	  now properly implemented in src/zapping.c. shutdown_zapping()
	  call moved to src/zapping.c finalization for dependency reasons. 
	* src/zapping.h, src/zapping.c, src/interface.h, src/interface.c:
	  Moved Zapping widget creation routines to src/zapping.c, switched
	  from GnomeUI to GtkActions.
	* src/zapping.c, src/main.c, src/globals.h, src/globals.c: 
	  Removed obsolete display_preview flag, replaced by disable_overlay
	  where necessary. Added gconf_client for zapping show
	  options. hide_controls and keep_on_top zconf options moved into
	  gconf.
	* src/overlay.h, src/overlay.c (start_overlay, stop_overlay),
	  src/fullscreen.h, src/fullscreen.c (start_fullscreen,
	  stop_fullscreen): Implicit parameters. 
	* src/zapping.c, src/cmd.c: Moved py_hide_controls(),
	  py_keep_on_top() to src/zapping.c.
	* src/zmisc.c, src/zapping.h, src/zapping.c,
	  src/properties-handler.c (video_apply), src/main.c, src/capture.c,
	  plugins/screenshot/screenshot.c, plugins/mpeg/mpeg.c: 
	  Replaced widget registration/lookup by simple pointers in
	  zapping object.
	* src/zmisc.h, src/zmisc.c: Added helper connecting a
	  GtkToggleAction and gconf bool.
	* src/ttxview.h, src/ttxview.c (ttxview_hotlist_menu_append):
	  Changed to _insert due to new action based menus creation.
	* src/zmisc.c, src/zapping.h, src/zapping.c, src/properties.c,
	  src/plugin_properties.c, src/main.c, src/audio.c (set_mute):
	  Switched to action based menus and toolbar.
	  NOTE Zapping now requires Gtk+ 2.4.
	* po/sv.po, po/nl.po, po/it.po, po/fr.po, po/es.po, po/de.po: 
	  Updated from Gnome compendium (former libgnomeui strings).
	* po/POTFILES.in: Added src/zapping.c.

2004-09-16    <mschimek@users.sf.net>

	* src/tveng25.c: Cleaned up overlay and capture format code. Added
	  function to quickly determine supported pixfmts.   
	(p_tveng25_dqbuf, tveng25_read_frame): Did not handle EAGAIN.
	(tveng25_attach_device): Cleaned up, no more set default capture
	  format, just get current overlay and capture format which has no
	  side effects. Skip ioctls if unsupported.
	* src/tveng.c (tv_get_overlay_buffer), src/tveng.h, src/tveng1.c,
	  src/tveng2.c, src/tveng25.c, src/tveng_private.h, src/tvengbktr.c:
	  Removed unnecessary target parameter.
	* src/tveng.c, src/capture.c, src/tveng.h, src/tveng1.c,
	  src/tveng2.c, src/tveng25.c, src/tvengbktr.c, src/tvengemu.c,
	  plugins/mpeg/mpeg.c:
	  s/info->format/info->capture_format for clarity. 
	* src/x11stuff.c: Disable/enable KScreensaver (untested).

2004-09-13    <mschimek@users.sf.net>

	* Release 0.7.1.

2004-09-13    <mschimek@users.sf.net>

	* src/x11stuff.c (x11_vidmode_switch): No-Vidmode fix.
	* src/zmisc.c (zmisc_switch_mode): Fixed previous_mode.
	* help/C/zapping.xml: Version number update.
	* src/fullscreen.c: Vidmode fixes.
	* src/zmisc.c (zmisc_switch_mode): Teletext tool button fix.
	* libtv/screen.c: Made sure screens have a pixfmt without DGA.
	(dga_query): If possible try to determine screen pixfmt from
	  XDGAModes, don't guess bpp 16, more sanity checks. No-DGA fix.

2004-09-11    <mschimek@users.sf.net>

	* src/main.c (main), libtv/screen.c (dga_query),
	  zapping_setup_fb/zapping_setup_fb.c (main): Accept only
	  --bpp 24 or 32.

2004-09-09    <mschimek@users.sf.net>

	* src/interface.c (create_zapping): Create a Zapping instance
	  instead of GnomeApp for modularity.
	* zapping_setup_fb/zapping_setup_fb.h: Rewrote using Xinerama
	  aware libtv routines.
	* zapping_setup_fb/zapping_setup_fb.c: Rewrote using Xinerama
	  aware libtv routines. Added new --screen option to select the
	  exact physical screen in Xinerama configuration.
	* zapping_setup_fb/v4l25.c, zapping_setup_fb/v4l2.c,
	  zapping_setup_fb/v4l.c: Switched from old x11_dga_parameters
	  to tv_overlay_buffer.
	* zapping_setup_fb/dga.c: Replaced by Xinerama aware libtv routines.
	* zapping_setup_fb/Makefile.am: Removed dga.c, added internal
	  libtv dependency.
	* src/zmisc.h: Added CONST_PARENT and _unused_ attribute.
	  Added some useful constants to improve code documentation.
	(z_set_overlay_buffer): New helper to set overlay buffer from
	  display and screen number (Xinerama).
	* src/zmisc.c: Added functions to translate obsolete
	  tveng_capture_mode which is still used in zapping conf.
	(zmisc_switch_mode): Cleaned up overlay and fullscreen code.
	(z_set_overlay_buffer): New helper to set overlay buffer from
	  display and screen number (Xinerama).
	* src/zconf.h, src/zconf.c: Replaced zc/zconf _integer functions by
	  _int and _uint for proper type checks.
	* src/x11_stuff.h, src/x11_stuff.c: Added functions to ask WM for
	  fullscreen display of window. Rewrote x11_vidmode routines to
	  consider display and physical screen number, size and position
	  for proper Xinerama support. DGA routines merged with new
	  Xinerama routines and moved to libtv for zapping_setup_fb.
	(x11_window_clip_vector): Used to create clips outside overlay
	  rectangle when it did not align with containing window, fixed.
	* src/tvengxv.c	(p_tvengxv_open_device): Use given window, i.e.
	  physical screen, to query adaptors. Removed unused overlay_window
	  functions.
	* src/tveng1.c, src/tveng2.c, src/tveng25.c (set_overlay_window):
	  Function now takes a clip_vector parameter, puts window relative
	  to overlay_buffer origin (Xinerama), cleaned up.
	* src/tvengbktr.c (set_clips): Function now takes a clip_vector
	  parameter, puts window relative to overlay_buffer
	  origin (Xinerama). Cleaned up and simplified things after
	  moving clip checks to tveng.c.
	* src/tveng.h: Moved tv_bool, tv_pixfmt, tv_image_format,
	  tv_overlay_buffer to libtv for zapping_setup_fb. Moved
	  tv_clip_vector to libtv. X window pointers in tv_window
	  no longer used, removed.
	* src/tveng.c: Public functions clear the error string on entry.
	  In overlay mode, do not expect the driver can handle an
	  invisible overlay window. Moved tv_pixfmt routines to libtv
	  for zapping_setup_fb.
	(p_tveng_set_preview): dga_param is gone, now the overlay buffer
	 must be any one of the physical screens (Xinerama).
	(p_tveng_set_preview_window): Check that clips stay within
	  overlay buffer and window bounds. Check that clips are valid
	  and in proper order.
	(tv_set_overlay_buffer): Added display_name and screen_number
	  parameters so we can tell zapping_setup_fb the exact physical
	  screen (Xinerama).
	(tveng_device_attach): Added window parameter to
	  open only Xv drivers which can put video onto that physical
	  screen. 
	* src/remote.h, src/remote.c: Added PyArg_ParseTuple wrapper
	  with proper const args.
	* src/main.c (main): Query and report physical X screens (Xinerama).
	* src/globals.h, src/globals.c: Added list of physical X
	  screens (Xinerama).
	* src/overlay.c: Rewrote for Xinerama (choose the right
	  physical screen initially and on window motion, clean only
	  the ps we DMA'ed, open right Xv driver).
	* src/fullscreen.c: Rewrote for Xinerama (choose the right
	  physical screen, use ps vidmodes instead of virtual screen,
	  limit black window size to ps size, open right Xv driver).
	  Use NET_WM_STATE_FULLSCREEN, since the old hack does not work
	  with Gtk 2.6 anymore and most WMs should support this now.
	* src/Makefile.am: Added internal libtv dependency. Added
	  Xinerama to LDADD.
	  (zapping_SOURCES): Added zapping.c, zapping.h.
	* src/zmisc.h, src/zmisc.c, src/properties.c, src/main.c, 
	  src/interface.c, src/globals.h, src/globals.c, src/cmd.c,
	  src/capture.c, src/audio.c, plugins/screenshot/screenshot.c:
	  Replaced GtkWiget* main_window by Zapping GObject.
	* plugins/mpeg/mpeg.c: Removed lots of unused local vars.
	* src/zmisc.c, src/tveng_private.h, src/tveng.h, src/tveng.c,
	  src/overlay.c, src/main.c, src/globals.h, src/globals.c,
	  src/fullscreen.c, src/cmd.c, src/channel_editor.c,
	  src/capture.c, src/audio.c, plugins/mpeg/mpeg.c,
	  plugins/alirc/alirc.c: Split tveng_capture_mode into display
	  and capture mode for future fullscreen capture and Teletext.
	* pixmaps/Makefile.am: Depend on self, fix type of
	  gdk_pixbuf_csource output.
	* common/videodev2.h: Removed LINUX_VERSION_CODE warning, this
	  symbol may be undefined.
	* configure.in: Changed to use automake 1.7. Removed compile
	  warning flags, users must set CFLAGS themselves now. Added
	  libtv/Makefile output. Added endian check for libtv/pixel_format.c.
	* autogen.sh: Require automake 1.7 or compatible, updated Plan B.
	* Makefile.am (SUBDIRS): Added libtv.
	* src/zvideo.c, src/zvbi.c, src/zmisc.c, src/zimage.h, src/zimage.c,
	  src/zconf.h, src/zconf.c, src/yuv2rgb.c, src/xawtv.c,
	  src/x11stuff.h, src/x11stuff.c, src/video_xv.c, src/video_x11.c,
	  src/video_mem.c, src/video_gdkrgb.c, src/vdr.c,
	  src/v4linterface.h, src/v4linterface.c, src/tvengxv.c,
	  src/tvengemu.c, src/tveng_private.h, src/tveng25.c, src/tveng2.c,
	  src/tveng1.h, src/tveng1.c, src/tveng.h, src/tveng.c,
	  src/ttxview.c, src/remote.c, src/properties.c,
	  src/properties-handler.h, src/properties-handler.c,
	  src/plugin_properties.c, src/plugin_common.h, src/overlay.c,
	  src/oss.c, src/osd.c, src/mixer.c, src/main.c, src/keysyms.h,
	  src/keyboard.c, src/interface.c, src/fullscreen.c,
	  src/frequencies.h, src/frequencies.c, src/esd.c, src/csconvert.h
	  src/csconvert.c, src/cmd.c, src/channel_editor.c, src/capture.c,
	  src/audio.h, src/audio.c, src/arts.c,
	  plugins/screenshot/screenshot.h, plugins/screenshot/screenshot.c,
	  plugins/screenshot/deint.c, plugins/screenshot/b_ppm.c,
	  plugins/screenshot/b_jpeg.c, plugins/mpeg/options.c,
	  plugins/mpeg/mpeg.c, plugins/alirc/alirc.c, common/fifo.h,
	  common/fifo.c, common/device.c, common/alloc.h:
	  Const, signedness, unused function parameters, void
	  pointer arithmetic fixes.
	* src/zapping.c, src/zapping.h: Added to modularize things more
	  in the future.
	* libtv: Added for zapping_setup_fb.
	* libtv/clip_vector.c, libtv/clip_vector.h, libtv/image_format.c,
	  libtv/image_format.h, libtv/overlay_buffer.h,
	  libtv/pixel_format.c, libtv/pixel_format.h: Moved here from
	  src/tveng.c, src/tveng.h.
	* libtv/clip_vector.c (tv_clip_vector_copy): Fixed too small realloc.
	* libtv/screen.c, libtv/screen.h: Merged DGA and Xinerama routines,
	  moved here from src/x11_stuff.c, src/x11_stuff.h.
	* libtv/macros.h, libtv/misc.h: Cloned from zvbi-0.3.
	
2004-08-13  <mschimek@users.sf.net>

	* src/ttxview.c (ttxview_detach, ttxview_attach): Create second
	  toolbar in Teletext mode.
	* src/zvideo.c (z_video_new): Fixed double instantiation.

2004-08-11  <mschimek@users.sf.net>

	* plugins/alirc/alirc.c (legacy_command_txl_table): Fixed
	  invalid volume_incr command (bug #1005111).
	* src/osd.c (ttx_position, cc_position): Corrected subtitle
	  position in fullscreen mode.
	* tvengbktr.c (set_clips): Don't scale clip coordinates when we
	  capture only one field.
	* tveng.c, tveng.h, tveng1.c,tveng2.c,tveng25.c, tvengbktr.c,
	  zmisc.c: Added TVENG_ATTACH_VBI mode to prepare driver for VBI
	  capturing only. Required by the bktr driver which cannot capture
	  VBI without video, otherwise like TVENG_ATTACH_CONTROL.
	* zapping_setup_fb/Makefile.am (install-binPROGRAMS): Need not
	  install when we use the bktr driver.
	* src/yuv2rgb.c (mmx_register_converters),
	  src/csconvert.h, src/csconvert.c (register_converter,
	  register_converters):
	  Added converter name parameter for debugging.
	* src/xawtv.c (property_get_string): Don't use gdk 2.4 X Atom
	  functions, must work with 2.0.
	* src/video_xv.c (image_new): Fixed mem leak.
	  (image_new): Await X server confirmation before marking shared
	  segment for removal (FreeBSD).
	  (suggest_format): Broken by design, disabled.
	  (traverse_ports): Add support for RGB formats. Required by bktr
	  driver.
	* src/video_mem.c (planar_image_new): Handle YUV formats besides 420.
	* src/vdr.c (vdr_open): Properly close vdr_sock on connect failure.
	* src/v4linterface.h, src/v4linterface.c (z_switch_audio_input):
	  Added audio input menu builder and z_switch_audio_input functions
	  for bktr.
	  (z_switch_standard): Restart VBI capturing after standard change.
	  s/strncpy/g_strlcpy.
	* src/tvengbktr.c (set_video_standard): Did not store current
	  standard, fixed p_tveng_stop_everything call.
	  (set_tuner_frequency): Undo forced mute after frequency change.
	  (set_video_input): Undo forced mute after frequency change,
	  fixed p_tveng_stop_everything call.
	  (get_signal_strength): Finished for automatic channel scan.
	* src/tveng25.c, src/tveng2.c, src/tveng1.c, src/tvengemu.c,
	  src/tveng_private.h: Cleaned up preview window interface.
	* src/tvengbktr.c: Added capture and overlay routines, audio
	  input support because automatic selection by video input
	  doesn't seem to work. Rewrote controls code and added mute control.
	* src/tveng_private.h: Added driver audio input interface for bktr.
	* src/tvengemu.c: Removed redundant get/set_capture_size().
	* src/tveng25.c: Replaced audio mode control hack by tveng audio mode
	  interface. Use audio mode control helper functions in tveng.c. Use
	  V4L audio ioctl to work around bttv bug. Removed
	  redundant get/set_capture_size().
	* src/tveng2.c: Removed get/set capture_size().
	* src/tveng1.c: Replaced audio mode control hack by tveng audio mode
	  interface, moved control building function to tveng.c. Removed
	  redundant get/set_capture_size().
	* src/tveng.h: Changed tv_audio_capability enum to flag set.
	  Changed tv_clip width, height to x2, y2.
	* src/tveng.c, src/tveng_private.h (_tv_strlcpy): Added, with
	  strlcpy() fallback if available.
	  (_tv_strndup): Use strndup() if available.
	  (_tv_asprintf): Use asprintf() if available.
	  (append_audio_mode_control, set_audio_mode_control): New helper
	  function to build and set an audio mode (mono stereo etc) control,
	  preliminary wrapper for tv_set_audio_mode.
	* src/tveng.c (tveng_device_info_destroy): Did not destroy audio
	  mode callback.
	  (tveng_attach_device): Mask out bktr YUV formats, conflict with
	  VBI capturing. Replaced GNU asprintf by _tv_asprintf.
	  (tv_get_audio_input, tv_set_audio_input, tv_set_audio_mode):
	  Implemented now.
	  (tv_pixel_format_to_pixfmt): Expect more unusual input, required
	  for bktr.
	  (tveng_copy_frame): Handle planar YUV formats besides 420.
	  (tv_clip_vector_equal): Handle comparison of same.
	  (tv_clip_vector_copy): Handle self assignment.
	  (tv_clip_vector_add_clip_xy): Changed tv_clip width, height to
	  x2, y2. Fixed band order bug.
	  (_tv_image_format_dump): Added.
	  Replaced redundant get/set_capture_size by calls to driver
	  capture format functions.
	* src/remote.c (python_command_printf): Replaced GNU vasprintf
	  by glib/g_strdup_vprintf().
	* src/plugins.c (plugin_load_plugins_in_dir): Replaced GNU scandir
	  by glib/g_dir functions.
	* src/overlay.c: Changed tv_clip width, height to x2, y2. 
	* src/oss.c (open_pcm): SOUND_MASK_PHONEIN not defined on Solaris.
	* src/main.c (restore_controls): Restore current audio input.
	  (restore_controls): Expect invalid current channel (NULL).
	  (main, startup_zapping): Use different default / fallback devices
	  on FreeBSD.
	* src/vdr.c, src/keyboard.c, src/interface.c, src/cmd.c:
	  Moved include remote.h to properly compile on Solaris.
	* src/capture.c (scan_device): Take shortcut if set of supported
	  pixel formats is const.
	  (request_capture_format_real): Fixed conversion check.
	* src/Makefile.am (zapping_LDADD): Missing -lX11.
	* plugins/mpeg/options.c (grte_options_load): Skip special options
	  to keep defaults.
	* plugins/mpeg/mpeg.c (plugin_load_config): s/strndup/g_strndup.
	* common/structpr_gen.pl: Handle ioctls with plain type parameters.
	* common/device.h, common/device.c: Added mmap, munmap wrappers.
	* common/Makefile.am (_videodev25.h): RW fixes.
	  (_bktr.h): Added hints.
	* configure.in: strlcpy() check. Bktr driver needs no
	  zapping_setup_fb and PAM. Don't compile with librte on FreeBSD,
	  doesn't work right. s/DATADIRNAME/datadir, is a gettextism.

2004-07-09    <mschimek@users.sf.net>

	* Release 0.7. 

2004-07-02    <mschimek@users.sf.net>

	* src/video_xv.c (add_backend_xv): Corrected nv overlay adaptor
	  name.

2004-06-16    <mschimek@users.sf.net>

	* src/zvbi.c (capturing_thread): Log status and errors,
	  retry on EIO.
	* src/tveng25.c (p_tveng25_dqbuf): Restart streaming on
	  VIDIOC_DQBUF error.
	  (tveng25_start_capturing): Didn't properly clear v4l2_buffer.
	  (tveng25_read_frame): Don't discard stale frames, needs
	  a more robust solution.
	* autogen.sh, acinclude.m4: Copied parts from gnome-common
	  to eliminate a Gnome CVS dependency on distros without
	  gnome-common package.

2004-06-05    <mschimek@users.sf.net>

	* src/fullscreen.c (start_fullscreen): Fixed fullscreen w/xv OSD
	  positioning.
	* src/capture.c: size and fmt lock may deadlock, reduced to single
	  lock.
	  (capture_thread): Must not hold lock why busy looping.

2004-05-29    <mschimek@users.sf.net>

	* src/v4linterface.c: Reversed default title format,
	  channel name first, for better panel view.

2004-05-26    <mschimek@users.sf.net>

	* configure.in: Version 0.7cvs8.
	* common/Makefile.am: README no longer needed.

2004-05-23    <mschimek@users.sf.net>

	* src/xawtv.c (xawtv_import_config): Channel names can contain
	  all sorts of funny characters GScanner cannot easily handle,
	  rewrote the parser.
	* src/fullscreen.c (start_fullscreen): Keys didn't work if the main
	  window didn't have focus when starting fullscreen.
	* src/main.c (main): Startup sequence was backwards, we cannot
	  restore overlay mode before the window is mapped.

2004-05-22    <mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c (do_start): Corrected YUV/YVU pixfmt retries.

2004-05-21    <mschimek@users.sf.net>

	* src/frequencies.c (loose_strcmp): Infinite loop. Holy crap I
	  still cannot write ten lines without a bug.

2004-05-19    <mschimek@users.sf.net>

	* src/xawtv.c, src/tvengbktr.c, Makefile.am (Multimedia_DATA):
	  FreeBSD fixes.

2004-05-18    <mschimek@users.sf.net>

	* src/frequencies.c: Extended tveng_tuned_channel_by_(rf_)name
	  to match loosely for xawtv setstation.
	* src/xawtv.c: Accept setstation command from nxtvepg.

2004-05-17    <mschimek@users.sf.net>

	* src/channel_editor.c (on_channel_search_clicked): Make sure
	  we're in capture mode.
	* src/osd.c, src/osd.h, src/xawtv.c: Accept vtx, message
	  XAWTV_REMOTE commands from nxtvepg.

2004-05-15    <mschimek@users.sf.net>

	* src/Makefile.am, src/zremote.c: New experimental zremote tool.
	* src/tveng1.c: Must not include linux/kernel.k, fs.h.
	* src/eggcellrendererkeys.c (egg_cell_renderer_keys_get_accelerator):
	  GCC 3.4 warnings.
	* src/xawtv.c, src/xawtv.h,
	  src/v4linterface.c (z_switch_channel), src/main.c (main):
	  Added Xawtv compatible IPC.

2004-05-14    <mschimek@users.sf.net>

	* src/tveng.h, src/tveng.c (tv_clip_vector_add_clip_xy):
	  Fix after gcc warning about MIN() on bitfield.

2004-04-21    <mschimek@users.sf.net>

	* po/sv.po, po/pl.po, po/nl.po, po/it.po, po/fr.po, po/es.po,
	  po/de.po, glade/zapping.glade2, src/audio.c (startup_audio,
	  general_audio_setup, general_audio_apply), src/v4linterface.c
	  (z_switch_channel), src/zmisc.c (zmisc_switch_mode): Restored
	  mute on channel change option.

2004-04-19    <mschimek@users.sf.net>

	* common/Makefile.am: Updated structpr hints. Removed obsolete
	  unicode helper files.
	* common/device.c, common/device.h, common/structpr_gen.pl:
	  Added R/W hints, union selector.
	* common/videodev25.h: Updated.
	* src/oss.c: common/structpr interface changed.
	* src/overlay.c: Limit window size to 768, preliminary.
	* src/remote.h: Python.h 2.3 redefines _POSIX_C_SOURCE.
	* src/tveng25.c: bttv 0.9.12+ returns EINVAL on improper
	  v4l2_buffer init.
	* src/tveng25.c: bttv 0.9.12 returns bpl = width * depth.
	* src/v4linterface.c: Compile error without libzvbi.

2004-02-11    <pinotree@users.sf.net>

	* po/it.po: Updated by Pino Toscano.

2004-01-06    <mschimek@users.sf.net>

	* src/zvbi.c: Fixed browser setting hint. Again.
	* src/tveng25.c: Reset cropping source as mandated by spec.
	* plugins/lirc/lirc.c, src/properties.c, src/properties.h:
	  Translated strings used to create property structs
	  where we use them as keys.
	* src/capture.c (request_capture_format_real): Expect
	  tveng_set_capture_format() changes image size.

2004-01-02    <pinotree@users.sf.net>

	* po/it.po: Updated by Pino Toscano.

2003-12-31    <mschimek@users.sf.net>

	* src/tveng25.c (set_standard), src/tveng2.c (set_standard):
	  Shortcut if requested standard same as current, saves a
	  stop_everything cycle.
	* src/tvengxv.c, src/tvengemu.c,
	  src/tveng1.c, src/tveng2.c, src/tveng25.c, src/tveng.c,
	  p_tveng_stop_everything must be reentrant, not use static
	  overlay_was_active.
	* src/properties.h, src/properties.c (append_properties_group),
	  plugins/lirc/lirc.c (custom_properties_add):
	  append_properties_group stored translated string in config.
	* glade/zapping.glade2: Restored show-toolbar-as option.
	* po: Updated from 0.6 & gnome for show-toolbar-as option.
	* src/properties-handler.c: Restored show-toolbar-as option.
	* configure.in: PKG_CHECK_MODULES for gconf-2.0.
	* plugins/screenshot/screenshot.c: Auto filename didn't work right.
	
2003-12-25    <mschimek@users.sf.net>

	* src/plugin_common.h (PLUGIN_PROTOCOL): Changed to 0x700,
	  just in case.
	* src/v4linterface.c: Enable numeric keypad channel entering
	  without libzvbi.
	* src/zvbi.h, src/zvbi.c, src/main.c: Enable py_closed_caption
	  with or without libzvbi.

2003-12-17    <mschimek@users.sf.net>

	* src/vdr.c (vdr_open): Error messages only with -d option.

2003-12-16    <mschimek@users.sf.net>

	* help/man/zapping.xml, help/man/zapping_setup_fb.xml: Added.
	* acinclude.m4: Added XML catalog check macros from gtk-doc.
	* configure.in: Check for prereqs to rebuild man pages.
	* help/man/Makefile.am: Modified to build man pages from
	  DocBook sources.

	* src/audio.c (set_mute), po/da.po, po/de.po, po/es.po, po/fr.po,
	  po/it.po, po/nl.po, po/pl.po, po/sv.po: Correction of OSD markup.
	* src/main.c: Startup/shutdown vdr module.
	* src/Makefile.am: Added vdr.c, vdr.h.
	* src/vdr.c, src/vdr.h: Added. Contributed by Slobodan Tomic.
	  Modified for new Python based commands.
	* src/ttxview.c: Restored search dialog help. 
	* src/properties.h, src/properties.c: Modified to open
	  help file on help button click.
	* src/channel_editor.c: Added help button. 
	* plugins/screenshot/screenshot.c (properties_add): Replaced help
	  box by ghelp link.
	* src/properties-handler.c, src/osd.c, src/keyboard.c,
	  src/audio.c, plugins/mpeg/mpeg.c: Linked each prefs page to
	  the appropriate help file section.

2003-12-15    <mschimek@users.sf.net>

	* help/C/figures: Added.
	* help/C: Rewrote help docs Gnome2 style.
	* help/de: Removed.

2003-12-11    <mschimek@users.sf.net>

	* plugins/alirc/README.alirc: Moved user instructions into
	  on-line help.
	* README.commands: Moved contents into on-line help,
	  file no longer needed.

2003-12-06    <mschimek@users.sf.net>

	* po/fr.po: Updated by Christian Marillat.
	* po/it.po: Updated by Pino Toscano.
	* po/nl.po: Updated by Guus Bonnema.
	
2003-12-04    <mschimek@users.sf.net>

	* po/sv.po: Updated by Henrik Isacsson.

2003-12-04	<garetxe@users.sf.net>

	* it.po, es.po: Updated.
	* src/zvbi.c (acknowledge_trigger): Display proper location of
	web browser setting in GNOME Preferences (Pino).

2003-12-03    <mschimek@users.sf.net>

	* configure.in: Work with automake 1.4, 1.5, 1.6, 1.7.
	* plugins/template/Makefile.am, plugins/screenshot/Makefile.am,
	  plugins/parrot/Makefile.am, plugins/mpeg/Makefile.am,
	  plugins/lirc/Makefile.am, plugins/alirc/Makefile.am:
	  Don't set CFLAGS.
	* src/ttxview.c (search_dialog_continue): Restart search on
	  regexp or casefold option change.
	* src/zvideo.c (blank_cursor_timeout): Pointer wasn't unblanked
	  on motion in overlay mode.

2003-12-01    <mschimek@users.sf.net>

	* src/zmisc.c (z_status_print): Merged z_status_print_markup()
	  in and added hide/clean option.
	* src/audio.c (set_mute): Bad OSD markup.
	* src/osd.c (render_console): Assumed console uses UTF-8.
	  (osd_render_markup): Use no markup (i.e. funky colors)
	  in status bar, clean but hide after timeout.

2003-11-29    <mschimek@users.sf.net>

	* Merged zapping-gnome2 branch back into cvs main trunk.

2003-11-28    <mschimek@users.sf.net>

	* zapping_setup_fb/zapping_setup_fb.c (drop_root_privileges): 
	  Cannot distiguish between root and consolehelper, warning
	  removed.
	* src/properties-handler.c (video_setup, video_apply): Fullscreen
	  vidmode option only when xf86vmode available.
	  (vbi_general_setup): VBI options only when libzvbi available.
	* src/zmisc.c (zmisc_stop), src/v4linterface.c (z_switch_channel):
	  Compile only if libzvbi present.
	  (z_on_electric_filename): Uninitialized pointer deref.
	* src/x11stuff.c: Compile warning fixes.
	* src/tvengxv.c (p_tvengxv_open_device): Uninitialized value.
	* src/tveng.c (set_control_audio): Compile warning fix.
	  (tveng_attach_device): Use emulator backend if device name
	  is 'emulator'.
	* src/tvengemu.c: Removed TVENGEMU_ENABLE.
	* src/ttxview.c (get_ttxview_page), src/osd.c (osd_clear):
	  Uninitialized pointer deref (might be called from
	  py_closed_caption() before main_window was created).

2003-11-27    <mschimek@users.sf.net>

	* src/zvbi.h: Define vbi_pgno, vbi_gui_sensitive() when
	  libzvbi not present.
	* src/tveng2.c (update_video_input_list): Uninitialized value.
	* src/tveng.c (tveng_get_control_by_name): Uninitialized pointer
	  deref.
	* src/properties-handler.c (video_setup, video_apply),
	  src/main.c (main): Xv options only when XVideo available.

	* src/tveng.c (tv_set_overlay_buffer): Try zapping_setup_fb in PATH
	  first, installed exe might lack suid root.
	* src/zvbi.c (vbi_gui_sensitive): Remove menu item subtitles
	  when vbi is disabled.
	  (decoding_thread): Didn't properly handle i/o errors, causing
	  chance segv's in vbi_decode().
	* src/interface.c (zapping_popup_menu_new): Show toolbar
	  checkmark was reversed.

	* plugins/mpeg/Makefile.am: Removed mpeg_strings.c,
	  intltool takes care.
	* po/POTFILE.in: s/mpeg_strings.c/mpeg_properties.glade2, added
	  missing files.
	* plugins/Makefile.am: Don't build plugins/lirc.
	* configure.in: Don't configure plugins/lirc.
	* src, plugins: Some i18n related improvements and corrections.

2003-11-26    <mschimek@users.sf.net>

	* src/zvbi.c: Removed unused zvbi_(caption_)subpage.
	  (py_closed_caption): Rewrote.
	* src/zmisc.h: New SIGNAL_BLOCK macro.
	* src/zmisc.c, src/zmisc.h: Removed zmisc_overlay_subtitles(page).
	* src/zconf.c, src/zconf.h: Added zconf_hook_check_menu.
	* src/v4linterface.c (z_switch_channel): Change caption
	  page on channel switch.
	* src/tveng2.c, src/tveng25.c: Clear image buffers on tuner
	  freq change and capture start. Proper info->format
	  initialization in update_capture_format. Report timeout
	  in read_frame.
	* src/tveng1.c (set_tuner_frequency): Clear image buffers on tuner
	  freq change.
	* src/tveng.c, src/tveng.h: Added tv_clear_image(). 
	  (tv_image_format_is_valid): Added optional bytes_per_line parameter.
	* src/ttxview.c (get_ttxview_page): Improper parameter declaration. 
	  (ttxview_subtitles_menu_new): Added disable item.
	* src/osd.c (osd_event): Bail out if invalid caption pgno, no
	  more caption subno.
	* src/main.c (init_zapping_stock): New subtitle icon.
	  (main): Moved startup_zvbi() up, is needed to create_zapping()
	  with bindings to caption functions. Removed obsolete caption
	  initialization.
	  (shutdown_zapping): Save per-channel caption page.
	  (startup_zapping): Load per-channel caption page from config.
	* src/interface.c: Restored subtitle menu, added subtitle
	  toolbar button. Some minor improvements.
	* src/frequencies.c, src/frequencies.h: Caption pgno
	  now remembered per channel.
	* src/channel_editor.c (station_search_timeout): Always use
	  vbi to determine station names, option gone.
	* src/capture.c (fill_bundle_tveng): Ignored tveng_read_frame()
	  success.
	  (capture_thread): Ignored fill_bundle_tveng() success, especially
	  timeout, sending out old frames.
	* glade/zapping.glade2, src/properties-handler.c: Removed vbi
	  options: use vbi for getting station names (yes), auto overlay
	  subtitle pages (no), subtitle page (now per channel).
	* src/audio.c: s/SIGNAL_HANDLER_BLOCK/SIGNAL_BLOCK due to
	  changes in src/interface.c.

2003-11-20    <mschimek@users.sf.net>

	* pixmaps/Makefile.am: Added subtitle.png. 
	* configure.in: Accidentally replaced default prefix by
	  dirname which gdk-pixbuf-csource, that's some/bin.
	  Was a bad idea to begin with, removed.
	* configure.in, zapping.spec.in, prepare_dist.sh:
	  Configure --with-gnome-prefix option asks for user
	  confusion, removed and its applications replaced
	  by --prefix.
	* prepare_dist.sh: Updated to match configure.in.
	* configure.in: Must not expand prefix var in configure.in.
	* src/Makefile.am: Moved -DZSFB_DIR to configure.in.

2003-11-19    <mschimek@users.sf.net>

	* src/tveng.c (update_xv_control): Channel change muted
	  permanently when controls window was open due to missing
	  quiet handling in p_tveng_update_controls(), fixed here.
	* src/audio.c (startup_audio): Wrong zconf key when setting
	  start/quit muted to defaults.

2003-11-17    <mschimek@users.sf.net>

	* src/zvbi.c (rolling_headers): Preliminary fix of invalid
	  pointer deref in vbi_draw_vt_page_region after channel change.
	* src/ttxview.c (ttxview_delete): Post destruction use of
	  color_zmodel. 
	  (on_main_menu_bookmarks_destroy): Post destruction use of
	  bookmarks_zmodel.
	  (on_ttxview_expose_event): Segv refreshing an exposed
	  region when drawing area is smaller than window. Appears
	  to "fix" that second bug as well.
	  (on_ttxview_quit): Works now.

2003-11-15    <mschimek@users.sf.net>

	* pixmaps/Makefile.am: Don't install built-in pixmaps.
	* src/zvideo.c: g_source_remove id must be > 0.

2003-11-14    <mschimek@users.sf.net>

	* src/tvengxv.c, src/tvengemu.c, src/tvengbktr.c,
	  src/tveng_private.h, src/tveng25.c, src/tveng2.c,
	  src/tveng1.c, src/tveng.c: Recursive tveng_device_info->
	  priv->mutex didn't work, replaced by fast type. Divided
	  a few tveng_ funcs for internal use without locking.

2003-11-13    <mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c (py_record): Missing check if dialog
	  already opened.
	* src/zimage.h, src/video_xv.c, src/video_x11.c, src/video_mem.c,
	  src/video_gdkrgb.c, src/tvengemu.c, src/tveng25.c, src/tveng2.c,
	  src/tveng1.c, src/tveng.c, src/tveng.h, src/capture.c,
	  plugins/screenshot/screenshot.c,
	  plugins/screenshot/screenshot.h: struct tveng_frame_format
	  replaced by tv_image_format. More work required.
	* src/x11stuff.c, src/tveng.c, src/main.c, src/zmisc.h,
	  src/fullscreen.c: Update due to tv_image_format
	  in tv_overlay_buffer (dga_param).
	* src/tveng.h: Replaced image format parameters in struct
	  tv_overlay_buffer by tv_image_format. Replaced base pointer by
	  ulong, since it refers to another address space.
	* src/tveng.c (tv_pixfmt_bytes_per_pixel): Added to speed up future
	  copy functions.
	* plugins/mpeg/mpeg.c (video_callback): Missing retrieve_frame(),
	  abort loop if necessary.
	  (do_start): Preliminary hack to prefer native image format
	  if 4:2:0 or 4:2:2. Missing size locking of requested capture
	  format. Translation to RTE_PIXFMT_YUV had UV order wrong.
	  Added support for TV_PIXFMT_YUV420. False negative in format
	  retry loop.
	* plugins/mpeg/mpeg.c: Missing release_capture_format() calls.
	
2003-11-07    <mschimek@users.sf.net>

	* plugins/screenshot/screenshot.glade2: File selection dialog didn't
	  focus. Apparently it must be modal if parent is (by using
	  gtk_dialog_run).
	* src/cmd.c (py_quit): Quit-muted fix (wrong zconf key).
	  (py_toggle_mode): Logic fix.

2003-11-04    <mschimek@users.sf.net>

	* src/interface.c (zapping_popup_menu_new): Show toolbar and
	  keep on top didn't work.

2003-11-03    <mschimek@users.sf.net>

	* src/ttxview.c (on_search_dialog_destroy, search_dialog_continue),
	  src/capture.c (capture_start, capture_stop): Replaced
	  deprecated gtk_idle by g_idle.
	* src/osd.c (osd_render_osd, osd_set_window): Replaced
	  deprecated gdk_window... by gdk_drawable... functions.
	* src/zvideo.c (z_video_set_cursor, z_video_blank_cursor),
	  src/overlay.c (stop_timeout, restart_timeout),
	  src/audio.c (reset_quiet), src/ttxview.c,
	  src/osd.c (osd_render_osd), src/zmisc.c (z_status_print),
	  src/x11stuff.c (x11_screensaver_set), src/main.c (main),
	  plugins/screenshot/screenshot.c (plugin_init, plugin_close),
	  plugins/mpeg/mpeg.c (saving_dialog_status_disable,
	  saving_dialog_status_enable): Replaced deprecated gtk_timeout
	  by g_timeout.

2003-11-02    <mschimek@users.sf.net>

	* configure.in: Added Xinerama check.
	* plugins/mpeg/options.c (create_slider): Calculation of decimal
	  digits no longer in spinslider.
	* src/video_gdkrgb.c: Correct red/blue order.
	* src/video_x11.c (add_backend_x11): Expect DGA not present
	  (Xnest, remote display).
	* plugins/mpeg/mpeg.c (saving_dialog_new): Didn't show pixmaps.

2003-10-31    <mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c (saving_dialog_attach_formats),
	  src/ttxview.c (export_dialog_new),
	  src/zmisc.c (z_electric_replace_extension): Fixed inconsistent
	  freeing of basename.
	* src/zmisc.c (z_electric_set_basename): Added.
	* src/zmisc.c (z_on_electric_filename): Fixed buffer overflow.
	* plugins/mpeg/options.c: Fixed NULL tooltips deref.
	  (create_menu): Another locale to UTF-8 fix.
	* plugins/mpeg/mpeg_properties.glade2: Removed obsolete rte 0.4
	  dialogs.
	* src/main.c (main): Added new options to disable and select port
	  for xv video and image. 

2003-10-30    <mschimek@users.sf.net>

	* src/tvengxv.c (tvengxv_attach_device): Glint XV_ENCODING bug
	  work-around.
	* src/zvbi.c (threads_init), src/ttxview.c
	  (on_export_dialog_ok_clicked): Make sure errstr is UTF8.
	* src/keyboard.c: Fixed loading of default keybindings.

2003-10-20    <mschimek@users.sf.net>

	* plugins/mpeg/options.c: Locale to UTF-8 fixes.
	* common/fifo.h, common/fifo.c, src, plugins/mpeg: Prefixed
	  fifo functions and types to prevent linker accidents because
	  the fifo functions aren't binary compatible with their rte
	  clones if rte was compiled with linuxthreads and zapping
	  with nptl, or vice versa. Ported from 0.6 branch.

2003-10-17    <mschimek@users.sf.net>

	* src/frequencies.c (tv_rf_channel_next): Off-by-one error
	  skipping last channel in range.
	* src/channel_editor.c (station_search_timeout): Incomplete
	  frequency change on 09-24.

2003-10-14    <mschimek@users.sf.net>

	* src/tveng.c (tveng_unset_xv_port): Only #ifdef USE_XV.

2003-10-11    <mschimek@users.sf.net>

	* src/yuv2rgb.c (startup_yuv2rgb): cfuncs r<->b fix.
	* src/tveng_private.h: tveng_private.assume_yvu useless, removed.
	* src/video_mem.c (planar_image_new): Incorrect uv_stride.
	* src/capture.c (request_capture_format_real): No
	  tveng_set_capture_format call if the format is still the same.
	* src/tveng.c (tveng_set_capture_format): We have a few problems in
          request_capture_format_real, see TODO. Fix is complex. For now
	  this function will block requests for RGB formats. Zapping 0.0
	  to 0.6 worked well enough this way.
	  (tveng_copy_frame): assume_yvu useless, removed. Implicit YVU420
	  to YUV420 conversion removed.
	* src/tveng.c, src/tveng.h: tveng_assume_yvu() useless, removed.
	* src/video_xv.c (traverse_ports): Did not register YVU420 ports.
	  (image_new): Proper U/V plane swapping for YUV/YVU 4:2:0, support
	  more packed formats.

2003-10-10    <mschimek@users.sf.net>

	* plugins/screenshot/screenshot.c,
	  plugins/screenshot/screenshot.glade: Brushed up the dialogs.

2003-10-09    <mschimek@users.sf.net>

	* src/video_x11.c (image_new): Incorrect pixfmt assertion.
	* src/frequencies.c (tveng_tuned_channel_copy): Function
	  decomposed characters with diacritical marks, solution
	  s/G_NORMALIZE_DEFAULT/G_NORMALIZE_DEFAULT_COMPOSE.
	* src/xawtv.c (xawtv_import_config): Handle non-ASCII
	  channel names.
	* src/zmisc.c, src/zmisc.h: Added z_set_window_bg().
	* src/zmisc.c, src/overlay.c, src/fullscreen.c: Setting window
	  background did not, or not immediately, show.
	
2003-10-07    <mschimek@users.sf.net>

	* src/frequencies.c (tv_rf_channel_next): Still didn't work
	  right. Fixed again, hopefully for the last time.
	* src/tvengxv.c: Cleaned up a bit.
	  (grab_port): NVidia tv out bug workaround.
	  (set_overlay): Fixed return values.
	* src/video_xv.c (add_backend_xv): Cleaned and split up
	  for better readability. Listing XVideo resources moved
	  into helper function in src/x11_stuff.c.
	  (tveng2xv): Removed, the module now remembers the
	  image format id reported by xvlib.
	  (tveng2bpp): Replaced by tv_pixfmt_to_pixel_format().
	* src/zmisc.c (zmisc_switch_mode): Proper overlay and fullscreen
	  error messages.
	* src/tveng2.c (tveng2_set_capture_format): Capture didn't work,
	  added tveng_stop/restart to remap buffers after format change.
	* src/tveng.c (tv_set_overlay_buffer): Missing slash in
	  zapping_setup_fb install path. Improved error messages.
	* src/tveng.c, src/tveng.h:
	  Moved preview functions into fullscreen.c.
	* src/main.c: Moved zapping_setup_fb call into overlay.c
	  and fullscreen.c, where it is called only before DMA
	  overlay is actually activated (mostly for error
	  reporting reasons). Removed Xv detection which existed
	  here only to bypass zapping_setup_fb when we (apparently)
	  have Xv overlay capability. Fixed start-muted.
        * src/video_x11.c: Replaced zmisc_resolve_pixformat()
	  call by global dga_param access, which already contains
	  the required information.
 	* src/overlay.c: Proper overlay target initialization.
	* src/fullscreen.c: Moved tveng preview functions here.
	  Removed superfluous (when we're using XVideo)
	  tv_set_overlay_buffer() call.
	* plugins/mpeg/mpeg.c, plugins/screenshot/screenshot.c,
	  src/capture.c, src/capture.h, src/csconvert.c,
	  src/csconvert.h, src/main.c, src/tveng.c, src/tveng.h,
	  src/tveng1.c, src/tveng2.c, src/tveng25.c, src/tvengemu.c,
	  src/tvengxv.c, src/video_gdkrgb.c, src/video_mem.c,
	  src/video_x11.c, src/video_xv.c, src/x11_stuff.c,
	  src/x11_stuff.h, src/yuv2rgb.c, src/zimage.c,
	  src/zimage.h, src/zmisc.c, src/zmisc.h:
	  Replaced tveng_frame_pixformat by tv_pixfmt and tv_pixfmt_set,
	  which covers more formats and is more accurate WRT color
	  component order and endianess. (So accurate in fact, it
	  revealed a V4L2 API bug.)
	* src/zmisc.h (zmisc_resolve_pixformat): No longer needed.
	* src/tveng.c, src/tveng.h, src/tveng_private.h: Replaced
	  tv_video_standard_id by tv_videostd and tv_videostd_set
	  a la tv_pixfmt, under the "no surprise today will keep
	  the bug away" rule.
	  (pig_depth_to_pixfmt): New helper function for backends.
	* src/tveng.c, src/tveng.h:
	  (tveng_set_xv_port): Missing XFree().
	  (tveng_detect_xv_overlay): No longer needed, see main.c.
	  (tveng_is_planar): No longer needed, replaced by
	    TV_PIXFMT_IS_PLANAR() and tv_pixfmt_to_pixel_format().
	  (tv_pixfmt_name): Added, for debugging.
	  (tv_pixfmt_to_pixel_format): Extended. Replaces
	  tveng_frame_pixformat to tv_pixel_format function of
	  same name.
	  (tv_videostd_name): Added, for debugging.
	* src/main.c, src/globals.c, src/globals.h: Obsoleted --no-zsfb
	  switch. zapping_setup_fb is no longer called at startup but only
	  when we actually switch to dma overlay.
	* zapping_setup_fb/v4l.c, zapping_setup_fb/v4l2.c,
	  zapping_setup_fb/v4l25.c: Did not properly distinguish between
	  24 and 32 bpp.
	* src/x11stuff.c, src/x11stuff.h: Added XVideo helper functions.

2003-09-27	<mschimek@users.sf.net>

	* src/tveng1.c (p_tveng1_open_device_file): ioctl
	  BTTV_VERSION failure is non-fatal.
	* src/tveng1.c, src/tveng2.c, src/tveng25.c, src/tvengbktr.c:
	  s/open/device_open, s/close/device_close (debugging).
	* src/properties-handler.c (picture_sizes_on_menu_activate):
	  Fixed wrong selection.
	* src/v4linterface.c (load_control_values): Fixed, cleaned.
	* src/frequencies.c (tveng_tuned_channel_set_control): Added.
	* src/frequencies.h: Removed obsolete declarations.

2003-09-24	<mschimek@users.sf.net>

	* configure.in, src/Makefile.am: Restored libxml check from
	  0.6.x for src/zconf.
	* configure.in: Added BSD driver check, cleanup.
	* src/Makefile.am, src/keyboard.c:
	  Replaced z_key editing widget by eggcellrendererkeys.
	* src/Makefile.am, src/channel_editor.c: Added channel list
	  import from xawtv config file.
	* src/frequencies.c: Resynched frequency tables with
	  XawTV for config import function. Added SE Asian tables.
	* src/frequencies.h: Changed all frequency values to Hz unit.
	* src/i18n.c: New SE Asian country names.
	* src/channel_editor.c: Fixed standard and input option menu.
	* src/zmisc.c, src/zmisc.h: Added a few gtk_tree_view helper
	  functions. Added z_device_entry_grab_focus().
	* src/tvengbktr.c: Cleaned up, removed old cruft, compiles now.
	  But doesn't do anything useful yet. :-(
	* src/tveng.c (tv_set_overlay_buffer):  First try the
	  zapping_setup_fb install path.
	* src/audio.c, src/audio.h, src/properties-handler.c:
	  Rewrote audio device selection in preferences.
	  Cleaned up audio preferences. Added mute on exit option.
	  Removed mute on channel switch option, always on now.
	* src/zmisc.c: Always mute on channel switch.
	* src/cmd.c: Mute on exit optional.
	* src/callbacks.c, src/callbacks.h: No longer used. The
	  remaining button press cb moved into src/interface.c.
	* src/main.c (on_zapping_key_press): Missing call to
	  on_picture_size_key_press().
	* zapping_setup_fb/v4l.c, zapping_setup_fb/v4l2.c,
	  zapping_setup_fb/v4l25.c: Missing #include w/o ENABLE_V4L.
	* plugins, src:	Make VPATH include fixes.
	  (cmd_register): Replaced description and example by
	  set of macros.

2003-08-26	<mschimek@users.sf.net>

	* src/ttxview.c: Teletext doesn't hang anymore. TTXView windows
	  now have a main menu, roughly as recommended in GHIG. Show
	  toolbar/statusbar options inhibited, must investigate how this
	  should be properly implemented. Quit item inhibited, keeps
	  crashing, reason to be investigated. Toolbar improvements:
	  History finally works as expected, page numbers display better,
	  page up/down/etc buttons rearrange on orientation change.
	  Removed Stop button, windows ought to have a close button and
	  we still have the main menu. Added on_toggle and zconf callbacks
	  for reveal button, fixes possible display inconsistency. Fixed
	  attaching to main window toolbar. Creates smaller toolbar for
	  main window. New Python command to open page link in current
	  window. Search dialog not modal anymore. Unified text input
	  dialog and progress display (actually no more progress display,
	  libzvbi needs a fix for proper function). Help button disabled,
	  help needs update for Gnome 2. Export dialog not modal anymore.
	  Format selection moved from submenu (in main_window from popup
	  subsubmenu :-P) into dialog. Removed electric filename, needs
	  work. Fixed bug picking up the wrong file extension. Fixed
	  tabulation of widgets in color dialog, changed to spin slider
	  as in controls dialog. Brushed up bookmarks dialog. Libzvbi
	  strings coded in Latin1 or locale are converted to UTF-8.
	  Rearranged TTXView context menu. Different menus depending on
	  link type, added Open and Open in New Window items. Changed
	  Export to Save as. Create modified context menu for Teletext
	  view in main window. Removed all Teletext widgets from
	  zapping.glade, these are now custom built in ttxview.c. Cleanups.
	* pixmaps/reveal.png: Reveal is now a normal toolbar button,
	  had to resize icon to keep it in line with other buttons.
	* src/interface.c, src/properties-handler.c, src/zvbi.c,
	  src/zvbi.h: Removed program and network info stuff, vbi triggers.
	  Were barely useful and the GUI sucked. Maybe later.
	* src/zvbi.c: Libzvbi network name coded in Latin1 is converted
	  to UTF-8.
	  (vbi_gui_sensitive): Simplified.
	* src/v4linterface.c (add_controls): Properly pad box.
	  (substitute_keywords): Program and network info temporarily
	  unavailable, needs a rewrite.
	* src/zmisc.c, src/zmisc.h: Cleanup in
	  [z_toolbar_]set_style_recursive(). propagate_toolbar_changes()
	  no longer needed, removed. z_strlcpy() added for tveng.

	* src/capture.c, src/cmd.c, src/overlay.c, src/properties-handler.c,
	  src/tveng.c, src/tveng.h, src/zmisc.c, src/zvbi.c:
	  Added tveng_capture_mode TVENG_TELETEXT (which is, naturally,
	  not handled by tveng itself but I don't want to break too many
	  things at once by splitting into a capture and display mode).
	  TVENG_NO_CAPTURE changed meaning to "no display", so we have a
	  state to start from or to fall back.
	* src/zmisc.c (zmisc_stop): Blanks the window since a restart
	  may fail. Basically this is what TVENG_NO_CAPTURE displays.
	  (zmisc_switch_mode): Moved ttxview_detach() into zmisc_stop().
	  Changed appearance of Teletext toolbar button to toggle
	  between Teletext and Video. Separated TVENG_NO_CAPTURE and
	  TVENG_TELETEXT start code.

	* src/interface.c: Zapping GnomeApp, its menu, toolbar
	  and popup menu are now built here instead of by Glade.
	  Better control, no more working around Glade flaws.
	* src/main.c, src/properties-handler.c: Added toolbar style
	  option and zconf, then I discovered Gnome has one already.
	  Code disabled until I know how to properly handle the
	  conflict while satisfying GHIG. Removed "avoid flicker"
	  option and zconf, not used anymore.
	* src/interface.c: Added zconf hooks to automagically
	  update menus when hide-toolbar-and-menu and
	  keep-window-on-top config changes. Hook also
	  hides/shows toolbar and menu.
	* pixmaps/Makefile.am: zapping_stock.h was a stupid idea,
	  removed. Rating pixmaps are no longer installed, the code
	  using them is gone. For now.
	* src/main.c: Replaced stupid zapping_stock.h.
	* src/audio.c, src/interface.c, src/interface.h,
	  src/properties.c: Added optional parent widget parameter to
	  register_widget, in case the widget is no child of main_window.
	* src/audio.c, src/interface.c: Replaced "bonobodockitem"
	  widget names by gnome_app_get_dock_item_by_name().
	* src/callbacks.c (on_tv_screen_button_press_event): Moved popup
	  menu initialization into create_popup_menu1().
	* src/main.c: Hide toolbar and menu via zconf hook after
	  main_window was shown, has no effect before. :-P
	* src/cmd.c (py_toggle_mode): Made no sense, cleaned up.
	  (py_keep_on_top): Moved menu item update into zconf hook.
	  (py_help): Disabled, help stuff needs rewrite for Gnome 2.

	* glade/zapping2.glade: Removed a number of obsolete widgets,
	  others are now custom built. Removed "avoid flicker in
	  preview mode" option, not used anymore. Could return
	  later as a hidden option, this just isn't anything the
	  average user cares about.

	* src/overlay.c (on_video_window_event): Added GDK_EXPOSE
	  case, is need when child windows (like popup menu submenu)
	  disappear. 
	* src/fullscreen.c (osd_model_changed): Fixed automatic
	  recentering of view.
	* src/x11stuff (x11_vidmode_list_new): Turned out the server
	  does not behave as expected.
	  (x11_vidmode_switch, x11_vidmode_restore): Make sure this
	  works right when switching to the present vidmode.

	* src/zconf.c, src/zconf.h: Added option to zconf_add_hook()
	  to call the hook for initialization right away. Added
	  zconf_hook_widget_show(), a generic hook.

	* help/Makefile.am: Removed C, de subdirs. Help files and
	  installation need a rewrite for Gnome 2.

	* plugins/alirc/alirc.c, plugins/lirc/lirc.c, plugins/lirc/mpeg.c,
	  plugins/lirc/screenshot.c, src/audio.c, src/callbacks.c,
	  src/fullscreen.c, src/interface.c, src/keyboard.c, src/main.c,
	  src/remote.c, src/remote.h, src/zvbi.c:
	  Renamed python command calls, added optional widget
	  parameter to properly identify the caller.

	* plugins/mpeg/mpeg.c: Replaced code which is now in
	  z_electric_replace_extension().

	* src/properties-handler.c (zapping.picture_size_cycle):
	  Wrong error message.

	* src/frequencies.c (tv_rf_channel_next): Fixed bug adding
	  null channel in channel editor frequency table.

	* src/channel_editor.c, src/plugin_properties.c,
	  src/properties-handler.c, src/zmisc.c, src/zmisc.h:
	  New convenience function z_label_set_text_printf().

	* src/channel_editor.c: Replaced tveng_tune_input by
	  tv_set_tuner_frequency().

	* src/tveng.c (panel_failure, REQUIRE_IO_MODE): Block some
	  functions when the controller is in TVENG_ATTACH_CONTROL mode.
	  Saves similar checks in the backends.
	  (support_failure, REQUIRE_SUPPORT): Abort some functions
	  when the controller doesn't support it. Replaces UNSUPPORTED
	  macro.
	  (tv_get_tuner_frequency, tv_set_tuner_frequency):
	  Replacement for tveng_get_tune, tveng_tune_input.
	  (tveng_get_tuner_bounds): Removed. This information is now
	  available directly in struct tv_tuner.
	  (tv_set_overlay_buffer): Worked only when the driver was
	  initialized for overlay before.
	  (tveng_start_previewing): Limit window size to video standard
	  nominal picture size.
	  (tv_clip_vector_to_clip_mask): Added, untested. Primarily for
	  tveng backends, for drivers supporting only a clip mask.
	* src/tveng.h (tv_clip_vector_to_clip_mask): Added, untested.
	  (tv_get_tuner_frequency, tv_set_tuner_frequency):
	  Replacement for tveng_get_tune, tveng_tune_input.
	  (tveng_get_tuner_bounds): Removed. This information is now
	  available in struct tv_tuner.
	* src/tveng_private.h:
	  Rewrote tuner frequency interface, now with bounds in
	  struct tv_tuner, promise of per-tuner frequency setting and
	  control like change callbacks. Unit is Hz instead of kHz
	  or whatever the driver likes. Cleanups.
	* src/tveng1.c: Rewrote tuner frequency code. V4L does not
	  promise per-tuner frequency settings, so we enforce that here.
	  Added rudimentary panel mode. Some cleanup as usual. :-)
	* src/tveng2.c: Rewrote tuner frequency code. V4L2 does not
	  promise per-tuner frequency settings, so we enforce that here.
	  Cleanups.
	* src/tveng25.c: Rewrote tuner frequency code.
	* src/tvengemu.c: Rewrote tuner frequency code.	
	  (add_controls): Fixed incorrect action and color control bounds.
	* src/tvengxv.c: Rewrote tuner frequency code. Parsing of encoding
	  string (standard-input) was backwards.
	* src/tveng1.c (v4l_ioctl_nf): New macro to call ioctl without
	  error report, used when EINVAL is expected.
	  (tveng1_set_control): Fixed bogus non-handling of audio
	  control error.
	* src/tveng2.c (v4l2_ioctl_nf): New macro to call ioctl without
	  error report, used when EINVAL is expected.
	  (add_control): Workaround for drivers reporting wrong boolean
	  and action control bounds.
	* src/tveng25.c (v4l25_ioctl_nf): New macro to call ioctl without
	  error report, used when EINVAL is expected.
	  (add_control): Workaround for drivers reporting wrong boolean
	  and action control bounds. None observed yet, but just in case.
	* src/tveng1.h, src/tveng2.h, src/tveng25.h, src/tvengemu.h,
	  src/tvengxv.h: Removed no longer needed function declarations.

	* po/Makefile.in.in: Updated.
	* configure.in: Incremented version number for intermediate
	  release. Disabled help Makefile targets, these need work.

2003-07-28	<mschimek@users.sf.net>

	* src/zvideo.c: Gtk version check for aspect bug.

	* configure.in: gdk_pixbuf_csource helper app check.
	* pixmaps: Some work to embed pixmaps as stock into the application
	  instead of loading at runtime, unfinished.
	* src/main.c (init_zapping_stock): Added.
	* plugins/mpeg/Makefile.am, plugins/mpeg/mpeg.c: Use GtkPixdata
	  and application stock instead of loading pixmaps at runtime.
	* plugins/screenshot/screenshot.c: Use application stock instead
	  of loading toolbutton image at runtime.
	* src/zmisc.c, src/zmisc.h: Rewrote helper functions for application
	  stock icons.
	* src/ttxview.c: Use GtkPixdata and application stock instead of
	  loading pixmaps at runtime.

	* glade/zapping.glade2: "s/Hide// menu and toolbar" as recommeded
	  in HIG. Use application stock pixmaps.
	* src/callbacks.c (on_tv_screen_button_press_event), src/cmd.c
	  (py_hide_controls): Changed hide/show menu and toolbar menu to
	  check menu as recommended in HIG.
	* src/interface.c: Added on_toggle callbacks for toolbar and
	  keep-on-top check menus calling python. Fixes possible keep-on-top
	  menu check mark and state inconsistency.

	* src/tveng.c, src/tveng.h, src/tveng_private.h: Replaced video
	  input	and video standard vectors of tveng_device_info by linked
	  lists, with appropriate methods, callbacks, helper functions
	  and macros.
	* src/tveng.c, src/tveng.h: Rewrote tv_control and its methods to
	  follow the design of other enumerated items.
	* src/tveng.c, src/tveng.h: tv_callback_s/node//, Added
	  tv_callback_fn type.
	* src/tveng.c, src/tveng_private.h, src/tveng1.c,
	  src/tveng2.c, src/tveng25.c: Helper function ioctl_failure
	  to record ioctl name and errno in case of failure. Called
	  automagically from ioctl macros.
	* src/v4linterface.c: Don't make station menu insensitive when there
	  are no channels, we still have baseband inputs. Rewrote video
	  input and video standard menu building functions. These are now
	  radio menus with automatic update and rebuilding taking advantage
	  of tv_callbacks.
	* src/zmisc.c, src/zmisc.h: Added z_menu_shell_nth_item() helper.
	* plugins/mpeg/mpeg.c, src/channel_editor.c, src/main.c,
	  src/properties-handler.c, src/zmisc.c: Updated for new video input
	  and standard enumeration.
	* src/tveng.c, src/tveng.h: Replaced tv_mixer_line by generic
	  tv_audio_line. Added audio input list to tveng_device_info, audio
	  input helper functions, not used yet.
	* src/audio.c, src/globals.c, src/globals.h, src/mixer.c, src/oss.c:
	  Replaced tv_mixer_line by generic tv_audio_line.
	* src/tveng.c, src/tveng.h: Work towards audio mode interface
	  (mono/stereo/...), unfinished.

	* src/tveng.c, src/tveng.h: Replaced tveng_clip by tv_clip and
	  tv_clip_vector structures and methods, updated tveng_window (now
	  tv_overlay_window) accordingly. Makes things a lot cleaner. New
	  function tv_clip_vector_add_clip_xy sorts clips, will be necessary
	  for bktr.
	* src/tveng.c, src/tveng.h: Rewrote get/set frame buffer
	  routines. Setting checks if already initialized, saving the
	  zapping_setup_fb call, and again if the helper really worked as
	  expected.
	* src/tveng.c (tveng_set_preview): DMA target check before
	  overlay is enabled to prevent memory corruption.
	* src/tveng1.c, src/tveng2.c, src/tveng25.c, src/tvengxv.c,
	  src/tvengemu.c, src/tveng1.h, src/tveng2.h, src/tveng25.h,
	  src/tvengxv.h, src/tvengemu.h: Rewrote video input, standard and
	  some overlay functions. Removed redundant detect_preview and
	  start/stop_previewing (fullscreen overlay) functions.
	* src/tvengemu.c, src/tveng_private.h: Added tv_set_overlay_buffer
	  function. Not used yet, except in tvengemu.c where calling
	  zapping_setup_fb makes no sense.
	* src/main.c (main): Pixfmt breakdown in DGA parameter dump. Moved
	  zapping_setup_fb call after device open to permit check if
	  parameters are already initialized.
	* src/overlay.c, src/overlay.h: Major cleanup. Fixed (non-)clipping
	  against window bounds (right border trashing bug due to DMA
	  overlay alignment by (bttv <= 0.8) driver), tooltip flicker,
	  screen cleanup. All windowed overlay is now controlled by
	  start_overlay() and stop_overlay() in this file.
	* src/x11stuff.c, src/x11stuff.h: Rewrote clip vector building
	  routines. Simpler now, and take window boundary into account.
	* src/fullscreen.c: Update to new tv_overlay_window and
	  tv_clip_vector.
	* src/tveng.c, src/tveng.h: Replaced tveng_fb_info by
	  tv_overlay_buffer structure, also used to hold DGA parameters.
	* src/tveng.c, src/tveng.h, src/video_mem.c: Added
	  tv_pixfmt_to_pixel_format(), with argument struct tv_pixel_format.
	  Breaks down pixfmt, for clients requiring more details.
	  Accordingly removed redundant color depth and bpp from DGA
	  parameters and tveng_pixformat_bits_per_pixel function.
	* src/x11stuff.c, src/x11stuff.h: Replaced x11_dga_parameters by
	  tv_overlay_buffer structure in DGA routines. The same structure
	  is used in tveng to program overlay.
	* src/globals.c, src/globals.h: Replaced x11_dga_parameters by
	  tv_overlay_buffer.
	* src/zmisc.c (zmisc_stop): Replaced tveng_stop_everything() calls,
	  this function is tveng internal now.
	* src/zmisc.c (zmisc_restart): Removed, tveng_restart_everything()
	  is tveng internal now and the function wasn't used anyway.
	* src/zmisc.c (zmisc_switch_mode): Replaced obsolete
	  tveng_detect_preview() call. Simplified switch to windowed
	  overlay, all initialization now in overlay.c/start_overlay().
	* src/tveng.c, src/tveng.h, src/tveng_private.h: Added
	  tv_set_overlay_xwindow as set_overlay_buffer (video memory)
	  counterpart.
	* src/tveng.c, src/tveng.h, src/tveng_private.h:
	  tveng_stop_everything() conflicts with encapsulation of overlay
 	  code in overlay.c, therefore now tveng internal. Actually it
	  shouldn't be used at all (before video standard change etc),
	  permitting asynchronous video parameter changes and what not.
	  But fixing this is complicated, postponed until a later date.
	* src/tveng.c (round_boundary_4): Replaced doubleword alignment of
	  images by more elaborate rounding function.

	* src/capture.c (scan_device): Restore pixfmt after scan.
	* common/Makefile.am: VPATH fix: location of structpr_gen.pl script.
	* common/types.h, src/zmisc.h: PARENT macro passes through NULL.
	* src/zmisc.c, src/zmisc.h: Added z_strlcpy() helper. Sane version
	  of strncpy, idea from FreeBSD.
	* zapping_setup_fb/zapping_setup_fb.c: #include <sys/stat.h> for 
	  device_open_safer(). Oops.

2003-05-28	<mschimek@users.sf.net>

	* plugins/screenshot/screenshot.c: Fix incompatibility
	  with RH9 nptl library, wrong assumption about pthread_t.
	* zapping_setup_fb/Makefile.am,
	  zapping_setup_fb/zapping_setup_fb.pam: Consolehelper
	  mediation didn't work on RH9. Fix borrowed from v4l-conf.

2003-04-26	<mschimek@users.sf.net>

	* src/zmisc.c, src/zmisc.h: Cleaned up & improved filename
	  helpers. In particular z_on_electric_filename() didn't work
	  right. Added z_electric_replace_extension(), better than
	  tinkering with text entry directly.
	* src/ttxview.c, src/zmisc.c, src/zmisc.h: z_build_filename()
	  no longer needed, use glib 2.0 g_build_filename().
	* plugins/screenshot/screenshot.c: Use
	  z_electric_replace_extension().
	* plugins/screenshot/Makefile.am,
	  plugins/screenshot/screenshot_strings.c: Switched to
	  intltool. screenshot_strings.c obsolete, removed.
	* po/POTFILES.in: Intltoolized screenshot plugin.

	* src/capture.c: Race in capture resize logic, added
	  added rwlock.
	* src/capture.c: Restored on_capture_canvas_allocate()
	  to (if possible) resize captured image to window
	  size. Provisional.
	* src/capture.c (find_request_size): Default capture size
	  determined by window size. Provisional.

	* src/zvideo.c, src/zvideo.h: Added cursor blanked signal.
	* src/fullscreen.c (on_cursor_blanked): Automagically
	  recenter view.
	* src/fullscreen.c (fullscreen_start): Fixed black background.
	* src/interface.c (create_zapping): Fixed black background.

	* src/tveng.c, src/tveng.h, src/tveng1.c, src/tveng2.c,
	  src/tveng25.c, src/tvengxv.c, src/tvengemu.c,
	  src/v4linterface.c: Made tv_control.next and .ignore
	  private as planned. Added tv_control_next() function.
	* src/tveng_private.h, src/tveng.c: Moved control and image
	  copy helper functions, pointless to inline.
	* src/tveng.h: New tveng_pixformat_bits_per_pixel() helper.
	* src/tvengbktr.c: Some progress, but still unfinished.

	Remove some duplicate code. Won't help security but it 
	helps maintenance.
	* zapping_setup_fb/Makefile.am: Include src/ headers. Um.
	* src/x11stuff.c (x11_dga_query), src/x11stuff.h: Added
	  optional display_name parameter.
	* zapping_setup_fb/dga.c: Replaced by x11stuff.c code.
	  Later zapping_setup_fb should link tveng.
	* zapping_setup_fb/zapping_setup_fb.c, zapping_setup_fb/v4l.c,
	  zapping_setup_fb/v4l2.c, zapping_setup_fb/v4l25.c,
	  zapping_setup_fb/zapping_setup_fb.h: Use
	  common/device interface instead of local copy. Use
	  x11_dga_parameters (x11stuff.h) parameter instead of globals.

	* glade/zapping.glade2: Eliminated nested toolbar widgets
	  creating unwanted border around channel up/down buttons.
	* plugins/mpeg/mpeg.c: Format request fix. Hint to self,
	  never forget to clear unused fields.

2003-03-25	<mschimek@users.sf.net>

	* src/channel_editor.c: "Add all" aligns channel name with
	  channel list number in NTSC country. Automatically select
	  channel_txl option depending on country.
	* src/frequencies.c, src/frequencies.h: Added channel number
	  alignment hint. Fixed tv_rf_channel_next(), specifically
	  using the French frequency table.
	* v4linterface.c: Don't list unnamed stations in menus.

2003-03-24	<mschimek@users.sf.net>

	* zapping_setup_fb/Makefile.am: Patch #706599 by Kris Verbeeck
	  to fix installation on Gentoo Linux.

2003-03-22	<mschimek@users.sf.net>

	* pixmaps/Makefile.am: Fixed path of zapping.desktop icon.
	* src/oss.c (oss_mixer_set_rec_line): Fixed incorrect
	  set of record lines.

2003-03-21	<mschimek@users.sf.net>

	* glade/zapping.glade2, src/properties-handler.c: Removed ratio
	  option, needs rewrite. Auto ratio doesn't work as suggested,
	  belongs into menu, ought to use ZVideo.
	* glade/zapping.glade2: Replaced tv_screen GtkDrawingArea.
	* src/Makefile.am: added zvideo.c, zvideo.h.
	* src/cmd.c: Fixed shutdown muting incorrectly recorded in config.
	* src/fullscreen.c: Switched from GtkDrawingArea to ZVideo. Paint
	  video background black.
	* src/interface.c: Replaced tv_screen GtkDrawingArea by ZVideo.
	  Paint window background black. Fixed toolbar up/down command
	  connection.
	* src/main.c: Removed 1-unit-height hack. Removed geometry hints
	  timeout hack. This is now better addressed (I hope) in ZVideo.
	  Moved hide-pointer functions into ZVideo, is cleaner. Fixed
	  first startup video size 0,0. Fixed saving of global
	  (vs. per-channel) controls.
	* src/properties-handler.c: Control window size increment with
	  ZVideo.
	* src/zmisc.c (zmisc_switch_mode): Use ZVideo cursor blanking.
	  Fixed unmuting during shutdown. Moved z_set_cursor() into ZVideo.
	* src/zmisc.c, src/zmisc.h (z_set_cursor): Moved into ZVideo.
	* src/zvideo.c, src/zvideo.h: New custom widget, specialization
	  of GtkDrawingArea, for better control over video size.

2003-03-07	<mschimek@users.sf.net>

	* src/tveng2.c, src/tveng25.c: Fixed get_standard code
	  determining active picture size.

2003-03-05	<mschimek@users.sf.net>

	* common/Makefile.am: fprintf_videodev25.h compile warning fix.
	* common/device.c, common/device.h: Added open() and
	  close() wrapper.

	Volume/Mute rewrite (mostly finished):

	* src/mixer.c, src/mixer.h: Replaced mixer interface by 2003-01-15
	  routines. Rewrote startup|shutdown_mixer().
	* src/tveng.c, src/tveng.h, src/mixer.h: Added tv_device_node type
	  and helper functions. Moved mixer definitions from mixer.h into
	  tveng.h.
	* src/oss.c: Enabled new OSS mixer routines. Various corrections.
	  New function to scan for mixer devices, to be listed in the mixer
	  selection GUI.
	* src/zmisc.c, src/zmisc.h: Added z_device_entry helpers for prefs
	  kernel device selection.
	* glade/zapping.glade2: Redesigned soundcard mixer selection.
	* src/audio.c, src/audio.h: New mixer selection GUI and config.
	* src/globals.c, src/globals.h: Provisional current mixer and
	  mixer_line variables, later to be moved into a virtual device
	  context.

	* configure.in: New audio mixer hack #defines for tveng.c.
	* src/tveng.c, src/tveng.h: Integrated soundcard mixer volume control
	  with tveng_attach_mixer_line(). Mixer controls are properly (and
	  transparently) listed in the controls box.
	* src/tveng.h, src/tveng1.c, src/tveng2.c, src/tveng25.c, src/tvengxv.c,
	  src/tvengemu.c, src/v4linterface.c: Removed _dev abstraction from
	  controls and mixer, was overkill. Added step property and 'ignore'
	  flag (preliminary?) to controls.
	* src/audio.c, src/audio.h: Use new mixer API. Removed audio_get|set_mute
	  functions selecting between video device and soundcard mixer volume,
	  this is now transparently handled by tveng.
	* src/cmd.c (py_quit), src/main.c: s/audio_set_mute/tv_mute_set.

	* src/main.c: Save and restore "global" controls if not saved per channel.
	  Moved control config code into src/v4linterface.c.
	* src/v4linterface.c, src/v4linterface.h: New functions to store controls
	  in config and retrieve from config, code extracted from main.c.
	* src/v4linterface.c (add_controls): Control box rebuilding didn't
	  properly delete old controls.

	* src/tveng.c, src/tveng.h: New tv_quiet_set() function implementing
	  a program (as opposed to user) level mute function for transparent
	  channel switch muting.
	* src/v4linterface.c (z_switch_channel): Replaced mute and post-switch
	  usleep by tv_quiet_set() and gtk timeout.
	* src/audio.c, src/audio.h: New functions for gtk timeout delayed
	  unmute after channel switch.

	* README.commands, src/v4linterface.c: Removed zapping.volume_incr()
	  ("record volume" which is BS, see ROADMAP) Python command, added
	  zapping.control_incr() command. zapping.control_incr('volume', ...),
	  [+]/[-], controls box volume is now all the same, using video device
	  or soundcard mixer as configured.
	* src/remote.c (cmd_compatibility): Convert obsolete zapping.volume_incr().
	* src/keyboard.c: Default keymap s/zapping.volume_incr/zapping.control_incr.
	  Added new keys to change brig, con, sat & hue, assigned to F-keys as
	  in XawTV.

	* src/properties-handler.c, src/v4linterface.c: Cleaned up option how to
	  interpret channel numbers entered on keypad/alirc, former "no keypad
	  entering" no longer applicable. 

	* src/properties.c (build_properties_contents): Fixed spurious semicolon
	  in conditional.
	* plugins/mpeg/mpeg.c, plugins/mpeg/options.c, src/zvbi.c:
	  Compile warning fixes.

	* src/zvbi.c: Don't abort on i/o error, does more harm than good.
	  Needs a better solution, perhaps in libzvbi.
	
2003-02-20	<mschimek@users.sf.net>

	* common/Makefile.am, common/device.c, common/device.h,
	  common/structpr_gen.pl: Added script to generate ioctl
	  argument printing and testing functions, and the respective
	  support functions.
	* src/oss.c, src/tveng1.c, src/tveng2.c, src/tveng25.c:
	  Use new ioctl facilities.

	V4L2 Linux 2.5 port (finished):
	* src/tveng.c, src/tveng.h: Updates for tveng25.c.
	* src/tveng25.c, src/tveng25.h: Misc. fixes, compiles and seems
	  to work correct now (although more polishing is needed, e.g.
	  scaling).

	* src/tvengemu.c, src/tvengemu.h: Compile fixes.

2003-02-19	<mschimek@users.sf.net>

	* configure.in, plugins/Makefile.am, plugins/mpeg/options.c,
	  plugins/mpeg/schedule.c, plugins/mpeg/mpeg.c, plugins/mpeg/mpeg.h:
	  Recording plugin compiles again, removed librte 0.4 support.
	  Doesn't work however.
	* glade/zapping.glade2, src/v4linterface.c, src/v4linterface.h:
	  Ported videostd question from 0.6.6.
	* plugins/mpeg/mpeg.c: Ported 0.6.6 fixes.

2003-02-18	<mschimek@users.sf.net>

	* po/LINGUAS, po/da.po, THANKS: Added Danish translation
	  by Morten Brix Pedersen.
	* configure.in: Cleaned up gettext checks.
	* src/main.c, src/global.c, src/global.h, src/tvengxv.c:
	  Added --xv-port option.

2003-02-16	<mschimek@users.sf.net>

	* configure.in: Don't build static libraries (plugins)
	  by default. We never use them.

2003-02-10	<mschimek@users.sf.net>

	* configure.in, Makefile.am, zapping.desktop.in, po/POTFILES.in:
	  Switched to intltool. See intltool/README and
	  http://www.freedesktop.org/standards/desktop-entry-spec.html.

	FreeBSD port II (unfinished, emulated video dev only):
	* configure.in, zapping_setup_fb/zapping_setup_fb.c:
	  Added getopt_long check.
	* configure.in, zapping_setup_fb/Makefile.am: Made
	  suid zapping_setup_fb owner & group OS dependant. 
	* common/Makefile.am: Added ioctl_meteor.h, ioctl_bt848.h,
	  videodev25.h.
	* common/alloc.h: Don't include malloc.h, BSD says is deprecated.
	* configure.in, common/unicode.c: Replaced iconv and libunicode
	  routines by glib routines, removed libunicode checks.
	* src/Makefile.am: COMMON_LIB is in top_builddir (VPATH builds).
	  Added tvengbktr.c tvengbktr.h.
	* src/frequencies.c, src/tvengemu.c, src/video_gdkrgb.c,
	  src/video_mem.c, src/yuv2rgb.c, src/zimage.h:
	  Use relative path to common/ includes.
	* src/oss.c: Workarounds for older OSS mixer interface.
	* src/zvbi.c: Still compile vbi_gui_sensitive() without
	  libzvbi.
	* zapping_setup_fb/Makefile.am: Use X_CFLAGS, X_XF86DGA_LIBS. 
	* zapping_setup_fb/dga.c: Use HAVE_DGA_EXTENSION.
	* configure.in: More robust X extensions checks.

2003-02-09	<mschimek@users.sf.net>
	
	* src/frequencies.c: Moved video standard defines into
	  tveng.h.
	* src/tveng.h, src/tveng1.c, src/tveng2.c, src/tvengxv.c:
	  New video standard types, for automatic standard
	  selection et al.
	* src/tveng2.c: Fixed TVENG_ATTACH_CONTROL.
	* src/zmisc.c (zmisc_switch_mode): Save video standard.

	V4L2 Linux 2.5 port (unfinished):
	* common/Makefile.am: Added videodev25.h.
	* src/Makefile.am: Added tveng25.c, tveng25.h.
	* zapping_setup_fb/Makefile.am: Added v4l25 target.
	* zapping_setup_fb/zapping_setup_fb.c,
	  zapping_setup_fb/v4l25.c: Added v4l2 2.5 interface.

2003-02-08	<mschimek@users.sf.net>

	* zapping_setup_fb/Makefile.am: Fixed incorrect $(DESTDIR)
	  prefix in csfb.capps.
	* po/ChangeLog: Added. This is needed to make dist with our
	  po/Makefile.in.in, an older gettext Makefile customized
	  by the gnomes.

2003-01-27	<mschimek@users.sf.net>

	* configure.in: DPMS check didn't work properly, rewrote. In
	  the course also add/changed checks for xf86dga, xf86vmode, xv.
	* src/Makefile.am: configure.in X lib checks changed.
	* src/fullscreen.c: Moved screensaver disabling into zmisc.c.
	* src/main.c: Init screensaver routines.
	* src/mixer.c, src/mixer.h: A few minor interface corrections.
	* src/x11stuff.c: User more fine grained configure.in X lib
	  checks. Various cleanups. Rewrote screensaver disabling routines.
	* src/x11stuff.h: Cleanup, screensaver interface changed.
	* src/zmisc.c (zmisc_switch_mode): Disable screensaver in all
	  modes except Teletext. 

2003-01-25	<mschimek@users.sf.net>

	* src/tveng.c, src/tveng.h: Switch to tv_control with better
	  encapsulation of controller specifics and callbacks, numerous
	  small changes. Attn tveng_device_info.controls changed from vec
	  to list. Added tveng_update_control(). Moved sanity checks from
	  controllers into tveng_set_control(). tveng_*_control_by_id()
	  preliminary disabled. tveng_*_mute() use controls, controller
	  mute interface removed. 
	* src/tveng_private.h: New tv_dev_control for controller control
	  interface, mute interface removed. Replaced control helper
	  functions.
	* src/tveng1.c, src/tveng1.h, src/tveng2.c, src/tveng2.h,
	  src/tvengxv.c, src/tvengxv.h, src/tvengemu.c, src/tvengemu.h:
	  Switch to tv_control, rewrote most of the control routines.
	  Mute interface routines removed.
	* src/v4linterface.c: Switch to tv_control, use tv_control
	  callback to update mute button.

2003-01-23	<mschimek@users.sf.net>

	* src/main.c, src/tveng.c, src/tveng1.c, src/tveng2.c,
	  src/tvengxv.c: Added disable_overlay (--remote) option.

2003-01-22	<mschimek@users.sf.net>

	* src/properties_handler.c, src/tveng.c: Added fullscreen
	  mode list.
	* src/x11stuff.c, src/x11stuff.h (x11_vidmode_by_name):
	  Added.

2003-01-20	<mschimek@users.sf.net>

	* src/globals.c, src/globals.h: New vidmodes list.
	* src/main.c: Init new vidmodes list.
	* src/tveng.c (tveng_start_previewing), src/tveng_private.h:
	  Rewrote to use new x11_vidmode routines.
	* src/tveng1.c (tveng1_start_previewing),
	  src/tveng2.c (tveng2_start_previewing): Center fullscreen
	  overlay over root window instead of viewport, same as
	  Xv overlay. Accordingly x11_vidmode_switch() centers and
	  we get nice margins.
	* src/tvengxv.c: Fixed wrong icon in controls box.
	* src/x11stuff.c, src/x11stuff.h: New x11_root_geometry()
	  helper. New and extended x11_vidmode helper functions, former
	  tveng_start_previewing() code.

2003-01-19	<mschimek@users.sf.net>

	* zapping_setup_fb/Makefile.am, zapping_setup_fb/dga.c,
	  zapping_setup_fb/zapping_setup_fb.c,
	  zapping_setup_fb/zapping_setup_fb.h, 
	  zapping_setup_fb/v4l.c, zapping_setup_fb/v4l2.c: Separated
	  video driver interface, added v4l2 interface.
	* zapping_setup_fb/zapping_fix_overlay: test syntax correction.
	* configure.in: Added program_invocation_name check for zsfb.

2003-01-18	<mschimek@users.sf.net>

	* src/channel_editor.c (py_channel_editor),
	  src/plugin_properties.c (py_plugin_properties),
	  src/properties.c (build_properties_dialog),
	  src/v4linterface.c (py_control_box):
	  Raise window on reopen.
	* src/v4linterface.c: Don't disable toolbutton
	  after open. Const fix.

2003-01-15	<mschimek@users.sf.net>

	* common/types.h (PARENT): Missing brackets.
	* src/ROADMAP: Added some notes for future tveng improvements.
	* src/audio.c (audio_set_mute): Unmute tv audio when unmuting
	  mixer line.
	* src/main.c: Const fix.
	* src/mixer.c, src/mixer.h, src/oss.c: New interface,
	  not used yet.
	* src/tveng.c, src/tveng.h: Added (final) callback mechanism
	  for new mixer interface (and other tveng properties in
	  the future).
	
2003-01-08	<mschimek@users.sf.net>

	* src/Makefile.am, src/i18n.c, src/i18n.h:
	  Added i18n.c, i18n.h country name routines.
	* src/channel_editor.c, src/frequencies.c,
	  src/frequencies.h: Replaced frequency table routines.
	* src/frequencies.c (tveng_tuned_channel_by_string): Fixed.
	* src/main.c, src/globals.c, src/globals.h,
        * src/ttxview.c, src/v4linterface.c: Removed global
	  current_country, renamed tveng_tuned_channel.country
	  to .rf_table "cc@table".
        * src/v4linterface.c: Channel name completion in
	  keypad (alirc) channel number entering for faster switching.

2003-01-05	<mschimek@users.sf.net>

	* src/tveng1.c: Fixed audio mode selection.

2003-01-03	<mschimek@users.sf.net>

	* glade: Added force_mixer checkbutton in audio prefs.
	* src/audio.c, src/audio.h: Added force_mixer checkbutton,
	  new master mute functions.
	* src/cmd.c, src/main.c, src/v4linterface.c, src/zmisc.c:
	  Use audio_xxx_mute().

2002-12-31	<mschimek@users.sf.net>

	* common/unicode.c: (get_locale_charset): Switched to
	  g_get_charset(), hopefully this is more reliable.
	* src/v4linterface.c, src/tveng2.c: Fixed controls display.
	* src/v4linterface.c: Update controls faster on channel switch etc.
	* src/audio.c: Restored mute button/controls binding.
	* src/tveng2.c: Added bttv mute bug work-around. Added (preliminary)
	  audio mode menu (no luck w/bttv 0.8.45, needs another
	  work-around).

2002-12-30	<garetxe@users.sf.net>

	* src/frequencies.c: Added Poland Autocom cable Frequency table,
          contributed by Artur Flinta.
        * src/osd.c: Ported to Pango.

2002-12-28	<mschimek@users.sf.net>

	* configure.in: Preliminary libesd check.
	* src/tveng.h: mutable.
	* src/tveng1.c, src/tveng2.c, src/tvengxv.c: Set
	  info->audio_mutable flag.
	* src/mixer.h, src/mixer.c: Added mute function.
	* src/main.c, src/zmisc.c, src/audio.c (set_mute1): Mute
	  by mixer if not supported by video device (preliminary).

2002-12-26	<mschimek@users.sf.net>

	* src/properties-handler.c, src/properties-handler.h: Popup menu
	  appearance sizes now configurable with kbd shortcuts re
	  http://bugs.debian.org/168263. Added py_picture_size_cycle
	  function.
	* src/keyboard.c: Changed KP_Add and _Sub default key bindings to
	  cycle through the favorite picture sizes. The ttx_subpage_incr
	  functions are still available on cursor l/r.
	* src/v4linterface.c (on_channel_key_press, kp_timeout): Keypad
	  channel number entering broken, fixed zapping.set_channel
	  argument. Splitted for reuse by alirc.
	* plugins/alirc/alirc.c: Added MUTE, VOL_UP, VOL_DOWN re
	  zapping-misc@lists.sourceforge.net 23 Dec 2002. Connected
	  SETCHANNEL to the keypad channel number entering routines.
	  Alirc now accepts the new Python commands.
	* README.commands: Added.

2002-12-24	<mschimek@users.sf.net>

	* src/channel_editor.c, src/channel_editor.h: Rewrote from scratch.
	  Modify button dropped, text entries change the list directly now.
	  Add button adds blank channel. Modification of multiple channels
	  works better. Station search channel name from vbi works better
	  (for me from ttx/vps, anyway), although it runs a bit slower now.
	  Station search and add-all does not add already known channels.
	  Internal the dialog isn't modal and global_channel_list is edited,
	  so all changes are put into effect immediately (needs more work).
	  Cancel button or close restores the old list. Added missing
	  channel_editor.h file.
	* src/frequencies.c, src/frequencies.h: Rewrote tuned_channel
	  routines. Cleaner and UTF-8 safe.
	* src/keyboard.c, src/keyboard.h: Added z_key_entry_entry() and
	  cleaned up to permit z_key_entry signal callback.
	* src/keyboard.c: Commands in key bindings loaded from config now
	  automagically translated from pre-0.7 syntax to Python (e.g.
	  channel up/dn).
	* src/remote.c, src/remote.h (cmd_compatibility): Added to
	  translate pre-0.7 syntax commands.
	* src/zmisc.c, src/zmisc.h: Spinslider cleanup. Reset button
	  now cycles between current, previous and reset value.
	  (z_icon_factory_add_default_files): Added but not used
	  yet.
	* src/v4linterface.c (add_channel_entries): Cleanup.
	* src/options.c, src/v4linterface.c: Spinslider interface changed.
	* src/main.c, src/v4linterface.c, src/zvbi.c, src/ttxview.c,
	  plugins/screenshot/screenshot.c: Tuned channel interface changed.
        * src/zvbi.c (zvbi_get_name): Changed to return UTF-8 string instead
	  of Latin-1 station name.
	* src/cmd.c: Added py_keep_on_top function.
	* src/properties-handler.c, glade/zapping.glade2: Moved
	  keep-window-on-top option into View menu.
	* src/interface.c: Initialize keep-window-on-top check menu.

2002-12-04	<mschimek@users.sf.net>

	* src/main.c, src/x11stuff.c (wm_hints_detect): Rewrote to
	  work with Sawfish.
	* src/gen_conv.s: Replaced comments, older as dislike C style.
	* src/tveng.h, src/tveng2.c, src/tvengxv.c: Provisions for
	  control icons.
	* src/tveng1.c: Provisions for control icons and defaults
	  32768.
	* src/zmisc.c, src/zmisc.h: Spinslider improvements.
	* src/v4linterface.c: More compact control box.

2002-11-15	<mschimek@users.sf.net>

	* src/Makefile.am: Added DEFAULT_CFLAGS, didn't compile
	  without -D_GNU_SOURCE.

2002-10-30	Italian translation <garetxe@users.sf.net>

	* po/it.po: Italian translation, contributed by Pino Toscano.

2002-10-10	<mschimek@users.sf.net>

	* configure.in: Updated rte 0.5 check.
	* common: Removed obsolete errstr.c, errstr.h.
	* po/README: Added to explain UTF-8.
	* po: Updated from 0.6.5 trunk.
	* plugins/mpeg/mpeg.c, plugins/mpeg/mpeg.h, plugins/mpeg/options.c:
	  Updated rte 0.5 interface to match latest revision. Changed
	  gettext() calls to dgettext() where they access library strings.
	  Proper setup of quickrec recording window. (From 0.6.5)
	* src/Makefile.am (COMMON_LIB): Changed to $(top_builddir).
	* src/ttxview.c: Changed gettext() calls to dgettext() where they
	  access library strings. (From 0.6.5)
	* src/tvengxv.c: Added XSync in tvengxv_tune_input as
	  suggested by bug report #599834.
	* src: #include fixes for GCC 2.7 (as if anyone would
	  still use it...)
	* zapping_setup_fb/Makefile.am: Added missing DISTCLEANFILES.
	* zapping_setup_fb/zapping_setup_fb.c: Had to restore pre-gcc3
	  macro varargs for compatibility.
	* BUGS, NEWS, THANKS, prepare_dist.sh, src/zvbi.c, zapping.spec.in:
	  Merged in changes since 0.6.5 branch.

2002-10-08	<mschimek@users.sf.net>

	* plugins/Makefile.am: Disabled mpeg, does not compile.
	* glade/Makefile.am: Disabled zapping.glade2p, no file.

2002-10-05	bug fixes in screenshot <garetxe@users.sf.net>

	* plugins/screenshot: Fixed a couple bugs introduced when porting.
	* src/capture.c: Fixed stupid mistake when resizing formats array.

2002-10-04	screenshot, template restored <garetxe@users.sf.net>

	* plugins/screenshot: Restored.
	* plugins/template: Restored.

2002-09-09	<mschimek@users.sf.net>

	* src/frequencies.c: Added Canada cable contributed by "matt".

2002-08-22	First simple tests <garetxe@users.sf.net>

	* capture.c: Testing the new code. Works more or less with the
	TVeng_emu driver. Appears to have fewer bugs than i expected,
	yeeha! :-) Commiting, so the world finally sees the
	breakage. Plugins are broken, btw.
	* video_xv.c, video_x11.c: (later) Both work fine, sometimes i
	find myself utterly amazing:-)

2002-08-18	capture.c finished <garetxe@users.sf.net>

	* capture.c: Finished modulo a couple simple things, I will do
	those tomorrow, but Z compiles again (at last!).

2002-08-15	capture.c <garetxe@users.sf.net>

	* capture.c: Wrote the complex logic, doesn't compile yet, but the
	remaining pieces are a piece of cake compared to this.

2002-08-12	video_* done <garetxe@users.sf.net>

	* video_*: Finished video_xv and wrote the rest of the backends
	needed for having all the previous functionality (actually much
	more, as usual ;) Now we only need to finish capture.c and the
	rewrite will compile (but not work yet, as it will surely contain
	miriads of bugs and/or typos).

2002-08-11	video_xv done <garetxe@users.sf.net>

	* video_xv.c: Compiles. It's the xv video backend adapted to the
	new design, the rest of the backends i intend to write (x11,
	rgb and mem) will be considerably easier.

2002-08-10	Continued capture core work <garetxe@users.sf.net>

	* capture.c: Wrote part of it (doesn't compile yet, though).
	* main.c, x11stuff.c: Adapted.
	* zimage.[ch]: created, it's a generic image object. Provides an
	uniform interface to the various possible accelerated kinds of
	images (Xv[Shm]Image, GdkImage, GdkPixbuf, ...), even to
	unblittable data.
	* tveng (tveng_read_frame): Made it accept a tveng_image_data
	argument instead of void* data, int stride; this syntax suports
	planar modes better.

2002-08-08	Capture core rewrite <garetxe@users.sf.net>

	* capture, csconvert, video_xv...: Finished the new design for the
	capture code, hopefully it will become much clearer and
	robust when implemented.
	* csconvert.c: Rewrote rgb->rgb filters according to the new
	design.
	* yuv2rgb.c: Adapted to the new design, and enabled the rgb->yuv
	filters in the process. All this is untested, but compiles.

2002-08-03	TVeng emu <garetxe@users.sf.net>

	* tvengemu.c: Created, manages a virtual device. Useful for
	debugging without convenient hw.

2002-08-02	Chroma+gtk2 fixes <garetxe@users.sf.net>

	* overlay, fullscreen: Found and fixed the infamous "video not
	redrawn with xvideo" problem, it appeared because gtk2 was drawing
	over the chromakey whenever it received an expose event. Thanks to
	Gerd Knorr for some advice regarding this bug.
	* tveng (tveng_[gs]et_chromakey): Added saner chromakey handling,
	prolly the V4L[2] code chromakey isn't 100% correct but i have no
	way to know. It isn't worse than before, anyway.

2002-07-23	Further fixes <garetxe@users.sf.net>

	* zapping: Fixes and missing functionality, it's getting quite
	usable now.

2002-07-20	Fixes <garetxe@users.sf.net>

	* lirc: Fixed a typo.
	* acinclude.in: Don't check whether we can build libs depending on
	libpython, we won't use it anyway.
	* help: Include it.
	
2002-07-19	Plugins done <garetxe@users.sf.net>

	* mpeg, screenshot, lirc, alirc: Ported.
	* po: Converted to utf-8.

2002-07-17	Plugins <garetxe@users.sf.net>

	* plugin_properties: Redone.
	* template: Ported.

2002-07-16	Everything except plugins <garetxe@users.sf.net>

	* zapping_setup_fb: Copy'n'paste.

2002-07-15	ttxview <garetxe@users.sf.net>

	* ttxview: Ported, but untested.
	* zapzilla.c: Ported.
	* properties-handler: Ported.
	
2002-07-14	Small tweaks <garetxe@users.sf.net>

	* cmd.c: Added some missing functions.
	* keyboard.c: Converted default bindings to Python syntax.
	* interface.c: For some strange reason sometimes (most times
	indeed) "activate" isn't invoqued for items in the appearance
	submenu of the popup menu. No idea why, and spent too much time
	with it.
	
2002-07-13	Audio, v4linterface <garetxe@users.sf.net>

	* v4linterface, x11stuff: Ported.
	* arts.c, esd.c, oss.c, audio, mixer: Ported.
	* cpu, csconvert, yuv2rgb: Ported.
	* plugins: Ported. Now ~/.zapping/plugin_dirs has disappeared,
	there's a zconf key /zapping/plugins/plugins_dirs instead. This
	way, when zconf is converted to gconf we won't need .zapping any
	longer.
	* capture, preview, fullscreen: Ported but untested.
	* zmisc: Added zmisc_switch_mode routines.
	* main.c: Ported, things start to work, khewl! I can see the image
	produced by my webcam as before.

2002-07-12	Ported OSD <garetxe@users.sf.net>

	* osd.c: Ported, kept some deprecated gdk_font stuff
	around since it's so much easier to use than raw Pango. As a
	little bonus osd now works even without zvbi compiled in. Moved
	the OSD properties management code in here, helps modularity.
	* zapping: Compiled with GDK_DISABLED_DEPRECATED too, fixed
	appearances of deprecated stuff.
	* src/zvbi.c: Ported.
	* remote.c: Added missing cmd_run_printf.

2002-07-11	Properties shell working <garetxe@users.sf.net>

	* properties: Ported the shell code, works no problem with the
	keyboard settings. properties-handler isn't there yet.
	* video_xv.c, x11stuff: Ported. The WM_HOOKS (stay on top) isn't
	ported yet, apparently gnome-winhints has just dissapeared without
	any replacement. Stuff to work on after I make the hard things
	work.
	* zmisc: Ported all of it modulo the switch_mode routines, I
	cannot port those till I have the capture stuff working, perhaps a
	couple of days.

2002-07-10	Started high-gui stuff <garetxe@users.sf.net>

	* frequencies.[ch]: Ported.
	* keyboard.c, .h, keysyms.h: Ported, compiles but untested yet
	since it requires the properties stuff, which i have't ported
	yet. This was my first exposure to GtkTreeView (GtkCList on
	steroids). While ackward at first glance, gets easier to work with
	when you get used to it.

2002-07-09	Low-gui stuff ported <garetxe@users.sf.net>

	* common: Copied and pasted, this one was easy :-)
	* tveng: Ported.
	* configure.in: Brought back some missing macros.
	* src/interface.c: Added menu callbacks support.
	* zmodel: Ported to being a GObject.
	* zconf: Ported. Not completely tested, but the hook stuff, which
	is the part that could break appears to work. Zapping will be the
	definite test, though.
	* zmisc: Ported propagate_toolbar_changes; ShowBox and friends
	are now GtkMessage boxes.

2002-07-08	Started port <garetxe@users.sf.net>

	* zapping: Started Gnome 2 port, it will become	zapping 0.7 when
	completed.
	* glade: Converted to glade-2, fixed a few stock pixmaps that went
	astray during the conversion. Surely there are others left. Change
	some callbacks that were using user_data to specify the action,
	this ain't easy to do with glade-2.
	* src/callbacks.c: Added on_zapping_delete_event.
	* src/remote.c: Uses the builtin Python interpreter now.
	* src/cmd.[ch]: Created, C implementation on Python methods,
	currently just quit().
	* acinclude.m4: Custom macros, necessary since there's no macros
	subdir in Gnome2 (at least by default).
	* src/interface.c: Libglade routines adapted, some stuff is
	missing yet.

######### zapping-gnome2 merge point ##########################################

2003-11-29	<mschimek@users.sf.net>

	* Release 0.6.8.

2003-11-04	<mschimek@users.sf.net>

	* po/it.po: Updated by Pino Toscano. 

2003-09-29	<mschimek@users.sf.net>

	* src/overlay.c: Background fix. Patch #811746 by Cheuksan Wang.

2003-05-27	<mschimek@users.sf.net>

	* Release 0.6.7.

2003-05-24	<mschimek@users.sf.net>

	* plugins/screenshot/screenshot.c: Fix incompatibility
	  with RH9 nptl library, wrong assumption about pthread_t.
	* common/fifo.h, common/fifo.c, src, plugins/mpeg: Prefixed
	  fifo functions and types to prevent linker accidents because
	  the fifo functions aren't binary compatible with their rte
	  clones if rte was compiled with linuxthreads and zapping
	  with nptl, or vice versa.
	* zapping_setup_fb/Makefile.am,
	  zapping_setup_fb/zapping_setup_fb.pam: Consolehelper
	  mediation didn't work on RH9. Fix borrowed from v4l-conf.
	* Switched to libpng12 (so.3) in RPM. Apparently we must link
	  with the same version as the Gnome libs we use. The linker
	  won't load two different versions (??) and libpng complains
	  about version mismatch.

2003-05-17	<mschimek@users.sf.net>

	* src/callbacks.c: Fix compile err without libzvbi, patch
	  by Leonard Norrgard.

2003-05-07	<mschimek@users.sf.net>

	* src/zvbi.c: Experimental proxyd interface.
	* configure.in: Added --enable-proxy (experimental
	  proxyd interface).

2003-02-19	<morten@wtf.dk>

        * zapping.desktop: Add Danish translation.

2003-02-18	<mschimek@users.sf.net>

	* po/LINGUAS, po/da.po, THANKS: Added Danish translation
	  by Morten Brix Pedersen.
	* src/main.c, src/tvengxv.c: Added --xv-port option.

2003-02-16	<mschimek@users.sf.net>

	* Release 0.6.6.

2003-02-16	<mschimek@users.sf.net>

	* configure.in: Don't build static libraries (plugins)
	  by default. We never use them.

2003-02-08	<mschimek@users.sf.net>

	* src/zmisc.c (zmisc_switch_mode): Save video standard.

	V4L2 Linux 2.5 port:
	* common/Makefile.am: Added videodev25.h.
	* src/Makefile.am: Added tveng25.c, tveng25.h.
	* zapping_setup_fb/Makefile.am: Fixed incorrect $(DESTDIR)
	  prefix in csfb.capps. Added v4l25 target.
	* zapping_setup_fb/zapping_setup_fb.c,
	  zapping_setup_fb/v4l25.c: Added v4l2 2.5 interface.

2003-01-23	<mschimek@users.sf.net>

	* src/main.c, src/tveng.c, src/tveng1.c, src/tveng2.c,
	  src/tvengxv.c: Added disable_overlay (--remote) option.

2003-01-19	<mschimek@users.sf.net>

	* zapping_setup_fb/Makefile.am, zapping_setup_fb/dga.c,
	  zapping_setup_fb/zapping_setup_fb.c,
	  zapping_setup_fb/zapping_setup_fb.h, 
	  zapping_setup_fb/v4l.c, zapping_setup_fb/v4l2.c: Separated
	  video driver interface, added v4l2 interface.
	* zapping_setup_fb/zapping_fix_overlay: test correction.

2003-01-15

	* src/audio.c (audio_set_mute): Unmute tv audio when unmuting
	  mixer line.
	* src/main.c: Const fix.

2003-01-05	<mschimek@users.sf.net>

	* src/tveng1.c: Fixed audio mode selection.

2003-01-03	<mschimek@users.sf.net>

	* glade: Added force_mixer checkbutton in audio prefs.
	* src/audio.c, src/audio.h: Added force_mixer checkbutton,
	  new master mute functions.
	* src/callback.c, src/main.c, src/zmisc.c, src/v4linterface.c:
	  Use audio_xxx_mute().

2002-12-28	<mschimek@users.sf.net>

	* src/tveng.h: mutable.
	* src/tveng1.c, src/tveng2.c, src/tvengxv.c: Set
	  info->audio_mutable flag.
	* src/tveng2.c: Bttv mute bug work-around.
	* src/mixer.h, src/mixer.c: Added mute function.
	* src/main.c, src/zmisc.c, src/callback.c (set_mute1): Mute
	  by mixer if not supported by video device (preliminary).

2002-12-26	<mschimek@users.sf.net>

	* src/v4linterface.c: Splitted keypad channel number entering
	  routines for reuse by alirc.
	* plugins/alirc/alirc.c: Added MUTE, VOL_UP, VOL_DOWN re
	  zapping-misc@lists.sourceforge.net 23 Dec 2002. Connected
	  SETCHANNEL to the keypad channel number entering routines.

2002-12-13	<mschimek@users.sf.net>

	* glade/zapping.glade, src/v4linterface.c, src/v4linterface.h,
	  plugins/mpeg/mpeg.c: Added video standard inquiry if not
	  reported by driver.
	* src/zmisc.c (z_spinslider_new): digits init bug fixed.

2002-12-12	<mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c (video_callback): Unusual condition can
	  block encoding, added temp fix to abort after stop.
	(on_saving_configure_clicked, saving_dialog_attach_formats):
	  GUI confusion fix, saving dialog now automatically selects
	  last configured format. 
	(select_file_format): preliminary visual hint, mp1e vcd image
	  size is not variable.
	(do_start): Retry request_bundle_format() with codec video
	  parameters.
	* src/callbacks.c, src/osd.c, src/ttxview.c, src/zvbi.h,
	  src/zvbi.c: Corrected wrong type of zvbi_page, zvbi_subpage
	  for libzvbi 0.3.
	* zapping.desktop: Italian translation from po/it.po.

2002-10-30	Italian translation <garetxe@users.sf.net>

	* it.po: Italian translation, contributed by Pino Toscano.

2002-10-21	<mschimek@users.sf.net>

	* src/zvbi.c (threads_init): g_strconcat() fix re #635976.
	* src/gen_conv.s: Replaced /**/ remarks, old as don't like it.

2002-10-04	<mschimek@users.sf.net>

	* Release 0.6.5.

2002-10-01	<mschimek@users.sf.net>

	* po/nl.po: Updated by Guus Bonnema.

2002-09-29	<mschimek@users.sf.net>

	* src: #include fixes for GCC 2.7 (as if anyone would
	  still use it...)
	* Makefile.am: Added missing DISTCLEANFILES.
	* zapping_setup_fb/Makefile.am: Added missing DISTCLEANFILES.
	* src/Makefile.am (COMMON_LIB): Changed to $(top_builddir).

2002-09-28	<mschimek@users.sf.net>

	* po/fr.po: Updated by Christan Marillat.

2002-09-27	<mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c: Proper setup of quickrec recording window.

2002-09-26	<mschimek@users.sf.net>

	* src/ttxview.c, plugins/mpeg/mpeg.c: Changed gettext() calls to
	  dgettext() where they access library strings. Oops.

2002-09-24	<mschimek@users.sf.net>

	* configure.in: Change rte 0.5 check to match latest revision.
	* plugins/mpeg/mpeg.c: Updated rte 0.5 interface to match latest
	  revision.

2002-09-09	<mschimek@users.sf.net>

	* src/frequencies.c: Added Canada cable contributed by "matt".

2002-08-31	<mschimek@users.sf.net>

	* src/tvengxv.c: Added XSync in tvengxv_tune_input as
	  suggested by bug report #599834.
	* src/v4linterface.c: Increased nap time before unmuting after
	  channel switch.
	* src/main.c: Fixed widget lookup before main window creation bug.
	* zapping_setup_fb/zapping_setup_fb.c: Had to restore pre-gcc3
	  macro varargs for compatibility.

######### zapping-gnome2 branch point #########################################

2002-06-19	<mschimek@users.sf.net>

	* src, glade, plugins: Added show tooltips option.

2002-06-17	<mschimek@users.sf.net>

	* m4, po, intl, config.rpath: Added because cannot use autogen.sh
	  gettextize --force since gettext 0.11. The fine hack insists
	  on updating already updated Makefile.am's and configure.in.
	* po/Rules-quot: s/PACKAGE VERSION/... because msgfmt complains.

2002-06-16	gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (SUBDIRS): Add m4.
	(ACLOCAL_AMFLAGS): New variable.
	(EXTRA_DIST): Add config.rpath.
	* configure.in (AC_OUTPUT): Add m4/Makefile.

2002-06-10	<mschimek@users.sf.net>

	* src/mixer.c: Try /dev/mixer before /dev/mixer0 etc, thanks to
	  Heiko Abraham for reporting. Patch by Iñaki.
	* zapping_setup_fb/zapping_setup_fb.c: Reduce the amount of code
	  executed with root privileges. Patch by Iñaki. Yours truly
	  cleaned up the code to make it more readable.

2002-05-30	<mschimek@users.sf.net>

	* src: Added "keep on top" re feature request #555064.
	  Note doesn't work with sawfish, has incomplete Gnome wm proto.

2002-05-29	<mschimek@users.sf.net>

	* plugins/mpeg: Finished changes for rte 0.5 (still compiles with
	  rte 0.4).
	* src/x11stuff.c: Applied Iñaki's XScreensaver patch.

2002-05-28	<mschimek@users.sf.net>

	* src/zmisc.c, src/zmisc.h: Added set_sensitive_with_tooltips(),
	  made find_unused_name() more flexible.
	* plugins/screenshot/screenshot.c: Disabled widgets explain
	  why... doesn't seem to work. :-(

2002-05-25	<mschimek@users.sf.net>

	* src/properties.c, src/properties.h: Added handler cancel
	  function.
	* src/interface.c: Modified build_widget() semantics to get
	  rid of hardcoded PACKAGE_DATA_DIR.

2002-05-24	<mschimek@users.sf.net>

	* src/zmisc.c, src/zmisc.h: Added z_load_pixmap() (simplification
	  and less instances of PACKAGE_PIXMAP_DIR), replaced
	  old pixmap from file creation code.
	* src/interface.c, src/properties.c, src/lirc.c: Replaced
	  old pixmap from file creation code.
	* src/ttxview.c, src/zvbi.c: Replaced old pixmap/pixbuf
	  from file creation code.

2002-05-20	<mschimek@users.sf.net>

	* configure.in: Now inherits CFLAGS from environment, modified
	  clean.pl to retain argument order.

2002-04-17	<mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c: Some work towards the new recording
	  dialog.

2002-04-15	<mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c, plugins/mpeg/options.c: Ported to
	  rte 0.5 (optional), config audio and video pages now
	  sensitive only when the stream type applies. For testing
	  only.
	* configure.in: Added check for rte 0.5.

2002-04-10	<mschimek@users.sf.net>

	Greetings from the chrome department:
	* src/keyboard.c: Replaced shutdown by keyboard image in prefs.
	* src/properties-handler.c: Added toolbar style option.
	* src/interface.c: Added toolbar style option and changed
	  toolbar mute button image from stock volume to crossed
	  speaker symbol.
	* src/zmisc.c: Spinslider [reset] button replaced by pixbutton,
	  needs less screen real estate and no translation.

2002-04-09	<mschimek@users.sf.net>

	* zapping_setup_fb/Makefile.am: In absence of consolehelper
	  install suid root zapping_setup_fb in $sbindir but $bindir
	  and create a symlink in $bindir. Now the executable is always
	  in $sbindir. Removed zsfb.capps.in, now created by
	  Makefile, to replace $prefix/sbin by $sbindir (which isn't
	  fully expanded by autoconf in zsfb.capps.in).
	* zapping_setup_fb/zapping_fix_overlay.in: Renamed from
	  zapping_fix_overlay. This version works exactly like
	  the new make install, honouring $bindir and $sbindir, with a
	  a provision for RPM relocation and a reversion option.

2002-04-06	<mschimek@users.sf.net>

	* src/osd.c: Fix to compile w/o zvbi.
	* src/callbacks.c: Fix to compile w/o zvbi.

2002-04-04	<mschimek@users.sf.net>

	* zapping_setup_fb/zapping_fix_overlay: Didn't work when
	  'which' found */sbin/zapping_setup_fb.

2002-04-02	tveng_detect_xv_overlay <garetxe@users.sf.net>

	* src/tveng.c: Do not run zsfb if XV overlay will be used, bttv
	and v4l driver in XFree do weird things otherwise.

2002-04-01	Release 0.6.4 <mschimek@users.sf.net>

	* po/es.po: Updated by Iñaki G. Etxebarria.
	* po/pl.po: Updated by Paweł Sakowski.
	* src/properties-handler.c: Use ngettext for
	  'with %d tuners' (%d > 1) string.

2002-03-23	Christian Marillat

	* po/fr.po: Updated.

2002-03-22	automake 1.6 <mschimek@users.sf.net>

	* configure.in: Prepared for automake 1.6, removed
	  'deprecated and discouraged' acconfig.h.

2002-03-21	Fixes <mschimek@users.sf.net>

	* src/callbacks.c: quit_cmd() didn't work correctly when
	  called from Quit menu, fixed. Added subtitle_overlay
	  command to replace the toggle function of switch_mode teletext.
	* src/zapzilla.c: Added quit command (for [q]).
	
2002-03-19	<mschimek@users.sf.net>

	* src/zvbi.c: Experimental change re zapping-Bugs-527786.
	* configure.in: Added runtime tests for arts, unicode, xml.
	* callbacks.c: switch_mode_cmd() to current not remebered
	  as last mode. Extended restore_mode_cmd() to swap between
	  current/last or requested/last. Added "swap_mode" synonym.
	* keyboard.c: Replaced switch_mode by swap_mode.

2002-03-15	<mschimek@users.sf.net>

	* zapping_setup_fb/zapping_setup_fb.c: Changed messages refering
	  to "this program", which is confusing, to "zapping_setup_fb".
	* src/main.c: Replaced "overlay" in error messages by "previewing"
	  for consistency with the GUI. Actually overlay would be the better
	  term.

2002-03-12	<mschimek@users.sf.net>

	* configure.in: Added "/opt/gnome/share/aclocal" to
	  AM_ACLOCAL_INCLUDE() (this has to be literal since aclocal
	  scans configure.in before it's autoconf'ed), seems to
	  solve the problems we had with gnome installs in /opt.
	  See zap-misc 2001-10-15, 2002-03-09.

2002-03-10	zapping-Bugs-527984 <mschimek@users.sf.net>

	* src/tveng1.c: Added mmap PROT_READ | PROT_WRITE for
	  bttv 0.8.x.
	* src/tveng2.c: Added mmap PROT_READ | PROT_WRITE for
	  bttv 0.8.x.
	* src/audio.c: Missing LIBZVBI conditional around
	  osd_render_sgml().
	* src/osd.c: Added dummy osd_render_sgml(), just in case.

2002-03-08	zapping_setup_fb <mschimek@users.sf.net>

	* zapping_setup_fb/Makefile.am: Automake or autoconf created
	  a bad Makefile, moving the "if SUID_ZFSB" around helped. 

2002-02-26	Keyboard and command changes <mschimek@users.sf.net>

	* Channel number entering on KP: Removed all keys except
	  0-9, decimal, enter. Decimal now runs through all channel
	  prefixes and serves as clear key.
	* src/v4linterface.c: Removed channel up/down swap option.
	* src/remote.c: Added new command functions. These replace
	  a number of on_event functions, allowing both keys and
	  glade GUI elements to trigger kind of mini scripts.
	  Will probably add more of these and extend to (a)lirc
	  and command line.
	* src/ttxview.c: Removed all key bindings except 0-9.
	  Replaced several functions by remote commands.
	* src/keyboard.c: New file. Added key entry widget based
	  on channel dialog with two changes: Reordered the 'known
	  keys' dialog key table and added a key enter function.
	  Preferences: Added keyboard section to assign commands
	  to keys. Added new one-key bindings. Key events are
	  differently handled now, see README.
	* plugins/screenshot/screenshot.c: Made toolbar button
	  optional. Added two remote commands to activate, with
	  format parameter.
	* plugins/screenshot/mpeg.c: Added two remote commands
	  to activate. Had to rewrite mpeg_configured() message,
	  crashed due to a glade bug (?).
	* src/audio.c: Volume and mute remote commands.
	* src/callbacks.c: Switch mode/restore/quit remote
	  commands. (Should probably go into main.c)
	* src/channel_editor.c: Replaced key entry dialog.
	  The channel accel stuff is much cleaner now.
	* src/frequencies.c: A little renaming to reduce the
	  confusion between station name and RF channel name.

2002-02-24	Audio <mschimek@users.sf.net>

	* Added preliminary volume +/- buttons. This affects
	  the record line volume using OSS /dev/mixer.

2002-02-25	zapping_setup_fb patch <mschimek@users.sf.net>

	* zapping_setup_fb/zapping_setup_fb.c: Patch by David Fries.
	  zapping_setup_fb won't run because the .Xauthority is on a nfs mounted
	  directory with the server doing root squash so it can't contact the X
	  server. This patch drops the root privileges when connecting to the X
	  server.

2002-02-08	Fixes <mschimek@users.sf.net>

	* src/zvbi.c: Made threads_destroy() block-proof, fixed a td == 0
	  crash (??) in	update_vi_network().
	* src/zmisc.c: -d dumps failure cause of z_pixmap_new_from_file().

2002-02-05	Another mute fix and better KP entering <mschimek@users.sf.net>

	* src/tvengxv.c: tveng_get|set_mute ignored controls bttv
	  mute bug workaround.	   
	* src/osd.c: Added remove timeout callback.
	* src/v4linterface.c: Uses OSD for KP channel number entering.
	* Added "channel number refers to" option.

2002-02-03	Mute fixes <mschimek@users.sf.net>

	* src/zmisc.c: zmisc_switch_mode() didn't expect failure of
	  tveng_get_mute(), updated control box before restoring
	  old mute state.
	* src/callbacks.c: on_toggle_muted1_activate() didn't expect
	  failure of tveng_get_mute() and didn't update control box.
	* Added KP channel number entering suggested by Nathan G. Grennan.

2002-01-24	Added @euro charset <garetxe@users.sf.net>

	* common/unicode.c: Added support for the ISO-8859-15 locale
	(@euro), and a default when the charset is unknown.
	* src/osd.c: Prefixed correctly VBI_BLUE in sax parsing, etc,
	otherwise they would be ignored.

2002-01-19	<mschimek@users.sf.net>

	* src/osd.c: Segv fix in geometry_update().
	* src/zvbi.c: threads_init(), threads_destroy() didn't
	  work correctly on failure.
	* Updated Zapzilla export docs.

2002-01-18	<mschimek@users.sf.net>

	* plugins/mpeg/mpeg.c: Error box when the video
	  standard is unknown, used to crash.
	* src/zvbi.c: "Overlay subtitle pages
	  automatically" defaults to FALSE.

2002-01-14	<mschimek@users.sf.net>

	* src/zvbi.c: Restored v4l vbi interface, untested.

2002-01-13	libzvbi <mschimek@users.sf.net>

	* Ported Zapping from old libvbi to libzvbi, the new
	  standalone version in CVS, module "vbi". Right now only
	  the v4l2 interface works (oops...), ttx search doesn't
	  and the "sample filter" is gone, but the rest seems to
	  be in good shape. Zapping will also compile without
	  libzvbi, disabling all vbi features.

2002-01-08	<mschimek@users.sf.net>

	* ttxview.c: Page is exported with current reveal state.
	* vbi export: "TODO: TTX export ANSI colors needs improvement"
	  done, now has char set and terminal option, the stupid
	  fg/bg options are gone.

2001-12-25	hide pointer timeout <garetxe@users.sf.net>

	* main.c: Hide the pointer after 1.5s, timeout logic.

2001-12-23	fake std <garetxe@users.sf.net>

	* tveng1.c: Automatic workaround for v4l api bug, now tunerless
	inputs can set the std when there's a tuner in the card.
	* screenshot: Made the ov511 button polling a
	timeout+thread. Rather inelegant, but we don't have much choice.
	* po: Dumped the ngettext emulation and require the real thing
	(>0.10.36). It won't be a problem except for people building from cvs.

2001-12-16	pl.po updated <garetxe@users.sf.net>

	* pl.po: Update by Paweł.

2001-12-16	fixes <mschimek@users.sf.net>

	* 176x144: bug in XvPutImage, driver side, deleted.
	* Crash on exit: not recently observed, probably fixed.
	* screenshot.c: Replaced "appx %.2f kB", appx w/2 decimals, yeah.
	* capture.c: zapping --no-xv never cleared window regions
	  not covered by image in case of exposure or image resizing
	  (eg. mpeg plugin).
	* zvbi.c: Fixed "last known station name" bug.
	* export.c: Changed subno separator from '.' to '-'. Problems
	  with new on_electric... but it's probably better to avoid
	  two dots in filenames.

2001-12-14	yet more channel stuff <mschimek@users.sf.net>

	* channel_editor.c: Fixed random freq when modifying channel to
	  baseband input (or adding baseband input channel) and then
	  modifying back to tuner. Selecting a channel now sets fine
	  tuning even if "dont change" or baseband channel,
	  so one can switch back and forth without erasing the freq.
	  In clist "dont change" channels are now marked to distinguish
	  from tuner channels.
	* libvbi/lang.c: iconv broken??? Added workaround. 
	* libvbi/exp_html.c: Fixed blink attribute. Replaced ISO-8859-5
	  charset by KOI8-R which seems to be more widely accepted.

2001-12-13	more channel stuff <mschimek@users.sf.net>

	* tveng.h: Added tveng_control.def[ault]_value, from api (tveng2.c),
	  or current value (tveng1.c, tvengxv.c). For controls dialog.
	* tveng2.c: Added fake tuner for tests (by default not compiled),
	  fixed in set_input: info->cur_input = input->id;
	* tveng1.c: ditto input->id
	* channel_editor.c: Changing input now activates said input and
	  makes fine tuning sensitive iff tuner. Modified the spinbutton
	  adjustment to allow entering arbitrary frequencies (for
	  add-new-channel). 

2001-12-12	channel stuff <mschimek@users.sf.net>

	* Moved channel_editor.c z_spinslider into misc.c, merged with
	  mpeg/options.c and made a few improvements. Replaced spinslider
	  in options.c, channel_editor.c and v4linterface.c (which added
	  a reset button to the latter two and a kHz label in channel
	  dialog.
	* v4linterface.c: Changed controls window policy allow_grow to
	  TRUE, to allow wider sliders.

2001-12-10	Solaris portability <garetxe@users.sf.net>

	* Many fixes, mainly Solaris portability (thanks to Roger Fujii
	for his help with this).
	* mpeg: run the properties dialog at least once before recording.

2001-12-09	JPEG plugin <mschimek@users.sf.net>

	* Rewrote jpeg plugin. New attractions: screenshot dialog
	  got a format selector, quality slider and preview (optional),
	  output size estimation, simple deinterlace option, also
	  previewed. Like [Ctrl-S] the image is now grabbed on [S]
	  rather than OK (optional). Added PPM backend. Electrified
	  file name entry, made dialog closing on filename-enter
	  optional.

2001-12-07	<mschimek@users.sf.net>

	* v4linterface.c: Added new title bar vars $(title), $(rating),
	  contents from program_info[current] (for now CC/XDS only).
	* Added program_info dialog, clone of vbi_info (now Network Info),
	  unified the dialog design.

2001-12-05	caption.c <mschimek@users.sf.net>

	* Fixed repeated roll-ups may be merged into one.
	  (Not related to the osd bug.)
	* vbi.c: Fixed full stop bug in filter.
	* Fixed vbi_classify_page could mistake current/next
	  program caption language.
	* Added XDS program info event.
	* Added rating pixmaps for program info dialog.

2001-12-05	screenshot.c <mschimek@users.sf.net>

	* Made Convert_RGB5*5_RGB24 more accurate ((r & 31) * 255 / 31
	  instead of (r & 31) << 3).
	* Cleaned up and slightly accelerated line converters.
	* Primitive beginnings of multiple backends.

2001-12-03	fr.po <garetxe@users.sf.net>

	* fr.po: Update by Christian Marillat.
	* callbacks.c: Resize the tv_screen, not the whole window.
	* tveng1.c: Fixed typo when getting the minor device number.
	* zvbi.c: Disable VBI when opening the device fails.

2001-12-02	Fractional pixel problem <garetxe@users.sf.net>

	* audio.c: Set configured mixer settings when opening the device.
	* osd.c: Teletubbyfied Mr. Copperfield.

2001-12-01	Mixer et co. <garetxe@users.sf.net>

	* tveng: Added tveng_ov511_get_button_state (untested),
	autodetects /proc entry, etc.
	* screenshot: use tveng for querying ov511 status.
	* bookmark.ico: Added, it's a png indeed. Dunno why this, just
	following what the galeon.sf.net web page does.
	* htdocs: Added a "Shortcut Icon" link to the header so bookmarking
	in galeon puts the logo next to the icon (might work in other
	browsers, untested).
	* mixer: Added code to control the mixer, nothing uses it yet
	apart from properties.c
	* properties/audio: Add a simple gui to force a given audio
	recording line and volume, so we always record with the desired
	settings.

2001-11-27	Post-release fixes <garetxe@users.sf.net>

	* zapping.spec.in: Included missing zapping_fix_overlay.
	* src/frequencies.c: Added missing UHF for Italy (reported by
	Lorenzo Delana) and Ireland (not sure, but it's probable).
	* screenshot: call plugin_start only once when the ov511 button is
	clicked.

2001-11-27	Screenshot extension <mschimek@users.sf.net>

	* Added function to poll Creative WebCam (ov511) grab button
	  to screenshot plugin, contributed by Sandino Flores Moreno.

2001-11-22	Fixes <mschimek@users.sf.net>

	* v4lx.c: "bad signal -> eof_sent", probably due to exceeding
	  the select timeout limit (can't test mmapped vbi), -> fatal
	  error considered eof. Read interface not affected. Timeouts
	  are ignored now, however a better response is warranted,
	  this code to be revisited at a later date.
	* teletext.c, ttxview.c: TOP index fixes: insufficient pg init,
	  wrong char set, next subp didn't work, char size heisenbug (gcc?).
	* teletext.c, vbi_page_title: Use correct national character set.
	* teletext.c: [default] object invocation did not recursively abort.
	* packet.c, eacem trigger: didn't consider 41st column. First
	  encounter of 'ttx:' trigger, decoding worked out of the box
	  incl nuid and stuff, link not quite.

2001-11-20	Fixes <mschimek@users.sf.net>

	* libvbi/caption.c: Fixed CR display update.
	* osd.c: Segv in gdk_draw_rgb_image_dithalign at gdkrgb.c:3057
	  due to missing gdk_rgb_init; Didn't happen when opening prefs
	  first, gdk_rgb_init was called as load image side effect.
	  Copied gdk_rgb_init seq from shaped_caption.c to main.c, correct?

2001-11-18	Completed fast-clicked <garetxe@users.sf.net>

	* screenshot: gladeified clicked() dialog.
	* mpeg: Select destination file on clicked signal, as in screenshot.

2001-11-16	Fast variants of screenshot and mpeg <garetxe@users.sf.net>

	* screenshot, mpeg: Added fast (Ctrl, no configuration) distinction.
	* main.c: GtkButtons in Z now have a "fast-clicked" signal in
	their class.
	* nl.po: Update by Ime Smits.
	
2001-11-15	nl.po <garetxe@users.sf.net>

	* nl.po: Added, contributed by Ime Smits and Reinout van Schouwen.
	* tveng1.c: Reenabled pal-n.
	* properties.c: Remember last open group, added a frame around the
	properties contents, fixed sidebar geometry calculation ("add"
	isn't called for boxes, apparently, even being containers...)

2001-11-14	Killed parrot <garetxe@users.sf.net>

	* parrot: Removed from build tree.
	* configure.in: Added --with-gnome-prefix, overrides
	'gnome-config --prefix'
	* prepare_dist: Added optional prefix parameter.
	* channel_editor.c: Sync with glade file.
	* TODO: I think ttx search gui is clear enough, removing from
	here.

2001-11-12	Plugins properties conversion <garetxe@users.sf.net>

	* mpeg, lirc, screenshot: Converted properties to the new style.
	* plugins.c: Removed properties handling code, each plugin
	manages its properties now through the properties.h api.

2001-11-06	More properties work <garetxe@users.sf.net>

	* audio: Ported to the new properties code.
	* zconf: Added hook_while_alive
	* properties-handler: Dynamic ITV sensitivity.

2001-11-05	Properties almost done <garetxe@users.sf.net>

	* properties.c: Finished the shell code.
	* properties-handler.c: Added, it's the handler for Z's properties
	pages. Almost done except for audio backend properties code and
	dynamic ITV sensitivity.

2001-11-04	GUI sweetpill follow-up <mschimek@users.sf.net>

	* mpeg.c: Added rte.h version check.
	* Replaced occurences of "Elija un color" outside es.po
	  by "Choose a color".
	* zapping.glade: Moved a few channel dialog widgets.
	* channel_editor.c: Added index and video standard to
	  channel list, moved country, NLSed accelerator modifiers,
	  displays input name instead of country, channel and freq
	  when source is not tuner. Replaced unsafe snprintf(d, n, t)
	  by strncpy. Up and down button insensitive at end of list
	  and after selecting all rows (not always??). The respective
	  next row is moved back in sight on up or down. My spelling
	  gland asked for a change of the freq table names.

2001-11-04	New properties dialog <garetxe@users.sf.net>

	* properties.c: New Galeon style properties code. Still under
	construction (and nonfunctional), but I couldn't resist commiting
	:-) Plugins can	be configured in the 'Plugins' dialog.

2001-11-02	GUI sweetpill <garetxe@users.sf.net>

	* channel_editor: Rearranged as discussed in the mailing list.
	* gnome_help: Remember to update clips after tveng_restart_everything.
	* zapping_fix_overlay: Script to fix the so common consolehelper
	bug (is it really consolehelper?).

2001-10-30	<mschimek@users.sf.net>

	* macros: Added as.m4 from automake 1.5, required there but not
	  shipped with previous versions. aclocal 1.5 doesn't abort on
	  double def anymore.
	* mpeg.c: Sets correct frame rate for NTSC.
	* tveng2.c, tvengxv.c: Fixed tveng_enumstd.frame_rate.

2001-10-26	Show/hide pointer <garetxe@users.sf.net>

	* zmisc.c: Routines for showing/hiding the pointer, adapted from a
	patch by Jonas Aaberg. Add also a properties entry.
	* zconf: Modified hook semantics to save a lookup.
	* overlay.c: Hooked on the root window events to remove the
	(expensive??) check_timeout. Makes no difference here, but could
	fix some reported bugs about cpu usage in overlay.
	* tveng1.c: Fixed a typo that made working v4l1 devices
	unavailable. Fixed a bug when setting audio controls too (stupid
	confusing ugly v4l api...)

2001-10-23	Mpeg plugin <mschimek@users.sf.net>

	* Added format menu, grte_load|save_context and moved all
	  functions accessing the config file into options.c, with
	  brief descriptions.
	* fifo.c: Added alloc_buffer(*) to struct fifo, renamed
	  recv_full_buffer_timeout to wait_full_buffer_timeout since
	  recv_* never waits.

2001-10-21	CS conversion, qce <garetxe@users.sf.net>

	* csconvert.[ch]: Added some unaccelerated rgb colorspace
	conversions.
	* capture.c: Fallbacks to the csconvert routines if no better
	rgb mode is available.
	* Z: Works now with the Logitech Quickcam Express driver (possibly
	with many other quickcams too).
	* properties.c: Only one properties dialog can be opened
	simultaneously.

2001-10-21	Mpeg plugin <mschimek@users.sf.net>

	* Slider values are rounded down to option step size.
	* Added effective bits/s display.
	* All the video options seem to work now.

2001-10-19	Mpeg plugin <mschimek@users.sf.net>

	* tveng1.c: Added mp1e/video/v4l.c timestamping method to get
	  sufficently accurate time. Prerequisities:
	* tveng.h: Added frame rate field to tveng_enumstd, will be set
	  in tveng1.c, tveng2.c, tvengxv.c.
	* tveng1.c: Fixed PAL-M incorrectly assumed 625/50.
	* tveng2.c: Replaced strstr(enumstd.std.name, "ntsc"); Unless
	  the driver is borken the w/h info is more reliable deduced
	  from enumstd.std.framelines. May have incorrectly assumed
	  PAL-M, PAL-60 are 625/50.
	* esd.c, oss.c: Added mp1e esd.c, oss.c timestamping, tested, works.
	* arts.c: Added mp1e esd.c timestamping, untested. (Not installed
	  on my box.)
	* src/properties.c: Complained "no plugin accepts..." (arg1 == 0),
	  moved handlers[i].apply() loop under default: as it was supposedly
	  intended.
	* mpeg plugin: Ducks are back in a row, but it needs some more
	  testing and polishing.

2001-10-18	Easy stuff <garetxe@users.sf.net>

	* v4linterface.c: Fixed an stupid bug in control saving, appears
	to work nicely now.
	* exp-html.c: Replaced <blink> by text-decoration: blink;

2001-10-17	Video output abstraction <garetxe@users.sf.net>

	* x11stuff.c, video_xv.c: Virtualized all xvz_ operations,
	allowing for other kinds of YUV acceleration apart from XVideo.

2001-10-14	Audio recording abstraction <garetxe@users.sf.net>

	* audio.c: Audio recording abstraction so we can reuse the code
	between plugins and make it easier to configure.
	* esd.c, oss.c, arts.c: Some backends. Still ![finished|tested].
	* properties.c: Added the property_handler logic, allows for
	properties managing decentralization.
	* glade/zapping.glade: Created new properties cathegory, audio.

2001-10-10	Swap chan up/down <garetxe@users.sf.net>

	* v4linterface.c: Made the PgUp/Down behaviour configurable, it
	was counterintuitive for some people. This is provisional, just
	till we have the generical bindings stuff in place.

2001-10-09	Requested controls gui polishing <garetxe@users.sf.net>

	* v4linterface.c: Added a spinbutton to the slider in the video
	controls for finer tuning.
	

2001-10-08	Context menu for plugins <garetxe@users.sf.net>

	* plugins.c: Added plugin_process_popup_menu.
	* plugins/mpeg/mpeg.c: Add it to the context menu.
	* fifos: added recv_full_buffer_timeout to solve problems in
	vbi_close.

2001-10-08	<mschimek@users.sf.net>

	* configure.in: Changed REQUIRED_RTE_VERSION to 0.4cvs.
	* plugins/mpeg/options.c: Resynced with rte.h.

2001-10-01	Channel editor improvements <garetxe@users.sf.net>

	* channel_editor.c: Now the freq saved with the channel is the one
	set in the slider bar, not the current freq. Also, add the option
	to enter custom freqs.

2001-09-29	tvscreen gtkda again <garetxe@users.sf.net>

	* glade/zapping.glade: Make tv_screen a GtkDrawingArea again to
	fix GtkFixed expose problems with TTX.
	* osd.c: Subtitles toggle only affects CC/TTX, not osd_render*
	text. Same goes for osd_clear.

2001-09-28	OSD complete <garetxe@users.sf.net>

	* osd.c: Added osd_render, keep correct ratio for OSD text,
	timeout, added zmodel_changed as needed. Appears to work reliably.
	* v4linterface.c, callbacks.c: Added OSD notification for Audio
	Mute/Unmute and channel change (when Fullscreen).
	* TODO: Cleaned up a bit, moved some things to 0.6.3 to have
	another release soon.

2001-09-26	OSD fixes <garetxe@users.sf.net>

	* osd.c: Fixed 'flicker in FS', 'off-by-one', 'extra
	size_allocates'	and 'prolly more' :-) 'Missing words' is still a
	mistery.

2001-09-25	OSD rewrite <garetxe@users.sf.net>

	* osd.c: Rewritten, now osd windows are subwindows of the TV
	screen, still some bugs (flicker in FS, missing words ???,
	off-by-one error in y coords when doing roll_up, extra
	size_allocates, prolly more).
	You can get a feeling of the sgml renderer pressing 'o'.

2001-09-21	mpeg properties fixes <garetxe@users.sf.net>

	* mpeg.c: Fixed options frame deletion (objects are created with a
	floating ref, attaching them to a parent makes this ref be 1, when
	the parent is destroyed the widget is unref'ed, and thus
	destroyed, no need to call gtk_object_ref/unref ourselves).
	* plugins.c: First load plugins under $home, then global.

2001-09-19	more renderer work <garetxe@users.sf.net>

	* osd.c: Make the renderer honour <i>, <u>, <b> and the colour
	tags. Cleanup of the code, now the renderer is integrated with the
	SAX parser and no charset translation is needed.
	* release a new updated package with the .spec hopefully working
	for RH (the new OSD code is disabled in here).

2001-09-18	SGML renderer <garetxe@users.sf.net>

	* osd.c: Wrote sgml gdk renderer, sgml tags still not
	recognised (but that's easy).
	* zmisc.c: Added hide button on status bar messages.
	* zapping.spec.in: Now it should work under RH too, thanks to
	Mark (mark at extension2.freeserve.co.uk) for his help with this.

2001-09-17	OSD properties <garetxe@users.sf.net>

	* osd.c: Finally(?) decided to try the gdk way, added properties
	dialog handling.
	* fr.po: Update by Christian.
	* ttxview.c: Fixed a typo that broke the automatic overlaying of
	subtitles, treat pages with TRANSPARENT background as subtitles too.
	* Makefile.am: Added autogen.sh to the distro, so prepare_dist.sh
	works out of the box.
	* ru.po: Removed, unmaintained for a number of releases.
	
2001-09-16	SGML->attr_char <garetxe@users.sf.net>

	* zvbi.c: Wrote a first version of the SGML->attr_char converter,
	will improve.

2001-09-13	bounds checking <garetxe@users.sf.net>

	* libvbi/teletext.c: Added bounds checking for enhance, could
	segfault under certain circunstances.
	* ttxview.c: Search gui touches.

2001-09-11	mpeg plugin audio options <mschimek@users.sf.net>

	* plugins/mpeg: Added dynamic audio options using the new
	  rte_option API. Unfinished, won't work as expected yet.

2001-09-10	automatic overlaying of subtitles <garetxe@users.sf.net>

	* ttxview: Subtitle pages opened in the main window can now be
	opened automatically (configurable).
	* tveng.c: Fixed xv control multigenesis bug.
	* tveng[12].c: Removed the ioctl tests, they did no good.
	* pl.po: Updated (Paweł)

2001-09-03	fifo hang fix <mschimek@users.sf.net>

	* fifo.c: rem_consumer could under certain circumstances leave
	  unconsumed buffers on the virtual full queue, fixed.

2001-09-02	sv translation <mschimek@users.sf.net>

	* sv.po: Commited Swedish translation, contributed by
	  Henrik Isacsson. Many thanks!

2001-09-01	libvbi <mschimek@users.sf.net>

	* decoder.c: NTSC requires valid line numbers, added vbi_ prefixes.
	* exp-html.c: Added missing language id's, replaced open_memstr.
	* export.c: Added vbi_export_open parameter "reveal".
	* v4lx.c: Moved printv above ENABLE_V4L.
	* Made vbi_event a union.
	* tables.c updated, cleanup in cache.c|h, removed -D_GNU_SOURCE.
	* zapping.desktop: Added comment translations from *.po.
	* ttxview.c: Page up/down wasn't connected, changed page num
	  format to %03x.02x to avoid widget resizing. 

2001-08-31	Channel editor usability <garetxe@users.sf.net>

	* src/channel_editor: Do not tune all channels when there are
	many of them selected, smarter modify/add when activating the
	channel name GtkEntry, keep selection et al when modifying.
	* zapping_setup_fb: Reverted to the old bpp detection.
	* configure.in: require ngettext in AM_GNU_GETTEXT (i18ed
			plural forms).
	* fr.po: Updated translation (Christian).

2001-08-30	Select audio device <garetxe@users.sf.net>

	* plugins/mpeg/mpeg.c: Added audio input device selection.

2001-08-26	<mschimek@users.sf.net>

	* src/gen_conv.*: Added rgb2yuv functions, for now MMX only. 
	* src/gen_conv.s: Fixed stack allocation bug (harmless).
	* libvbi/lang.c: Fixed bugs in Arabic and Hebrew glyph mapping.

2001-08-25	Plural forms <garetxe@users.sf.net>

	* gettext: Applied patch from Paweł for handling plural i18ed
		strings correctly.

2001-08-24	0.6.0 released <garetxe@users.sf.net>

	* 0.6.0 released, include prepare_dist.sh in the distro.
		Do not compile gen_conv.s if there's no MMX/GAS

2001-08-23	capture with different bpl <garetxe@users.sf.net>

	* capture.c, tveng: Capture now accepts frames with different
	bytes per line but the same format otherwise.
	* zapping_setup_fb: Made PAM support work for me again.
	* capture.c: Correct format.pixformat set for YVU420 XV bundles.
	* zapping.spec.in, configure.in: Made stupid rpm's out there work
	fine. Now making 0.6.0 should be just running prepare_dist.sh.

2001-08-22	Overlay this page <garetxe@users.sf.net>

	* TTX mode: added the option to "overlay" the current page when
	the main window is in TTX mode.
	* ttxview: improved page selection as discussed, use the new
	pixmaps.
	* main.c, zvbi.c: Added support for aspect ratio autodetecting.
	
2001-08-21	es updated <garetxe@users.sf.net>

	* es.po: Up to date, preparation for 0.6.0 release.
	* configure.in: Cleaned up the gcc options a bit, avoid passing
	many times the same flag. Use gnome-config --prefix instead of
	ac_default_prefix.
	* src/ttxview.c: Use Michael's left, rigth arrows instead of
	<>. The rest will come later.

2001-08-21	<mschimek@users.sf.net>

	* Committed pixmaps: left, right, up, down, reveal, parrot.
	* Modified a few, um, not so clear labels (en) in the channel
	  dialog.

2001-08-20	pl updated <garetxe@users.sf.net>

	* pl.po: Updated to CVS.
	* htdocs: Added content and dropped PHP session support for
	the traditional grandma cookies.

2001-08-19	<mschimek@users.sf.net>

        * common/errstr.*: Added. libvbi/export and v4lx first victims.
	* zvbi.c: page event change broke TTX and CC subtitles, fixed.
	* caption.c: Corrected a channel switch bug.

2001-08-18	<mschimek@users.sf.net>

        * libvbi.h, packet.c: Modified & enhanced TTX page event.
        * vbi_format_page bugs: Not pg->row = display_rows; Wrote
	  glyph 0 instead of 0x20 in 41st column; Didn't write spacing
	  attr double height lower row, probable cause of the
	  vbi_fetch_vt_page segv.
	* po: Added emacs coding hints. How's this coded btw?

2001-08-18	pl translation <garetxe@users.sf.net>

	* pl.po: Commited pl translation, contributed by Paweł Sakowski.
		 Thanks!
	* zmisc.c: Fixed button hor/vert aligning in toolbars when the
	orientation changes. Left the '<[Subpage]>' group always
	horizontal because it made more sense.
	* zvbi.c, v4linterface.c: Called vbi_channel_switched when
	changing inputs, standards or channels.

2001-08-17	many channels <garetxe@users.sf.net>

	* v4linterface: create submenus as needed when there are many
	channels, add inputs and standards to the context menu.

2001-08-16	fixes <garetxe@users.sf.net>

	* zvbi.c: Reduced the number of fetch_page calls. Better now?
	  (mhs: Z still calls fetch for notify_clients/rolling_header
	   even in pure capture mode. Purpose?)
	* vbi_fetch_vt_page: Added memset(pg, 0, sizeof(*pg)), otherwise
	segfault when drawing the page if pg is initially bogus data.
	* capture.c: Fixes, but mc still breaks the mpeg plugin. Spent the
	whole day tracking this down, nothing so far :-(

2001-08-16	Zapzilla gui <mschimek@users.sf.net>

	* ttxview.c: Removed export dir field, Zapzilla now
	  remembers the path last entered. z_build_path is
	  applied to the entered path, not exportdir. Made the
	  file entry "electric", ie. the proposed file name is
	  automagically appended.
	* search.c, ttxview.c: Added regular expression option.

2001-08-16	libvbi et al <mschimek@users.sf.net>

	* exp-html.c: Added color option, fixed anchor insertion.
	* ttxview.c: Didn't set vbi export from zconf, fixed.

2001-08-15	add all channels <garetxe@users.sf.net>

	* channel_editor: Added 'Add all channel' button.

2001-08-15	libvbi et al <mschimek@users.sf.net>

	* glade: Removed the gettextized "labelxx" and the like.
	* list.h: rem_node() returns NULL if node is not member of
	  the list. Fast removing w/o check under unlink_node().
	* fifo.c: rem_producer/consumer() safe to call after
	  adding failed. (More changes ahead.)
	* vbi.c: Restored test filter.
	* teletext.c: Fixed SWR p570 DRCS bug. Added enhancement
	  header-only shortcut as suggested by spec.
	* zvbi.c: Fixed off-by-one error (41st column) updating RTC
	  in rolling_header(), and no RTC from a page not marked
	  for rolling (was a problem on MTV ger; arguable, let's see).

2001-08-14	mpeg plugin <garetxe@users.sf.net>

	* plugins/mpeg: Avoided memcpy using mc fifos.

2001-08-14	libvbi <mschimek@users.sf.net>

	* Added explicit and autodetected channel switch. Note
	  VBI_EVEN_NETWORK changed: vbi_network can be all zero
	  now when switching away from a known channel.
	* Updated CNI table.

2001-08-13	capture code rewrite <garetxe@users.sf.net>

	* src/capture.c: Rewrote/cleaned up the capture core to
	differenciate between read/write serial plugins and allow for
	other producer/consumers (this one not yet tested).
	* plugins/mpeg: Commented out lip-sync warning.

2001-08-09	z_build_path <garetxe@users.sf.net>

	* zmisc.c: Added z_build_path.
	* screenshot, mpeg, ttxview: Use it.
	* mpeg: mv plugin.c mpeg.c

2001-08-09	<mschimek@users.sf.net>

	* zvbi.c: Displays the received station name in the titlebar if
	  not known from channel list.

2001-08-08	prepare_dist.sh <garetxe@users.sf.net>

	* prepare_dist.sh: rpm generation now works for zapping, mp1e and
	rte.

2001-08-08	<mschimek@users.sf.net>

	* Deleted old fifo code.

2001-08-06	channel editor <garetxe@users.sf.net>

	* src/channel_editor.c: Keep selected channels selected when
	hitting up/down.
	* glade/zapping.glade: s/frequence/frequency/ for
	consistence. Ctrl+a mutes/unmutes the device.

2001-08-06	MPEG plugin <mschimek@users.sf.net>

	* no progress report in audio only mode, fixed.

2001-08-05	v4lx.c <mschimek@users.sf.net>

	* Rewrote guess_bttv.
	* Added lots of error messages.
	* Added lots of --debug output.
	* Enabled the v4l 2.4.x vbi interface.

2001-08-01	fixes <garetxe@users.sf.net>

	* libvbi/exp-png.c: Fixed setjmp warning.
	* src/x11stuff.c: Removed XSynchronize call, was broken according
	to 'man XSynchronize'.

2001-08-01	libvbi fix <mschimek@users.sf.net>

	* search.c: Corrected hardcoded column width 40.

2001-07-31	libvbi <mschimek@users.sf.net>

	* v4lx.c: Fixed blank vbi bug.
	* libvbi: Rewrote open sequence.

2001-07-29	parrot fixes <mschimek@users.sf.net>

	* x11stuff.c: Check success of shmget et al.
	* parrot: Forgot to install parrot.glide.

2001-07-28	gui fixes <garetxe@users.sf.net>

	* ttxview: Added a sep between up/down and the rest.
	* main.c: Worked around a bug in glade (automagically changes
	GNOME_STOCK_PIXMAP_(UP|DOWN) into _(TOP|BOTTOM)).
	* v4linterface.c, properties.c: Added configurable title bar.
	* src/zapzilla: Because of popular demand, added standalone Zapzilla.
	* src/ttxview.c: Added view creation/destruction notification.

2001-07-28	<mschimek@users.sf.net>

	* Fifo conversion complete.

2001-07-25	rearranged gui <garetxe@users.sf.net>

	* src/v4linterface.c, glade/zapping.glade: Left just channel
	up/down in the toolbar, moved Channels, standards and inputs to
	the menu. Set channel name in the main window title bar.

2001-07-24	french translation <garetxe@users.sf.net>

	* src/channel_editor.c: Doesn't add the channel if Cancel is
	clicked on the new channel prompt.
	* plugins/parrot: Made num_bundles configurable, size estimation
	in the properties.
	* Applied patches from Roger Fujii (Solaris
	port). s/TRANSPARENT/TRANSPARENT_FULL/g.
	* Updated french translation (Christian Marillat)

2001-07-22	parrot gui <garetxe@users.sf.net>

	* parrot.glade, parrot_strings.h: Added, gui for the parrot
	plugin.
	* src/ttxview.c: Cosmetic bugfix.

2001-07-21	libvbi <mschimek@users.sf.net>

	* Added aspect ratio event.
	* Artificial 41st column for TTX pages.

2001-07-20	zvbi station names <garetxe@users.sf.net>

	* src/zvbi.c: Restored functionality to read channel names from
	TTX.
	* plugins/parrot: Play the "parrot" stream with the proper speed,
	and fake timestamps so they are equal to the original ones.
	* src/channel_editor.c: Added afc and zvbi_get_name support to the
	autosearcher. afc is untested (i cannot test it).

2001-07-19	Parrot buffer <garetxe@users.sf.net>

	* src/ttxview.c: Restore old toolbar style when detaching the
	view.
	* plugins/parrot.c: Added parrot buffer plugin (unfinished, but
	works).
	* src/capture.c (set_bundle_filler): Plugins can now provide
	custom data and override the standard tveng_read_frame routine.

2001-07-17	libvbi/wss <mschimek@users.sf.net>

	* Added vbi_push_video function, works ok. Some more
	  details to be finished.

2001-07-16	<mschimek@users.sf.net>

	* capture.c: ported capture_fifo to fifo2
	* v4lx.c: ported vbi fifo to fifo2
	* Removed unneeded functions from acc colour
	  conv: uyvy, *v*u*; enabled SSE, 3DNow, Athlon.
	* Replaced CPU detection code. Hope this works for
	  everyone.

2001-07-16	fix aspect ratio <garetxe@users.sf.net>

	* main.c: apply the aspect ratio setting to the tv screen, not to
	the main window, including toolbar and menu in the geometry
	computation.
	* ttxview.c: Fixed a segv when vbi_search_next reported < 0, added
	'Empty cache' message.
	* libvbi/search.c: Made vbi_search_next return -2 when the cache
	is empty and -3 when the error is unknown.
	* plugins/mpeg: Adapted to the new (multi-backend) rte.

2001-07-15	mpeg plugin <mschimek@users.sf.net>

	* tveng.c: tveng_get_timestamp(), RETURN_UNTVLOCK()
	  int cast of double time; symptom MPEG plugin a+v heisenbug
	  in mp1e sync routines, delayed or inhibited recording. Added
	  timestamp validation in mp1e.

2001-07-07	save controls with channel <garetxe@users.sf.net>

	* frequencies.c, main.c, v4linterface.c: The state of the controls
	is saved when changing channels, and restored when switching back.
	* zapping.glade: Added a global toggle to control this.
	* pixmaps/gnome-television.h: Added, new icon.

2001-07-06	mpeg plugin <mschimek@users.sf.net>

	* made tveng2 EINTR aware (debugging)
	* added motion option to mpeg plugin 

2001-07-05	libvbi <mschimek@users.sf.net>

	* rewrote common/list.h
	* replaced libvbi/dllist.h
	* fixed http link name bug

2001-07-02	assorted fixes <garetxe@users.sf.net>

	* channel_editor: Pops up a dialog box asking for the new channel
	name if none was given when hitting Add.
	* everything: Portability to Solaris, adapted from a patch by
	Roger Fujii.
	* configure.in: Removed broken "-multrasparc -mvis" in
	configure.in.
	* error_console.c: "console_errors" clo.
	* fr.po: Updated (Christian Marillat).
	* help/man/: Man pages (Christian Marillat).

2001-06-30	yuv filters <garetxe@users.sf.net>

	* yuv2rgb_mmx.c: Uses Michael's autogenerated filters now.
	* gen_conv.[sh]: added.
	* x11stuff.c, zapping_setup_fb: improve screen depth detection.

2001-06-28	--disable-v4l <garetxe@users.sf.net>

	* configure.in, v4lx.c, tveng1.c, tveng2.c: Added --disable-v4l
	option, lets all the V4L specific stuff out of the compilation,
	for Solaris.

2001-06-23	<mschimek@users.sf.net>

	* gcc 3.0 fixes (nothing serious)

2001-06-22	bug fixes <garetxe@users.sf.net>

	* callbacks.c: fixed channel ordering, reported by n0mada@terra.es.
	* zconf.c: Fixed double free(), used xmlFree instead of g_free
	where appropiate.
	* fullscreen.c: Made channel accelerators work in fullscreen.

2001-06-15	alirc, plugin properties <garetxe@users.sf.net>

	* src/plugin_common.h: Made plugin_add_properties a gboolean,
	returns TRUE if the plugins will add anything. gpb arg can be NULL.
	* plugins/alirc: integrated patch by Sjoerd Simons.
	* src/remote.c: Added load_page.

2001-06-08	color dialog <garetxe@users.sf.net>

	* glade/zapping.glade: Beautified ttx color dialog a bit.
	* pixmaps/*.xpm: Added con and brig used above, the rest in
	prevision for future use.

2001-05-29	<mschimek@users.sf.net>

	* list.h: double linked now
	* fifotest.c: added
	* yuv2rgb_mmx.c: added yuyv_rgba32, yuyv_rgb16

2001-05-28	alirc plugin <garetxe@users.sf.net>

	* plugins/alirc: 'Another lirc plugin', by Sjoerd Simons
	<sjoerd@air.luon.net>. Thanks! :-)

2001-05-27	MPEG fixes <garetxe@users.sf.net>

	* plugins/mpeg.c: Works now if Z's yuv pixformat is YUYV and
	capture isn't buffered push. Core when buffered push and lock with
	YVU420 (probably RGB too, untested). Probably bugs in plugin.c
	and capture.c.
	* glade/zapping.glade: Configurable Q/S tradeoff when doing the
	scaling of the TTX pages.

2001-05-25	<garetxe@users.sf.net>

	* plugins/screenshot: YVU420, TTX capture.

2001-05-24	<mschimek@users.sourceforge.net>

	* plugins/lirc/lirc.c: lirc_page fixed in plugin_add_properties

2001-05-24	Rolling headers <garetxe@users.sf.net>

	* src/zvbi.c: Rolling headers support (just the time field for the
	moment).

2001-05-19	Fullscreen <garetxe@users.sourceforge.net>

	* src/fullscreen.c: Made fullscreen usable under many heads.	

2001-05-16	<mschimek@users.sourceforge.net>

	* Fixed port_grabbed shortcut in xvz_grab_port.

2001-05-14	--yuv-format flag <garetxe@users.sourceforge.net>

	* src/main.c, capture.c, x11stuff.c: Added CLO [command line
	option :-)] for deciding between YUYV and YVU420.
	* src/fullscreen.c: No longer grabs the keyboard.
	* src/videodev*: moved to /common, made libvbi use these versions
	too for consistency.

2001-05-13	CC classify gui <garetxe@users.sourceforge.net>

	* src/ttxview.c: Added gui for the CC classification, added
	'Subtitle Page' VBI property and removed toolbar spinbutton.
	* BUGS: Investigated problems with bundle_data under V4L1, they
	were due to a bug in bttv support for interlaced YUV420P. Maintainer
	informed.

2001-05-12	YVU420 <garetxe@users.sourceforge.net>

	* src/capture.c: Defaulted to YVU420P for capture, plugins need
	to be adapted. Added display of _DATA bundles, using yuv2rgb.
	* tveng: Added assume_yvu to work around V4L1 API limitations.
	* yuv2rgb_mmx: Added lacking "emms" to reenable math coprocessor.

2001-05-11	did some things from TODO <garetxe@users.sourceforge.net>

	* src/channel_editor.c: Channels can have an arbitrary order now.
	* configure.in: Remove --disable-ordering flag.
	* src/zvbi.c: Added a verboser message when vbi fails to open.
	* src/ttxview.c: Go back from TTX.
	
2001-05-05	remote(get_channel_info) <garetxe@users.sourceforge.net>

	* src/remote.c: added get_channel_info call.
	* common/fifo: "slow consumer" killing code, unfinished, breaks
	some things.

2001-05-04	mpeg plugin improvements <garetxe@users.sourceforge.net>

	* plugins/mpeg: Adapted to new bundled capture. Now it's possible
	to record mpeg's without XVideo backend scaler.

2001-05-02	Config options <garetxe@users.sourceforge.net>

	* src/capture.c: Fixed, so plugins can work again. Made capture
	size under XVideo configurable.

2001-05-01	New capture code <garetxe@users.sourceforge.net>

	* src/capture.c: Rewrote capture code using fifos, etc. Appears to
	use less CPU with XV scaling (identically 0 :-)). Oppps, and
	plugins won't work either, will fix tomorrow.

2001-04-30	xvzImage <garetxe@users.sourceforge.net>

	* src/x11stuff.c: Moved XvImage support here, made easier to use.

2001-04-28	XV_SIGNAL_STRENGTH <garetxe@users.sourceforge.net>

	* src/tvengxv.c: Added support for this atom, allows for automatic
	channel searching. Now let's see if the v4l.c maintainer in XFree
	accepts my patch, and the rest of the world sees this too :-)
	* src/zmisc.c: Reduce unnecessary open/close couples.

2001-04-27	TVeng thread-safe <garetxe@users.sourceforge.net>

	* src/tveng.c: Added a per-device mutex, made tveng.c lock,
	unlock it as necessary. Rewrote some common code as #macros.

2001-04-25	--command switch <garetxe@users.sourceforge.net>

	* src/remote.c, src/main.c: Added --command line switch, currently
	just "set_channel". Use with 'zapping -c "set_channel BBC"'

2001-04-24	trigger gui <garetxe@users.sourceforge.net>

	* zvbi.c, properties, .glade: Started trigger gui.
	* eacem_icon, atvef_icon: Moved to pixmaps. 

2001-04-07	mpeg plugin <garetxe@users.sourceforge.net>

	* rte: rte_stop closes properly, buffers used for push are
	send_empty'ed, lots of fixes and tuning. Removed rgb support, it
	was nonfunctional.
	* fifos: Proper refcounting.
	* plugins/mpeg/: Encodes, needs a lot of work though.

2001-04-05	libvbi, help <mschimek@users.sourceforge.net>

	* Finished trigger rewrite.
	* Some work in /help.

2001-04-03	overlay+osd fixes <garetxe@users.sourceforge.net>

	* overlay, tveng, osd: Made them play nice together under V4L[12].
	* src/tveng: Print more verbose messages if no DGA present.
	* src/tvengxv.c: Made it work without DGA.
	* src/osd.c, fullscreen: Centered subtitles in fullscreen even if
	VidMode changed.

2001-04-02	accelerators <garetxe@users.sourceforge.net>

	* controls: Added accelerators for hiding/showing menu bars
	(Ctrl+H), control box (Ctrl+C).
	* es.po: Updated.
	* src/ttxview.c: Added TTX subtitles selection to the popup menu.

2001-04-01	screenshot gladefied <garetxe@users.sourceforge.net>

	* plugins/screenshot: uses libglade now, added accelator for saving
	(Ctrl+s).
	* src/capture.c: send_event = False. Appears to be faster in some
	setups.

2001-03-31	mcfifos fixed <garetxe@users.sourceforge.net>

	* fifo: Rewrote most multi-consumer part of fifos, rte
	works again :-)
	* mp1e: 'make dist' functional
	* libvbi/v4lx.c: Minimized delay on joining the thread.

2001-03-30	libvbi <mschimek@users.sourceforge.net>

	* Teletext page classification.

2001-03-28	libvbi <mschimek@users.sourceforge.net>

	* New weblink event for ITV and Z2W.
	* packet.c: Added preliminary decoding of "zap2web", TTX based
	  equv. of CC-ITV, went on air at CeBit last week.
	UPDATE: Just got the EACEM prop "zap2web" is based on, this
	  feature is on freeze for a rewrite.
	* packet.c: Added page classification (program related,
	  subtitles, number of subpages etc). Not reliable yet.

2001-03-25	channel=f(bookmark) <garetxe@users.sourceforge.net>

	* src/ttxview.c: Selecting a bookmark can tune the current channel.
	* libvbi/v4lx.c: Added some cancellation points, so the thread is
	always joinable.

2001-03-25	ttxview/libvbi <mschimek@users.sourceforge.net>

	* ttxview.c & exp_txt.c: Improved wrapping selection of double-h/w/s
	  characters.
	* v4lx.c has a buffered fifo, timestamps are valid, out-of-sync
	  function restored.
	* Added text colour levels (brightness, contrast), no gui.
	  Primarily an improvement when scaling < 1x.
	* Page event flags rolling header.
	* Added resize options 720x576 and 352x288 (ITU-R 601 devices).

2001-03-24	channel editor <garetxe@users.sourceforge.net>

	* src/channel_editor.c: Completed new channel code.

2001-03-23	channels <garetxe@users.sourceforge.net>

	* src/: Mostly finished new channels design. Lacks gui
	polishing, but works.
	* src/zmisc.c: Added convenience functions for GtkOptionMenu.
	* tveng: Added hash for input/standards.

2001-03-22	libxml2 <garetxe@users.sourceforge.net>

	* configure.in: Better libxml detection, libxml2 support.
	* ttxview.c: Fixed segv in expose. Added www.* addresses to #url# mask.
	* Started channel => channel+input+standard work.

2001-03-21	ttxview.c <mschimek@users.sourceforge.net>

	* frequencies.c: Added PAL-China, ripped from XawTV. Isn't GPL
	  a wonderful thing?
	* libvbi: Rewrite of export api finished.
	* ttxview.c: The export menu builds dynamically now, the only
	  visible change is the dialog title "Export <format>".
	* ttxview.c: Replaced the string export hack by mem fp.
	* ttxview.c: Simplified the selection routines, added
	  wrap-around mode cf. xterm.
	* de.po update.

2001-03-20	0.5.92 released <garetxe@users.sourceforge.net>

	* src/overlay.c: Do not clean screen with cards that support
	chromakeying. Reported to work.
	* fifos: Fixed gross bug. Amazing it didn't have zillions of side
	effects... but i cannot join mux thread from rte yet, getting
	weirder and weirder...
	* tveng, src/main.c: --dword-align option. Has some uses for
	broken drivers, but disabled by default.
	* libvbi/Makefile.am, src/Makefile.am: Added $(UNICODE_CFLAGS),
	that should fix the build problems for people with unicode.h not
	in an standard location.

2001-03-18	Chroma <garetxe@users.sourceforge.net>

	* Added chroma support for overlay, dunno if it works.
	* plugins/lirc/lirc.c: Cleanup, fixed a bug.

2001-03-18	TTX <mschimek@users.sourceforge.net>

	* Fixed spurious blinking bug in level 2.5 decoder.
	* Export filename and HTML/PNG title includes station name
	  if known.
	* HTML export adds anchors for http/ftp/email links.

2001-03-17	Export beautification <garetxe@users.sourceforge.net>

	* src/ttxview.c: Changed export file GtkEntry to GnomeFileEntry,
	and now uses zconf to keep preferences. Made it a bit wider.
	* configure.in: Released 0.5.91 (bugfixes) today, bumped version
	to 0.6.0cvs.
	* libvbi/lang.h, exp-*: Added gettext support to export.
	* src/ttxview.c: Fixed ENIAC bug in txt mode.	

2001-03-16	TTX export <mschimek@users.sourceforge.net>

	* Export options interface now tveng controls style.
	* Rewrote export dialog. Not completely satisfied, but well.
	* Added email keywords (a), (at).
	* Added vbi_network XDS/CNI unique id.

2001-03-16	pam workarounds <garetxe@users.sourceforge.net>

	* configure.in: Added --disable-pam option, apparently some pam
	versions are broken, so they cannot exec zsfb properly.
	* src/mmx.c: Strangely enough, the TryAMD label fails to compile
	under gcc 2.95.3 (report by Olivier Perron), applied the patch he
	sent to work around this.

2001-03-15	more clean calls for Overlay <garetxe@users.sourceforge.net>

	* src/overlay.c: Added some extra clean() calls (unmapping,
	stopping), this should fix those ugly pixels left.
	* src/main.c: Added a set of fallbacks in case /dev/video0 doesn't
	open, should make devFS work too.
	* src/capture.c: Capture mode speedup with XVideo scaler (1% cpu
	usage, whew!).

2001-03-14	DPMS in Xext <garetxe@users.sourceforge.net>

	* configure.in: Applied patch by Dirk Meul to search for DPMS
	functions in DPMS in -lXext in case -Xdpms fails.

2001-03-10	osd rough edges <garetxe@users.sourceforge.net>

	* osd.c: No flicker even w/o XVideo, knows about showing/hiding
	the main window.
	* help/de: German translation of index.html, by Carsten Menke.
	* src/osd.c: Fixed "ttx subtitles no update" bug.

2001-03-09	Cleanup <mschimek@users.sourceforge.net>

	* Updated de.po

2001-03-08	Fullscreen <garetxe@users.sourceforge.net>

	* src/fullscreen: Added, holds the code for fullscreen mode. Added
	the hability to do OSD correctly in fullscreen without XVideo
	PutVideo.

2001-03-04	TTX subtitles gui <garetxe@users.sourceforge.net>

	* glade/zapping.glade: Added some provisional GUI for TTX
	subtitles, but thinking about better ways to do it.

2001-03-03	Network info <garetxe@users.sourceforge.net>

	* src/zvbi.c: Added network info dialog.
	* src/ttxview.c: Fixed a bug with with TTX restart.
	* glade/zapping.glade: Reorganized a bit the VBI properties to
	make the dialog take less space.

2001-03-02	VBI open/close <garetxe@users.sourceforge.net>

	* Made the vbi object notify clients (TTXView) about being closed,
	this allows for clean start/restart of TTX.
	* plugins/lirc: Bugfixes (one of them introduced by me ;-P)
	* libvbi/v4lx.c: Made it accept a given_fd parameter, rationale:
	guess_v4l tries to open a device to query state, let it know
	that we already own it (otherwise v4l1 drivers will refuse
	re-opening it). Now just fails for me reopening the vbi device under
	XVideo and v4l1, good enough i think.

2001-03-01	Lirc <garetxe@users.sourceforge.net>

	* plugins/lirc: Added infrared support, written by Marco
	Pfattner. Thanks a lot!

2001-02-28	zconfhook <garetxe@users.sourceforge.net>

	* zconf.c: Added gconfish notification mechanism, now the vbi
	device can be opened/closed using the properties dialog, V4L open
	fails.

2001-02-27	osd <mschimek@users.sourceforge.net>

	* osd.c: Pipe replaced fifo/timer event queue. Moved
	  rendering to exp_gfx.c, modified ttx render funcs
	  for Teletext overlay. Works nicely.

2001-02-26	TTX <mschimek@users.sourceforge.net>

	* Added VTX export module, rationale <http://alevt.listbot.com/
	  cgi-bin/subscriber?Act=view_message&list_id=alevt&msg_num=188&start_num=>
	* Cleaned up events, made caption a genuine event.

2001-02-25	caption ipc <mschimek@users.sourceforge.net>

	* Renamed conceal button to reveal. Is reveal on all
	  RC's and TTX refers to it as 'reveal function'.
	  Also renamed all identifiers for consistency.
	* station: Added VPS support, fixed cni priority.
	* caption.c, osd.c: Changed render()/clear()/
	  roll_up() calls to caption event, fetch_cc, and
	  tracking of changes.
	* caption.c: All double buffered now.

2001-02-23	XV fixes <garetxe@users.sourceforge.net>

	* src/tvengxv.c: Added support in the controller for fullscreen
	XVideo (easier than expected).
	* XV: Fixed flicker because of extra preview_on, _off calls.
	* src/ttxview.c, src/zvbi.c: Conceal option.
	* src/osd.c: OSD works in fullscreen mode too.
	* glade/zapping.glade: Option for turning CC display on/off.

2001-02-21	caption integrated <garetxe@users.sourceforge.net>

	* caption.c, osd.c: Integrated caption display into the program,
	it works great :-) Flickers more than necessary when adding
	text to the same row, could be solved by passing a starting_row to
	the render function, thus avoiding the need to remove the
	currently drawn portion of the line to draw again the same.

2001-02-20	TTX <garetxe@users.sourceforge.net>

	* export.c: Zero 'struct export *' on allocation, caused segv
	when pasting text.
	* zvbi.c: Better patch generation, corrects errors caused by interp.

2001-02-20	caption <mschimek@users.sourceforge.net>

	* Fixed 'double height acute vowels' bug.
	* Caption decoder is online, minor tweaks here and there.
	* lang.c: translates caption glyphs.

2001-02-19	blink <mschimek@users.sourceforge.net>

        * Modified phase from 50:50 to 75:25, is easier to read,
	  and cycle time 1.5 s.
	* libvbi/exp-gfx.c: correction, flash to background.

2001-02-18	blink <garetxe@users.sourceforge.net>

	* TTX: Blinking chars now blink, but needs further work. How
	should the blink be done?
	* libvbi/exp-gfx.c: Added rowstride parameter, hope i didn't break
	too many things ;-P

2001-02-17	osd <garetxe@users.sourceforge.net>

	* osd.c: Created. Has the required functionality for integrating
	CC. No smooth scrolling but will work nicely without XV.
	* tveng: Made it a bit more fault tolerant, tries to restart
	capture after failed S_INPUT and S_STD.
	* main.c: Killed the demiurgical fscking inmortal
	i-resize-magically-when-*I*-desire-because-i'm-THE-MAIN-WINDOW
	bug... for some time at least, awaiting its certain resurrection.
	* error_console.c: Created, avoids creating too many dialogs in
	broken systems and allows copy&paste of the exact error messages
	(so hopefully i won't get more "it breaks saying something i
	didn't bother to look to" bug reports :-))
	* osd.c: Added interface (cc_* routines) to be called from the CC
	decoder threads (untested).
	* zmisc.c: Z works now in environments with XVideo but no
	functional video device.
	
2001-02-16	TTX export <mschimek@users.sourceforge.net>

	* removed all vt_page references from ttxview, zvbi. This is
	  a private libvbi structure now: vbi_event->pgno | user input
	  -> vbi_fetch_page -> fmt_page -> buffer, export, render.
	  Rationale: Raw data is useless for GUI, need not export
	  the rat tail of vt_page substructures and definitions.
	  No cache access outside libvbi, client can't maintain
	  pointers into a dynamically allocated & updated cache
	  or feed back outdated local copies of raw data.

2001-02-15	Copy (pixmaps) <garetxe@users.sourceforge.net>

	* src/ttxview.c: The selection is now exported as a pixmap too
	(can be pasted into xpaint, for example)
	* src/tveng2.c: Support for driver private controls (untested)
	* libvbi/exp-gfx.c: Partial (region) rendering.

2001-02-13	TTX export <mschimek@users.sourceforge.net>

	* added aspect option to ppm/png export
	* removed vt_page* from struct fmt_page

2001-02-11	Copy (text) <garetxe@users.sourceforge.net>

	* src/ttxview.c: Exports the selection as TEXT to the primary
	clipboard (Emacs, X apps) and to CLIPBOARD (GTK apps). X sucks.
	* libvbi/exp-txt.c: Added a string export filter.

2001-02-10	Visual selection finished <garetxe@users.sourceforge.net>

	* src/ttxview.c: Visually selecting the region works flicker free,
	lacks the export filter to clipboard.
	* src/tveng2.c: dummy s_win on startup, avoid g_win failing later
	on because no window set.
	* configure.in, src/x11stuff.c: Deactivate DPMS when going fullscreen.
	* libvbi/v4lx.c (guess_v4l): Try with /dev/video0 before
	traversing dev, 1s startup speedup in the common case.
	
2001-02-09	CP work <garetxe@users.sourceforge.net>

	* src/ttxview.c: Visual selection works, needs to get flicker free
	(easy, but time consuming). Fixed SEGV (button_release not
	disconnected).
	* src/tvengxv.c: Fixed cur_input setting, added index field to
	tveng_enum_input.
	* src/tveng.c: Applied patch to do normalized comparing of
	standards and inputs (Magnus).

2001-02-08	gnome-help-browser <garetxe@users.sourceforge.net>

	* src/ttxview.c: Action for links. Configure with gnomecc,
	"URL handler". Started copy&paste work, selecting doesn't work
	properly yet, but i need to sleep 8-P

2001-02-07	Zapzilla navigation <mschimek@users.sourceforge.net>

	* new add_bcd and carry fix in on_ttxview_key_press()
	* modified links, double width/size safe and http/ftp/email,
	  action tbd.
	* unified CC/WST attr_char, added format.h.
	* moved conceal/reveal into render functions; Need a reveal button.

2001-02-05	Set input <garetxe@users.sourceforge.net>

	* src/zmisc.c: Applied patch by Magnus Sandin to keep input whilst
	switching modes.
	* zapping_setup_fb/Makefile.am, zapping.spec.in: Applied patch by
	Tim Powers to fix build process.

2001-02-03	ZSFB goes PAM <garetxe@users.sourceforge.net>

	* zapping_setup_fb: Uses PAM if available, as explained by Tim
	Powers.
	* plugins: they get installed now under $(prefix)/lib/zapping/plugins,
	that's more polite, according to informed sources :-)

2001-02-02	/dev/video0 <garetxe@users.sourceforge.net>

	* s/dev\/video/dev\/video0/g: rationale: In RH 7.1 beta (Fisher),
	/dev/video is a dir. Patch sent by Tim Powers, thanks :-)
	* Trying to get Z running under 2.4.1, BTTV. The driver appears to
	be broken (mmap fails), haven't tested with xawtv yet.

2001-01-31	Accel keys <garetxe@users.sourceforge.net>

	* src/main.c, channel_editor.c: Finished accel keys. The key
	list takes too much ram (custom widget?)
	* configure.in: Used unicode-config for checking unicode.
	* glade/: Added right-click access to some useful sizes.
	* callbacks.c: Put the tuned channels in a submenu if more than 7.

2001-01-31	Zapzilla <mschimek@users.sourceforge.net>

	* export.c: rewrote enhancement decoder, didn't scale. Should
		support all of 2.5, 3.5 now. Fragments of a TOP index.
	* vbi.c: fixes

2001-01-30	Key syms <garetxe@users.sourceforge.net>

	* src/keysysms.h: busy, just putting up list of known keys.

2001-01-27	Channel accels <garetxe@users.sourceforge.net>

	* glade/zapping.glade, src/channel_editor.c: Added support for
	attaching accelerators to channels, unfinished.

2001-01-25	Old cruft removed <garetxe@users.sourceforge.net>

	* libvbi/: Moved vbi_v4l[2].c to the attic, not longer needed,
	updated README.

2001-01-24	minor tweaks <garetxe@users.sourceforge.net>

	* src/zmisc.c: Hide the pointer in fullscreen mode.
	* src/overlay.c: Fixed tv_screen geometry changed handling.
	* src/callbacks.c: Recompute gometry after modifying (hide, show,
	resize) toolbar and menu.
	* src/callbacks.c: Support for mouse wheel buttons 4 (channel up)
	and 5 (channel down).

2001-01-24	Zapzilla <mschimek@users.sourceforge.net>

	* caption.c: added xds and itv decoder
	* caption.c: various caption fixes (still unfinished)
	* samples: s2-s7
	* cache.c et al: optimized memory usage (-50%)

2001-01-24	mp1e <mschimek@users.sourceforge.net>

	* added vcd mux, syntax verified but not tested with hw players.

2001-01-23	libunicode <garetxe@users.sourceforge.net>

	* configure.in, zapping.spec.in: Added dependency on libunicode
	* src/callbacks.c: Added option to hide menubars and toolbar.
	* help/C/ure.html: [Extremely] Brief introduction to Unicode, and
	some comments on the regex implementation.
	* src/ttxview.c: New search button, pattern history.
	* src/zvbi.c: Search results are freezed.
	* po/*.po: Removed obsolete strings.

2001-01-14	** bug <garetxe@users.sourceforge.net>

	* common/ure.c: Fixed the "**" pattern bug.
	* src/main.c: Definitively closed the auto-resizing bug (and the
	many bugs its fix had caused :-)
	* src/frequencies.c: South African frequency table, donated by
	Jeremy Maccelary. Thanks!
	* src/ttxview.c: Added popup menu support in attached views.
	* zapping_setup_fb: Added not-running-as suid message, paranoid
	security changes.

2001-01-14	Search GUI <mschimek@users.sourceforge.net>

	* Backward search added, remaining bugs fixed in the
	libvbi search routines, should be all gone now.

2001-01-13	TTXView in main window <garetxe@users.sourceforge.net>

	* Restored teletext support into the main window, lacks popup menu
	integration.
	* src/main.c: Fixed the auto-resizing bug. A bit hackish, but
	will remove the annoyance.
	* src/txtcontrols.c: Removed, not longer needed.
	* src/ttxview.c (update_pointer): Bounds checks, needed for calls
	when the window isn't completely open.
	* src/callbacks.c (popup): Transform "Hide extra options" into
	"Show extra options" when needed.
	* help/C/ure.html: Wrote help for the search engine.

2001-01-12	Rewrite of main loop <garetxe@users.sourceforge.net>

	* src/main.c: Got rid of that ugly main loop, use the usual
	gtk_main instead, modules should hook into it if necessary.
	* src/capture.c: Old (capture related) main loop has been moved
	here.
	* src/ttxview.c: Small usability improvements in search_progress,
	default button setting (easier keyb navigation).
	* src/zconf.h: Moved the zc[cgs]_ macros here.
	* src/zmisc.h: Added z_update_gui, calling while
	(gtk_events_pending()) is not any longer safe (idle calls).
	* common/ure: Added URE_NOTBOL, URE_NOTEOL. No gui for that
	yet. Made DOT_MATCHES_SEPARATORS behave properly with negated
	cclasses.

2001-01-12	Search GUI <garetxe@users.sourceforge.net>

	* src/ttxview.c: GUI for TTX searching added.
	* glade/zapping.glade: search_progress created.

2001-01-10	URE, unicode <garetxe@users.sourceforge.net>

	* common/README, common/ucs-2.h: Added.
	* URE: Fixed some bugs, better is...() masks, some optimizations,
	document the prototypes, use libunicode.
	* unicode.c: current locale charset autodetection (taken from
	libiconv), endianness workaround, URE usage example.

2001-01-07	options <garetxe@users.sourceforge.net>

	* src/ttxview.c: Added preliminary support for entering export
	options.
	* common/ure.c: Partial UTF16 regex implementation
	* common/unicode.c: Unicode routines (requires -lunicode)

2001-01-04	libvbi <mschimek@users.sourceforge.net>

	* HTML export restored, enhanced, export filter enabled
	* ASCII/ANSI export restored, enabled
	* vbi_page_title added, unfinished
	* fixed a problem with ttxview subpage display
	* modified toolbar, let's see what Iñaki sez ;-)

2001-01-03	gui for export filters <garetxe@users.sourceforge.net>

	* src/ttxview.c: Export filters GUI. 

2001-01-02	libvbi <mschimek@users.sourceforge.net>

	* fmt_page: returns boolean success now
	* PPM export restored
	* PNG export added (requires libpng)

2000-12-31	libvbi <mschimek@users.sourceforge.net>

	* FLOF restored

2000-12-31	Small fixes <garetxe@users.sourceforge.net>

	* libvbi/export.h: Prototype for fmt_page
	* src/ttxview.c: Better handling of invalid pages..., better
	management of status bar.

2000-12-30	Bookmarks editor <garetxe@users.sourceforge.net>

	* glade/zapping.glade: Bookmarks editing dialog added.
	* src/ttxview.c: Added some bookmarks editing (currently just
	deleting, anything else is a wombat)
	* src/zmodel.c, src/zmodel.h: Added, generic model object, with
	just a "changed" signal. Quite useful for MV design.

2000-12-30	Faster rendering, bookmarks <garetxe@users.sourceforge.net>

	* glade/zapping.glade: [<<][<][>][>>]
	* src/ttxview.c: Added bookmarks. They cannot be removed yet (edit
	by hand zapping.conf)
	* src/zmisc.c: Got rid of redundant malloc, free's, it should
	be faster now.

2000-12-28	YAGR <garetxe@users.sourceforge.net>

	* glade/zapping.glade: Yet another GUi revamp. We are getting
	closer to perfection :-)
	* src/ttxview.c: Made the prev, next subpage buttons traverse the
	cache of pages. We probably need some way to request a given subpage.

2000-12-26	GUI changes <garetxe@users.sourceforge.net>

	* glade/zapping.glade: Added some GUI elements to access the new
	stuff, and the option to hide the Standards, Inputs optionmenus.
	* src/overlay.c: Made it a bit more modular.
	* src/callbacks.c: Code to handle the new GUi items, unfinished.

2000-12-23	History done <garetxe@users.sourceforge.net>

	* src/ttxview.c: History works now
	* glade/zapping.glade: Redesigned advanced controls.

2000-12-22	More TTXView work <garetxe@users.sourceforge.net>

	* src/ttxview.c: More GUI love, should be ready to start merging
	history and other fancy stuff. Tried to minimize used screen
	space, support for subpages, and a very improved Keyb handling.
	* src/tvengxv.c: I shouldn't read that fast...

2000-12-20	TTXView, T thread <garetxe@users.sourceforge.net>

	* src/ttxview.c: All the difficult things are done by now, lacks
	history.
	* src/zvbi.c: Created T thread as discussed, loads of old code
	need to be removed now.
	* src/tvengxv.c (tvengxv_get_tune): Fixed(?) a bug, the pointer
	was apparently wrongly passed. This could be a memleak, needs
	further investigation, i just fixed the sympthoms.

2000-12-17	TTXView started <garetxe@users.sourceforge.net>

	* src/ttxview.c: Started, will be the GUI for the TTX decoder.

2000-12-16	Configurable default charset <garetxe@users.sourceforge.net>

	* glade/zapping.glade, libvbi/vbi.c: Added the
	option to set the default charset.

2000-12-16	Teletext character sets <mschimek@users.sourceforge.net>

	* /libvbi: Zapping now supports all Teletext character sets.

2000-12-16	MC fifos <garetxe@users.sourceforge.net>

	* common/fifo.[ch]: Converted to multi-consumers. Lacks some
	things yet.

2000-12-06	XV bugfixes, remote.c <garetxe@users.sourceforge.net>

	* src/remote.[ch]: Created, allows running some internal Zapping
	functions from inside the plugins.
	* All: Fixed a number of bugs with the XVideo support, thanks to
	all the people that helped with them.
	
2000-12-02	Multi-controller controls <garetxe@users.sourceforge.net>

	* src/tveng.c: Filter and Colorkey controls are now managed by the
	"mother" controller.
	* src/tveng.h: Mother controller added, COLOR control type added,
	controllers now know who do they belong to.
	* src/v4linterface.c: Added GUI item for COLOR controls, cleanup.
	* src/tvengxv.c: removed filter control, now managed by the mother
	controller.

2000-11-30	Bug fixes <garetxe@users.sourceforge.net>

	* all: some code cleanups, wrong assumptions removed.

2000-11-29	Doc updates <garetxe@users.sourceforge.net>

	* TODO, README, NEWS, THANKS, BUGS, doc/: Updated, i'm going to
	make a new release soon.
	* src/channel_editor.c: Print a notice when the XVideo controller
	is used and channel autosearching is requested.
	* all: Fixed some fixme's.

2000-11-26	Controller auto-switching <garetxe@users.sourceforge.net>

	* src/tvengxv.c, src/zmisc.c: Use the XV controller just for
	Overlay mode, READ controller for the rest, fixed some bugs (XSync)
	* zmisc.c: The standards, input and controls are
	dynamically changed when the controller changes.
	* libvbi: Now allows dynamic glyphs switching (currently just
	Latin[12] and Russian)
	* src/mmx.c: Fixed incorrect instruction order (pop, then Return:)
	* src/main.c: Fixed incorrect function order (zmisc_switch_mode,
	then startup_teletext)

2000-11-25	XVideo working (mol) <garetxe@users.sourceforge.net>

	* src/tvengxv.c, src/callbacks.c, src/main.c, src/overlay.c: First
	working XVideo code. It almost works, except for some glitches,
	and that some parts (mainly overlay) are a compendium of gross
	hacks that should be rewritten cleanly.

2000-11-24	Russian glyphs, XVideo <garetxe@users.sourceforge.net>

	* libvbi/: Added font3 and font4, they are the Russian
	glyphs. Contributed by Sergey Nikulin.
	* libvbi/font.h: Added some prepocessor magic for using this fonts
	(FONTS_RUSSIAN)
	* src/tveng1.c: Fixed a couple of minor bugs and some stylistic
	changes.
	* src/tvengxv.c: standards, inputs, freq, controls done.
	* src/tvengxv.h: Created.

2000-11-23	More XVideo, tveng1 fixes <garetxe@users.sourceforge.net>

	* tvengxv.c: Some more work into this, emulating TVeng api using
	XVideo is a bit tricky. get_inputs, find_input.
	* tveng1.c: Fixed a bug that could cause memleaks and broken
	inputs.

2000-11-22	XVideo work <garetxe@users.sourceforge.net>

	* tvengxv.c: Created, handles the XV module. Just does some
	minimal work by now: attach, describe, close, init.
	* /me: I wish i had time to sleep... a day with 48 hours would
	be fine too... All day in the Uni, then code :-(

2000-11-21	tveng modularized <garetxe@users.sourceforge.net>

	* tveng: Changed the structure into a more modular design, this
	will let me add the XVideo handling module easier.

2000-11-19	ru.po <sergey-nikulin@mail.ru>

	* po/ru.po: Added Russian translation

2000-11-17	V4L VBI support <garetxe@users.sourceforge.net>

	* libvbi/: tries to open the vbi device as V4L2. If it fails, uses
	V4L instead.
	* po/es.po: Updated.
	* src/main.c (main): startup_vbi called after setting the input
	and the standard to work around bttv2 locking.

2000-11-15	V4L2 VBI support <garetxe@users.sourceforge.net>

	* libvbi/: Brought up-to-date with alevt 1.6.0, added V4L2-aware
	code. This will be replaced in the future by Michael's decoder.
	* configure.in: Fixed, --disable options didn't work (i wasn't
	using $enableval), removed --enable-tveng-debug, no longer needed.

2000-11-14	Bug fixes <garetxe@users.sourceforge.net>

	* main.c: Fixed the auto-resize-to-unusable-size bug, it lacked a
	gtk_main_iteration.
	* tveng.h: Privatized some stuff
	* tveng_private.h: Added, definitions for the private stuff.
	* tveng_lib: Brought the standalone lib in sync with the latest
	stuff.
	
2000-11-12	de.po and some quick hacks <garetxe@users.sourceforge.net>

	* po/de.po: Commited by Michael some days ago.
	* src/tveng.c: Changing the vidmode is now configurable, some
	people had complained about this.
	* glade/zapping.glade: Added the property to modify this.
	* configure.in: The channel ordering is configurable now.

2000-11-05	YUYV->RGB converter <garetxe@users.sourceforge.net>

	* plugins/screenshot: Added this needed converter.

2000-11-04	MPEG starts to work <garetxe@users.sourceforge.net>

	* plugins/mpeg: It starts to work fine after many bugfixes in rte.
	* src/tveng2.c: Fixed a bug that made it segfault when changing
	standards. Well, not really a bug, but a "feature" of the bttv2
	driver.
	* src/tveng: Use seconds as the timestamp unit, it's a double now.

2000-10-31	More work on Xv <garetxe@users.sourceforge.net>

	* src/capture.c: Default Xv pixformat is YUYV now, was UYVY.
	* src/tveng1.c: Fixed the YUV modes defs (TVENG_PIX_YUV420 =
	PALETTE_YUV420P, not PALETTE_YUV420)

2000-10-30	Capture code working <garetxe@eusers.sourceforge.net>

	* src/capture.c: It can work without Xv support now.
	* src/zmisc.c: Removed some code (obsoleted by capture.c).

2000-10-29	YUV and XV support <garetxe@users.sourceforge.net>

	* src/tveng: Added support for YUV modes (YUV420, YVU420, UYVY,
	YUYV).
	* src/main.c:
	* src/zmisc.c: The capture code now goes into capture.c
	* src/capture.c: Now it can read and draw data (only if the Xv
	extension is present and it works).

2000-10-28	ZVBI more modular <garetxe@users.sourceforge.net>

	* src/zvbi.c, zvbi.h: Now the callbacks that handle the VBI are
	self-contained, they don't need to be called from other modules.
	* src/tveng2.c, src/videodev2.h: Brought up-to-date with the
	latest videodevX.
	* src/capture.c: Some preliminar Xv code has been written.

2000-10-27	Tveng debug configurable <garetxe@users.sourceforge.net>

	* src/tveng.c: Now the debug level can be changed using
	tveng_set_debug_level.
	* src/sound: Removed sound support. It wasn't used, and it was
	causing some problems.

2000-10-24	MPEG plugin started <garetxe@users.sourceforge.net>

	* plugins/mpeg: rte is now ready, i'm starting the wrapper plugin.
	* configure.in, Makefile.am: Modified as necessary

2000-10-14	XGetScreenSaver <garetxe@users.sourceforge.net>

	* src/x11stuff.c: Use XGetScreenSaver and friends to modify the
	screensaver, but it doesn't appear to work yet :-(

2000-10-05	Russian frequency table <garetxe@eusers.sourceforge.net>

	* src/frequencies.c: Added russian frequency table, donated by
	Eugene Crosser.

2000-10-05	overlay rewritten <garetxe@users.sourceforge.net>

	* configure.in: Added check for CPU type and presence of MMX.
	* src/yuv2rgb.c:
	* src/yuv2rgb.h:
	* src/yuv2rgb_mmx: YUV->RGB transform routines, with MMX
	aceleration supported.
	* src/mmx.h:
	* src/mmx.c: MMX detecting and handling helper functions.
	* src/overlay.{ch}: Overlay handling code, completely
	rewritten. Now it works perfectly, just a bit of necessary
	flicker.
	* src/x11stuff.{ch}: Low-level X11 stuff. I'll try to stick with
	GDK in the rest of Zapping for the sake of clarity.
	* src/tveng2.c: Some fixes to make it work with the newest bttv2
	and videodevX.

2000-09-23	back again <garetxe@users.sourceforge.net>

	* src/main.c: Added option for supporting old bttv devices.

2000-09-17	fr.po updated <garetxe@users.sourceforge.net>

	* po/fr.po: Updated (Christian Marillat)

2000-09-16	/dev/dsp bug closed <garetxe@users.sourceforge.net>

	* src/main.c: When VBI was disabled, the previous capture mode was
	set automatically to CAPTURE, fixed.
	* src/tveng.c: tveng_attach_device prints info about the video
	device on success (if not configured with --disable-tveng-debug)
	* src/tveng.c: Kernel 2.4.0test8's bttv makes the program hang if
	the given width and height aren't valid, fixed (was '/dev/dsp bug')
	* src/tveng.c: Added the option to tveng_device_info_new to use a
	standard norm is the input we are going to switch to is tunerless
	(so it defaults to PAL).
	* src/main.c: Added the command line option to control the default
	norm (--tunerless-norm, -n)

2000-09-14	Kernel 2.4.0test8 <garetxe@users.sourceforge.net>

	* /box: Installed the new kernel, a number of problems have arisen
	with Zapping. I can reproduce now the /dev/dsp bug! I don't have a
	clue of the cause, though :-)
	* /box: NOTE: Some user related that the problem disappeared after
	installing Gerd's bttv over the 2.4.0test8's one. Check.
	* src/sound.c: bugfix, even when esd failed to open the device,
	startup_sound returned succeeded.
	* src/main.c: Sound can be disabled by a command line  option and
	if startup_sound fails.
	* README: Updated, added a quick troubleshooting.

2000-09-13	Teletext processed <garetxe@users.sourceforge.net>

	* src/zvbi.c, src/main.c: The teletext image is now received by
	the plugins, so it can be processed.
	* src/plugins.c: The plugin_sample struct no longer contains a
	GdkImage.
	* plugins/screenshot: Now it saves the current teletext page too.
	* src/strnatcmp: Like strcmp and strcasecmp, but perform natural
	ordering of strings with numbers (1, 2, 3, .., 8, 9, 10, 11)
	* src/strnatcmp.c: fall back to str[case]cmp if they compare the
	same in natural order.
	* src/frequencies.c: Now it uses strnatcmp for station aliases.
	
2000-09-12	JPEG screenshots <garetxe@users.sourceforge.net>

	* plugins/screenshot.c: Now it uses JPEG format instead of PNG.
	* main.c: Added option to disable VBI on startup (avoid V4L2
	crashes)
	* src/zvbi.c: Added debug messages

2000-09-11	New release <garetxe@users.sourceforge.net>

	* html docs: Updated.
	* src/tveng.c: Support for command-line bpp added.
	* src/callbacks.c: The screensaver now goes to throttle mode when
	Fullscreen is used.
	* src/zmisc.h: Added some debug routines
	* src/main.c: populated with debugging messages

2000-09-08	History improved <garetxe@users.sourceforge.net>

	* glade/zapping.glade: txtcontrols redesigned, now it only shows
	the visited pages, not page + subpage. For using both, a tree
	would be better.
	* src/zvbi.c: Added a web-browser-like history, and a visited
	pages list. It's easier to navigate now. Added fast navigation
	("color" navigation, FLOF), and subpage/page recognision.
	* src/main.c: Added command line option --bpp.

2000-09-07	History implemented <garetxe@users.sourceforge.net>

	* src/txtcontrols.c: Previous, next work for pages and subpages,
	history is saved when setting pages.

2000-09-06	VBI integrated <garetxe@users.sourceforge.net>

	* glade/zapping.glade: VBI has been integrated into the GUI.
	* src/callbacks.c: Added code for switching to VBI
	* src/zvbi.c: Much less CPU usage (pre-rendered frames, draw only
	when neccessary)
	* pixmaps/vt_loading*: Two images (~11K) created for when the
	requested page isn't available.
	* src/channel_editor.c: Uses VBI for getting the station names.
	* src/main.c: Added config setting for saving the VBI state.
	* src/txtcontrols.c: Created, manages the VBI GUI.

2000-09-05	Bpp fixes <garetxe@users.sourceforge.net>

	* zapping_setup_fb: Now accepts command line --bpp option
	* src/zvbi.c: Does most of the work. Fetches, renders and scales
	automagically teletext pages. Depends on GdkPixbuf to work.
	* src/properties.c: Now the VBI properties are modificable.

2000-09-04	Bug fixes <garetxe@users.sourceforge.net>

	* src/tveng[12].c: Fixes in the fullscreen mode, it had errors
	related to non-functional DGA drivers. Now most of the
	functionality goes into the VidMode extension, that usually works.

2000-09-03	Project structure changes <garetxe@users.sourceforge.net>

	* libvbi/: It's a bit cleaner now, and commited to CVS
	* src/zvbi.c: Gets the date and the name on each header/xpacket
	* configure.in: Not having -lpng is not longer fatal, conditional
	plugin build, [optional] GdkPixbuf support added (i will need it
	for the VBI plugin)

2000-09-01	VBI support added <garetxe@users.sourceforge.net>

	* libvbi/: Added support for VBI (stolen from alevt)
	* src/zvbi.c: Swallow support and encapsulation added

2000-08-25	mode switch when needed <garetxe@users.sourceforge.net>

	* plugins/screenshot: Now switchs to capture mode automagically
	when overlay. Doesn't switch back, though.
	* src/zmisc.c: ShowBox now accepts parameters (like sprintf,
	printf and friends)

2000-08-24	back to work <garetxe@users.sourceforge.net>

	* po/fr.po: Updated the french translation (Christian Marillat)
	* src/callbacks.c: The focus change no longer makes the overlay
	refresh (was a bit visually unpleasant)
	* src/tveng[12].c: Added a configure option to avoid initial
	channel and standard selection.

2000-07-27	mode switching <garetxe@users.sourceforge.net>

	* src/zmisc.c: Added a routine for switching modes correctly.
	
2000-07-23	Misc bug fixing <garetxe@users.sourceforge.net>

	* src/zmisc.c: Fixed the segfault when quitting (i believe so, at
	least).
	* src/tveng.c: Fixed some memleaks with the X code, and made it
	restore the VidMode correctly when returning from fullscreen.
	* src/zconf.c: Fixed the problems with the help being opened by
	Mozilla - it was a mem-leak, g_get_home_dir returns a static
	string, and I was g_free'ing it.
	* plugins/screenshot: It now checks for capture mode before starting.
	* help/C: I updated the docs and the screenshots.
	
2000-07-22	Windowed preview working <garetxe@users.sourceforge.net>

	* src/zmisc.c: Fixed the last bugs with it except one, that i
	would need to get events from the root window to fix (and I don't
	want to). You could call it a "feature" ;-) Did I tell that
	windowed preview sucks? There is a bug with it that i'm trying to
	reproduce (a SIGSEGV when exitting)
	* src/tveng2.c: Fixed a bug with clipping rectangles. The struct
	wasn't built correctly for more than one rectangle.
	* everything: The windowed mode has been integrated in the program
	(TVENG_CAPTURE_WINDOW mode).
	* src/zmisc.c: I think the SIGSEGV previously mencioned is fixed now.
	
2000-07-21	Windowed preview <garetxe@users.sourceforge.net>

	* src/zmisc.c: It's still unfinished (and sucks), but it mostly
	works now. I've added (copied from xawtv) clipping support. There
	are some bugs with it still.

2000-07-20	Modify channels <garetxe@users.sourceforge.net>

	* src/channel_editor.c: Added the option to modify channels and a
	fine tuner
	* glade/zapping.glade: Modified accordingly.
	* src/main.c: Fixed ratio is working (although it doesn't work
	under Sawfish)
	* macros/autogen.sh: Little fix, it tried to autoconf mp1e's
	configure.in (it's in the same CVS tree as zapping)
	* src/callbacks.c: Added some (very rudimentary) support for
	windowed overlay mode. It just sucks, and will suck forever, but
	people ask for it :-/
	
2000-07-19	Option for keeping the ratio <garetxe@users.sourceforge.net>

	* src/properties.c: Added the option (doesn't do anything for now)
	to keep a given aspect ratio when resizing.
	* glade/zapping.glade: Updated the properties dialog accordingly.

2000-07-04	configure.in fix <garetxe@users.sourceforge.net>

	* configure.in: configure.in now tries "-lpng -lz" if "-lpng"
	fails.
	* /me: I'm working with M.Schimek in a lib front-end for mp1e,
	don't expect changes in Zapping in the near future.

2000-06-21	Timestamps <garetxe@users.sourceforge.net>

	* src/tveng: Timestamps support has been added
	* src/plugins: Now the plugins receive a sample object (a+v), not
	just video.

2000-06-20	Channel finder <garetxe@users.sourceforge.net>

	* src/channel_editor.c: Added the option to find automagically all
	the tunable channels (works fine in V4L, a bit worse in V4L2)
	* src/tveng2.c: Fixed, so it can do channel searching.

2000-06-19	datadir fixed <garetxe@users.sourceforge.net>

	* configure.in: Now the need to specify the datadir option has
	disappeared, --prefix is enough.
	* tveng1.c: Worked around a bug in the bttv driver, the returned
	maximum capture width isn't correct (thanks to Marcel Janssen)

2000-06-14	Right-click menu <garetxe@users.sourceforge.net>

	* src/callbacks.c: Fullscreen mode grabs the keyboard again, but
	it is apparently safe now.
	* glade/zapping.glade: Added a right click menu. Not very useful,
	but it is fancy and somewhat faster to use.
	* src/tveng.c: Now it fills the fb_info struct correctly on startup.

2000-06-13	Sound fixes <garetxe@users.sourceforge.net>

	* src/sound.c: Some fixes have been made, now it should be
	somewhat faster. It is yet untested.
	* src/tveng.c: Added support for 15 bpp screen depth.
	* zapping.spec.in: Fixed, now it adds the translations to the RPM
	correctly.
	* src/callbacks.c: Fullscreen mode no longer grabs the
	keybord. This should avoid blocking X (completely :-) if something
	doesn't work while we are fullscreen.

2000-06-12	Docs added <garetxe@users.sourceforge.net>

	* help/C/channel_editor.html: Added.
	* src/sound.c: Sound capturing support is now complete. It is
	slow, though.
	* src/tveng.c: Fixed a couple of memleaks in
	tveng_get_display_depth (memprof is great!)
	
2000-06-09	VidMode extension <garetxe@users.sourceforge.net>

	* tveng.c: If a better resolution for going fullscreen is
	available, switch to it using the Vidmode extension.
	
2000-06-07	fr.po added <garetxe@users.sourceforge.net>

	* fr.po: thanks to Christian Marillat a french translation is
	available.
	* main.c: Zapping now saves the current input and the current
	standard.
	* zapping.spec.in: I got to build a RPM, seems to work.
	
2000-06-06	Lazy day <garetxe@users.sourceforge.net>

	* help/C/properties.c: Added the help for the properties
	* zapping.spec.in: Written, but it doesn't build yet, and lacks
	dependencies.
	
2000-06-04	Plugin code remade <garetxe@users.sourceforge.net>

	* src/plugin_properties.c:
	* glade/zapping.glade: Dialog layout redesigned, now the plugins
	are configurable from the plugin_properties dialog too.
	* src/sound.[ch]: Preliminary esd sound support added.
	
2000-06-02	First problems fixed <garetxe@users.sourceforge.net>

	* configure.in: Added the option to disable X extensions (DGA)
	from the configure script (thanks to Jan Castermans).
	* configure.in: Added a test to determine whether to use
	node->children or node->childs.
	* tveng: Added frame timestamps.
	* callbacks.c:
	* main.c: Added option for resizing with fixed increments.
	
2000-06-01	Bug fixes <garetxe@users.sourceforge.net>

	* everything: Lots of bugs and fixme's have been corrected. Some
	code cleanups have been made too.
	* configure.in: Changed release number from 0.5.0pre1 to 0.5.0. I
	plan to release tomorrow.

2000-05-29	Tveng2 done <garetxe@users.sourceforge.net>

	* tveng2.c:
	* tveng.c: The V4L2 driver has been [re]written and apparently it
	works fine. The bugs when opening external programs and changing
	inputs are still there, though :(
	* plugins.c: Converted plugin_get_priority into a more general
	pourpouse function, plugin_get_misc_info. Added cathegories too.

2000-05-20	Back into coding <garetxe@users.sourceforge.net>

	* /me: I'm very busy with my finals, i won't have much time for
	coding this month (and half of the next one) :(	
	* plugins.c:
	* plugin_common.h: New plugin structure, more flexible.
	* plugins/template/template.c:
	* plugins/screenshot/screenshot.c: Adapted to the new API.
	* tveng: Started rewritting the V4L2 controller.
	* zapping_setup_fb/zapping_setub_fb.c: Corrected verbosity and
	some typos.
	
2000-04-30	Screenshot saver <garetxe@users.sourceforge.net>

	* plugins/screenshot/screenshot.c: Finished.
	* configure.in: Added checking for -lpng

2000-04-29	Screenshot saver <garetxe@users.sourceforge.net>

	* plugins/template/template.c: Finished.
	* src/Makefile.am: Added pthread support.
	* src/zmisc.c:
	* src/zmisc.h: Added some blocking, modal variations of ShowBox.
	
2000-04-28	Plugins working <garetxe@users.sourceforge.net>

	* src/plugins.c: some bugs (misfeatures ;) corrected, it now works
	as expected.
	* help/C/plugin_devel.html: Changed plugin_ prefix to zp_ in the
	plugin API (there was a symbol collision).
	* plugins/template/template.c: Template plugin created.
	* src/zmisc.c: Fixed a bug in zimage_reallocate
	
2000-04-27	Plugins finished <garetxe@users.sourceforge.net>

	* help/C/plugins_devel.html: Holds the new plugin API.
	* src/plugins.c: Implements the functionality described in the
	doc.
	
2000-04-24	Again into CVS <garetxe@users.sourceforge.net>

	* CVS/: Zapping has gone again into CVS (it was time since the
	last cvs ci, but a lot of work has been done :)))
	* src/tveng1.c: All the V4L1 specific stuff has been placed here
	* src/tveng.c: Now it detects the video device driver (V4L1 or
	V4L2) and acts accordingly. Total rewrite.
	* help/C/plugin_devel.html: Created, it is the plugin API.
	
2000-04-22	Channel editor done <garetxe@users.sourceforge.net>

	* channel_editor.c: Finished, except for the help (not written)
	and autotuning (not written in tveng.c)
	* SF: Added the project to the Trove system in SourceForge.
	
2000-04-21	Channel editor improved <garetxe@users.sourceforge.net>

	* channel_editor.c: Created. Holds the code for handling the
	channel editor dialog.
	* frequencies.c: Added tveng_get_id_of_channel and
	tveng_get_id_of_country_tune, needed by channel_editor.c
	* callbacks.h: Cleanup and some comments have been added
	* src/Makefile.am: Added channel_editor.c to the list of sources.

2000-04-20	misc improvements <garetxe@users.sourceforge.net>

	* properties.c: Created, holds all the code for handling the
	properties dialog.
	* zapping.glade: Channel choosing dialog redesigned.
	* tveng.c: Added a parameter to tveng_attach_device (attach_mode)
	* callbacks.c: Cleaned a hack used in go_windowed
	
2000-04-16	properties done <garetxe@users.sourceforge.net>

	* callbacks.c: Properties dialog has been implemented, shows now
	some info about the video device (a la gnometv)
	* main.c: the video device name and zapping setup fb verbosity now
	can be configured, just as before
	* tveng.c: Added a range check in tveng_set_format, it prevents
	errors that let the device in a unusable state.
	
2000-04-15	help support added <garetxe@users.sourceforge.net>

	* help/: The introduction to Zapping has been written here
	* Makefile.am:
	* configure.in: Modified to reflect the above
	* callbacks.c: Some bugfixes
	* main.c: Everything works now, except for plugin support (the API
	has to be slightly modified)
	
2000-04-15	bugtrack day <garetxe@users.sourceforge.net>
	
	* v4linterface.c:
	* tveng.c:
	* callbacks.c: Lots of bugs were introduced, some have been fixed,
	now zapping works (almost) as 0.3.3 :-)
	* tveng.c:
	* v4linterface.c: Added language select control (mono, stereo,
	european1 and european2), but apparently it doesn't work.
	* tveng.c: Some conflictive and bttv-only code fragments have been
	#ifdef'ed.
	
2000-04-14	zapping reassembled <garetxe@users.sourceforge.net>

	* v4linterface.c: Adapted to the new tveng interface
	* everything: Zapping now is completely reassembled and compiles
	clean, lots of bugs have arosen, but i'm so happy ;-))))
	
2000-04-13	callbacks updated <garetxe@users.sourceforge.net>

	* zapping.glade: Removed the 'Save screenshot button', it will be
	a plug-in.
	* callbacks.c: It now uses the new tveng api, it is much nicer to
	deal with, btw :-)
	* libglade: Posted a bug to the mantainer, the about box wouldn't
	show the logo properly, and that was a pity with such a nice
	Zapping logo.
	
2000-04-13	libglade in <garetxe@users.sourceforge.net>

	* interface.c: The project now uses libglade.
	* support.c: Removed from the project, it is now useless.
	
2000-04-08	zconf working <garetxe@users.sourceforge.net>

	* zconf.c: Now it is written and appears to work fine.
	
2000-04-01	New module <garetxe@users.sourceforge.net>

	* zmisc.c: Created, is a place for putting some misc functions
	that didn't fit elsewhere.
	
2000-04-01	ZConf API created <garetxe@users.sourceforge.net>

	* zconf.h: It holds the new zconf API, but nothing of it is
	implemented yet.
	
2000-03-31	Using shared mem <garetxe@users.sourceforge.net>

	* main.c: The program uses shared mem for displaying the data,
	it is faster now.
	* tveng.c: Removed info->format.data, now a parameter must be
	supplied to tveng_read_frame, the user of tveng must take care now
	about allocating memory.
	
2000-03-30	V4L fixes <garetxe@users.sourceforge.net>

	* tveng.c: Some bugs in tveng for V4L have been fixed, now should
	work quite reliably (tveng_[sg]et_format,
	tveng_start/stop_capturing, tveng_read_frame,
	p_tveng_[de]queue, ... had to be tested and fixed).
	* tveng.c: tveng_attach_device sets a correct starting capture
	size and tveng_set_capture_size stops capturing as neccesary.
	* everything: The new 0.5 series are into CVS again ;-)
	
2000-03-27	V4L support ended <garetxe@users.sourceforge.net>

	* tveng.c: V4L support has been completed after 9 days, i've been
	very busy this two weeks with the Uni :-(
	* main.c: Rewritten, it was becoming very messy.
	* zconf.c: Created. It's a config saving module, created with
	gconf porting in mind.
	* plugins.c: The new plugin protocol has been designed, it lacks
	the implementation yet, and some docs.
	
2000-03-18	V4L support started <garetxe@users.sourceforge.net>

	* tveng.c: It has been converted to V4L and the API has changed
	significantly. Now the rest of the program must be changed...
	* zapping_setup_fb: Converted to V4L
	* Release: 0.3.2 contained a bug in the distro, a bug fix release
	has been made, named 0.3.3.
	
2000-02-24	New release: 0.3.2 <garetxe@users.sourceforge.net>

	* plugins.c:
	* main.c:
	* callbacks.c: Added a tveng_read_frame() function and fixed some
	bugs. This is the first version considered "working". The plugin
	protocol shouldn't change too much in the near future.
	* tveng.c: i cannot get read() calls to work under v4l2 yet :-(
	
2000-02-22	Plugin support finished <garetxe@users.sourceforge.net>

	* plugins.c:
	* main.c: The plugin support is now completely integrated into
	zapping, i made a test plugin and works fine.
	
2000-02-20	Plugin config saved <garetxe@users.sourceforge.net>

	* plugins.c:
	* main.c: Now the plugins can save/restore their configuration
	
2000-02-19	Plugin structure ready <garetxe@users.sourceforge.net>

	* plugin.c: The plugin loading / unloading funtions work
	
2000-02-19	Added the project to CVS <garetxe@users.sourceforge.net>

	* Generic: The project has been added to
	  cvs.zapping.sourceforge.net, it can now be accessed anonymously
	* zapping_setup_fb: Has moved from src/zapping_setup_fb to
	  zapping_setup_fb in order to follow the 'no / in Makefile.am'
	  rule, and not to break automake.
	* io.c: Minor changes
	
2000-02-11	Suid and preview operative <garetxe@users.sourceforge.net>

	* src/zapping_setup_fb/zapping_setup_fb.c: I finished the preview
	  code and the suid program, i hope it hasn't many security flaws.
	* src/interface.c: some more configurable properties
	* pixmaps/0.3-logo.png: Created a nice logo with the Gimp


2000-02-02	Fullscreen mode working <garetxe@users.sourceforge.net>
	
	* src/tveng.c: Fullscreen mode now works (although the code now is
	just a hack, needs to be cleaned up)
	* Makefile.am: Added the suid to the project, now it compiles
	
2000-01-29	First _really_ working version <garetxe@users.sourceforge.net>

	* src/tveng.c: Fairly complete V4L2 wrapping library
	* src/io.c: Ability to capture PNG images
	* src/tveng.c: Direct Video Blitting (BGR -> RGB conversion avoided)
	* src/interface.c: Channel editor added

Local Variables:
mode: change-log
coding: utf-8
left-margin: 8
fill-column: 76
End:
